import riot from 'riot/riot+compiler';
import route from 'riot-route';
import Ethereum from './Ethereum.js';
import Promise from 'bluebird';
import BN from 'bignumber.js';
import JUST from './JUST.js';
import namegen from './namegenerator.js';
import W3Constructor from 'web3';
import memes from './dynamicmemes.js';
import popover from './popover.js';
import debounce from 'lodash/debounce';

window.riot = riot;
window.JUST = JUST;
window.BN = BN;
window.memes = memes;
window.popover = popover;
window.namegen = namegen;
window.debounce = debounce;

$(fn => {
  tutorials();
  (async function() {
    // wlad pretty transitions
    JUST.UI.on('ui.transition', fn => {
      // cool loader
      riot.mount('module-navbar', 'module-navbar');
      riot.mount('module-template', 'state-loading');
      console.log('cool loader');
    });

    // connect with our intended Ethereum providers
    await JUST.connect({
      providers: [
        {
          name: 'Metamask',
          API: typeof web3 !== 'undefined' ? web3 : false,
        },
        {
          name: 'Browser',
          API: 'https://mainnet.infura.io/YKZGQG2QTBx0tiWoB2IF',
        },
        {
          name: 'Websocket',
          API: new W3Constructor(new W3Constructor.providers.WebsocketProvider('wss://mainnet.infura.io/_ws')),
        },
      ],
      contracts: [
        {
          name: 'Fomo3D',
          model: Ethereum.Fomo3D,
          // 6 hour 0x7195d7da36069a8b0a5fa5af18d83e50b7f03544
          // 10 minute 0x8aaf7ea31a741f6b74f9fd15c5d271712fa378c5
          address: '0x51a5271ec514c3065d9de2d8e95051989f7d53ab',
        },
        {
          name: 'P3D',
          model: Ethereum.P3D,
          address: '',
        },
      ],
    });

    // synchronize time
    JUST.synchronizeTime();

    // whenever the user signs in or changes account
    if (JUST.Bridges.Metamask)
      JUST.Bridges.Metamask.on('status.signedIn', async loggedIn => {
        // fetch & cache player information
        if (loggedIn) JUST.Cache.currentPlayer = await JUST.Bridges.Metamask.contracts.Fomo3D.getCurrentPlayer();

        // signal that the UI needs to be refreshed
        JUST.UI.trigger('ui.refresh');
      });

    // create websocket listener
    JUST.Bridges.Websocket.contracts.Fomo3D.listen();
    JUST.Bridges.Websocket.contracts.Fomo3D.enableRefresher();
    JUST.Bridges.Websocket.contracts.Fomo3D.on('transaction', async e => {
      console.log('tx received', e);
      var isOurs = false;
      if (JUST.Bridges.Metamask && JUST.Bridges.Metamask.signedIn) {
        JUST.Cache.currentPlayer = await JUST.Bridges.Metamask.contracts.Fomo3D.getCurrentPlayer();
        isOurs = e.returnValues.playerID && e.returnValues.playerID == JUST.Cache.currentPlayer.PID;
      }

      JUST.UI.trigger('ui.refresh');

      switch (e.event) {
        case 'onEndTx':
          if (isOurs) {
            console.log(
              `Your keyring is now ${BN(e.returnValues.keysBought)
                .div(1e18)
                .toFixed(4)} keys heavier, jingle jingle`,
            );
            alertify.logPosition('bottom left');
            alertify.success(
              `你现在有 ${BN(e.returnValues.keysBought)
                .div(1e18)
                .toFixed(4)} keys, 羡煞众人`,
            );
          } else {
            alertify.logPosition('bottom right');
            let message = JUST.Bridges.Browser.web3.utils.toAscii(e.returnValues.playerName).trim();
            if (e.returnValues.playerName == '0x0000000000000000000000000000000000000000000000000000000000000000')
              message = `Someone`;
            if (parseInt(BN(e.returnValues.keysBought).toString()) == 0) {
              message += ` just funded ${BN(e.returnValues.ethIn)
                .div(1e18)
                .toFixed(4)} ETH to the ICO.`;
            } else {
              message += ` 刚刚获得 ${BN(e.returnValues.keysBought)
                .div(1e18)
                .toFixed(4)} keys.`;
            }

            alertify.success(message);
            console.log(message);
          }
          break;
        case 'onWithdraw':
        case 'onWithdrawAndDistribute':
          if (isOurs) {
            console.log(
              `You successfully siphoned ${BN(e.returnValues.ethOut)
                .div(1e18)
                .toFixed(4)} ETH to your own wallet!`,
            );
            alertify.logPosition('bottom left');
            alertify.success(
              `你成功提现 ${BN(e.returnValues.ethOut)
                .div(1e18)
                .toFixed(4)} ETH 到你的钱包!`,
            );
          } else {
            alertify.logPosition('bottom right');
            let message = JUST.Bridges.Browser.web3.utils.toAscii(e.returnValues.playerName).trim();
            if (message == '') message = `某人`;
            message += `刚刚从合约提现 ${BN(e.returnValues.ethOut)
              .div(1e18)
              .toFixed(4)} ETH。`;
            alertify.success(message);
            console.log(message);
          }
          break;
        case 'onNewName':
          if (isOurs) {
            console.log(
              `You changed your name to ${JUST.Bridges.Browser.web3.utils.toAscii(e.returnValues.playerName)}.`,
            );
            alertify.logPosition('bottom left');
            alertify.success(
              `你修改了你的名字为 ${JUST.Bridges.Browser.web3.utils.toAscii(e.returnValues.playerName)}.`,
            );
          } else {
            alertify.logPosition('bottom right');
            alertify.success(
              `有位新成员成为我们的推荐人. 欢迎 ${JUST.Bridges.Browser.web3.utils.toAscii(e.returnValues.playerName)}.`,
            );
            console.log(
              `A new member has been added to our Advisory Board. Please welcome ${JUST.Bridges.Browser.web3.utils.toAscii(
                e.returnValues.playerName,
              )}.`,
            );
          }
        default:
          break;
      }
    });

    jQuery('#namePurchase').click(async e => {
      if (!JUST.Bridges.Metamask || !JUST.Bridges.Metamask.signedIn) return alertify.alert('你没有登录 metamask.');
      try {
        let name = jQuery('#nameInput').val();
        jQuery('#loading').modal({ backdrop: 'static', keyboard: false });
        var masternode =
          window.localStorage.getItem('masternode') && window.localStorage.getItem('masternode') != ''
            ? JSON.parse(window.localStorage.getItem('masternode')).value
            : '';

        let receipt = await JUST.Bridges.Metamask.contracts.Fomo3D.write(
          'registerNameXname',
          [name, masternode, true],
          { value: parseInt(BN(1e16)) },
        );
        jQuery('#loading').modal('hide');
        jQuery('#vanity').modal('hide');
        alertify.log(`如果命名合规的话，你的名字正在写入区块链上。`);
      } catch (e) {
        alertify.log(`Vanity purchase has been cancelled.`);
        jQuery('#loading').modal('hide');
        jQuery('#vanity').modal('hide');
      }
    });

    /*==============================
	=            States            =
	==============================*/

    // play slow
    JUST.route('/play', async masternode => {
      var utils = JUST.Bridges.Browser.web3.utils;
      var toAscii = utils.toAscii;
      utils.toAscii = (...args) => {
        return toAscii(...args).replace(/\u0000/g, '');
      };

      // get round information
      JUST.Cache.currentRound = await JUST.Bridges.Browser.contracts.Fomo3D.read('getCurrentRoundInfo');

      // get last round info
      JUST.Cache.lastRound = await JUST.Bridges.Browser.contracts.Fomo3D.read('round_', JUST.Cache.currentRound[1]);

      // get airdrop information
      JUST.Cache.airdropTracker = BN(await JUST.Bridges.Browser.contracts.Fomo3D.read('airDropTracker_')).div(10);
      JUST.Cache.airdropPot = BN(
        (await JUST.Bridges.Browser.contracts.Fomo3D.read('getCurrentRoundInfo'))[13].slice(0, -3),
      )
        .div(1e18)
        .toFixed(2);

      // get fiat info
      jQuery.get(
        'https://min-api.cryptocompare.com/data/price?fsym=ETH&tsyms=BTC,USD,EUR',
        data => (JUST.Cache.fiatRatios = data),
      );

      // get player info
      if (JUST.Bridges.Metamask && JUST.Bridges.Metamask.signedIn)
        JUST.Cache.currentPlayer = await JUST.Bridges.Metamask.contracts.Fomo3D.getCurrentPlayer();

      // finally, render our UI
      riot.mount('module-navbar', 'state-navbar');
      riot.mount('module-airdrop', 'state-airdrop');
      riot.mount('module-bash', 'state-bash');
      riot.mount('module-template', 'state-play');
    });

    //play2 quick
    JUST.route('/quick', async masternode => {
      // get round information
      JUST.Cache.currentRound = await JUST.Bridges.Browser.contracts.Fomo3D.read('getCurrentRoundInfo');

      // get last round info
      JUST.Cache.lastRound = await JUST.Bridges.Browser.contracts.Fomo3D.read('round_', JUST.Cache.currentRound[1]);

      // get airdrop information
      JUST.Cache.airdropTracker = await JUST.Bridges.Browser.contracts.Fomo3D.read('airDropTracker_');

      // get fiat info
      jQuery.get(
        'https://min-api.cryptocompare.com/data/price?fsym=ETH&tsyms=BTC,USD,EUR',
        data => (JUST.Cache.fiatRatios = data),
      );

      // get player info
      if (JUST.Bridges.Metamask && JUST.Bridges.Metamask.signedIn)
        JUST.Cache.currentPlayer = await JUST.Bridges.Metamask.contracts.Fomo3D.getCurrentPlayer();

      // finally, render our UI
      riot.mount('module-navbar', 'state-navbar');
      riot.mount('module-airdrop', 'state-airdrop');
      riot.mount('module-template', '~');
    });

    // statistics
    JUST.route('/stats', function() {
      riot.mount('module-template', 'state-stats');
    });

    // how to play
    JUST.route('/how-to', function() {
      riot.mount('module-template', 'state-how-to');
    });

    // about
    JUST.route('/about', function() {
      riot.mount('module-template', 'state-about');
    });

    // p3d for bullrun
    JUST.route('/p3d', async fn => {
      // loads up a different navbar for p3d alone
      riot.mount('module-navbar', 'state-p3dnav');

      // container
      JUST.Cache.P3D = {};

      // fetch all the goods
      JUST.Cache.P3D.Blockchain = await Promise.all([
        JUST.Bridges.Browser.contracts.P3D.read('totalSupply'),
        JUST.Bridges.Browser.contracts.P3D.read('buyPrice'),
        JUST.Bridges.Browser.contracts.P3D.read('sellPrice'),
        JUST.Bridges.Metamask && JUST.Bridges.Metamask.signedIn
          ? JUST.Bridges.Metamask.contracts.P3D.read('myTokens')
          : 0,
        JUST.Bridges.Metamask && JUST.Bridges.Metamask.signedIn
          ? JUST.Bridges.Metamask.contracts.P3D.read('myDividends', true)
          : 0,
        jQuery.get('https://min-api.cryptocompare.com/data/price?fsym=ETH&tsyms=BTC,USD,EUR'),
      ]);

      // get current player info (if any)
      JUST.Cache.currentPlayer =
        JUST.Bridges.Metamask && JUST.Bridges.Metamask.signedIn
          ? await JUST.Bridges.Metamask.contracts.Fomo3D.getCurrentPlayer()
          : false;

      JUST.Cache.P3D.Conversions = await Promise.all([
        JUST.Bridges.Metamask && JUST.Bridges.Metamask.signedIn && BN(JUST.Cache.P3D.Blockchain[3]).isGreaterThan(0)
          ? JUST.Bridges.Browser.contracts.P3D.read(
              'calculateEthereumReceived',
              BN(JUST.Cache.P3D.Blockchain[3]).toFixed(),
            )
          : 0,
        JUST.Bridges.Metamask && JUST.Bridges.Metamask.signedIn && BN(JUST.Cache.P3D.Blockchain[4]).isGreaterThan(0)
          ? JUST.Bridges.Browser.contracts.P3D.read(
              'calculateTokensReceived',
              BN(JUST.Cache.P3D.Blockchain[4]).toFixed(),
            )
          : 0,
      ]);

      riot.mount('module-template', 'state-p3d');
    });
    // shakedown for scary
    JUST.route('/shakedown', function() {
      riot.mount('module-template', 'state-shakedown');
      // riot.mount('module-navbar', 'state-shakedownnav');
    });

    // 404
    JUST.route('/*', async page => {
      let identifier = window.location.pathname.slice(1);

      if (window.location.pathname.slice(0, 3) == '/0x' && window.location.pathname.slice(1, 43).length == 42) {
        window.localStorage.setItem(
          'masternode',
          JSON.stringify({ type: 'address', value: window.location.pathname.slice(1, 43) }),
        );
      } else {
        /^\+?\d+$/.test(identifier)
          ? window.localStorage.setItem('masternode', JSON.stringify({ type: 'id', value: identifier }))
          : window.localStorage.setItem('masternode', JSON.stringify({ type: 'name', value: decodeURI(identifier) }));
      }

      route('/play');
      // let player = await JUST.Bridges.Browser.contracts.Fomo3D.read("plyr_", [parseInt(identifier)])
      // if(player.address !== "0x0000000000000000000000000000000000000000"){
      // 	window.localStorage.setItem("masternode", {type: "address", value: identifier})
      // 	route('/play')
      // 	return

      // }

      // let id = await JUST.Bridges.Browser.contracts.Fomo3D.read("pIDxName_", [JUST.Bridges.Browser.web3.utils.fromAscii(identifier)])
      // console.log(id)
      // if(parseInt(id) != 0){
      // 	window.localStorage.setItem("masternode", {type: "id", value: identifier})
      // 	route('/play')
      // 	return

      // }
    });

    // invalid masternode address
    JUST.route('/play?utm_source=dappradar', async e => {
      // prevent lockup
      route('/9');
    });

    // home
    JUST.route(function() {
      if (!localStorage.getItem('returningVisitor')) {
        localStorage.setItem('returningVisitor', true);
        route('/shakedown');
      } else {
        route('/play');
      }
    });

    /*=====================================
	=            Configuration            =
	=====================================*/

    /**
     * Start the framework
     */
    riot.compile(
      '<state-dev-page><h1>dev</h1><script>\tthis.on(\'mount\', function(){console.log(\'time to develop\')\t})</script>\r\n</state-dev-page>\r\n\r\n<state-loading><center><h1 style="color: white;">Loading...</h1></center>\r\n</state-loading>\r\n\r\n<state-error-notfound><center>\t<h1>Page not found</h1></center>\r\n</state-error-notfound>\r\n\r\n<state-home><h1>Home</h1>\r\n</state-home>\r\n\r\n<module-navbar><div></div>\r\n</module-navbar>\r\n\r\n<state-navbar>\r\n<nav class="navbar navbar-expand-lg navbar-dark bg-dark jumboshade"><div class="container">\t<!-- NOTE: will be replaced by a smexy Logo once Justo makes one -->\t<a class="navbar-brand" style="font-size:1.5rem" href="/shakedown">\tImFomo\t</a>\t<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">\t  <span class="navbar-toggler-icon"></span>\t</button>\t<!-- NOTE: Adjust "active" state accordingly -->\t<div class="collapse navbar-collapse flex-column" id="navbarNav">\t  <ul class="nav nav-pills w-100">' +
        '<li class="nav-item"><div style="min-width: 7rem; color: #fff" class="col-auto nav-link">\t<i class="fas fa-stopwatch"></i> <span class="boxtimer lead small">00:00</span></div></li>' +
        '<li class="nav-item"><div style="color: #fff" class="col-auto yourkeys nav-link"><i class="fas fa-key"></i><span class="lead small keycount">0000</span></div>' +
        '<li class="nav-item"><div style="color: #fff"  class="col-auto airdrop nav-link">  \t<i class="fas fa-parachute-box"></i><span class="airdropcounter lead small">{JUST.Cache.airdropTracker}% ({JUST.Cache.airdropPot} ETH)</span></div></li>' +
        '<li class="nav-item"><div style="color: #fff" class="col-auto mr-auto afflink nav-link">\t<i class="fas fa-link"></i><span class="lead small"><a href="javascript:void(0)" class="buyceo glow">用户名</a></span></div></li>' +
        '</li>\t<li class="nav-item mr-auto"></li>\t<li class="nav-item">\t  <a class="nav-link nav-link-purp" target="_new" href="https://t.me/imfomo">Telegram</a>\t</li><li class="dropdown nav-item"><a class="dropdown-toggle nav-link nav-link-purp" data-toggle="dropdown" href="#">菜单<span class="caret"></span></a><div class="dropdown-menu">' +
      '<a class="dropdown-item dropdown-item" target="_new" href="https://etherscan.io/address/0x7195d7da36069a8b0a5fa5af18d83e50b7f03544#code">合约地址<br></a>' +
      '<a class="dropdown-item dropdown-item" target="_blank" href="tutorial/get_start.pdf">新手指南<br></a>' +
      '<a class="dropdown-item dropdown-item" target="_blank" href="tutorial/tutorial_pc.pdf">pc版教程<br></a>' +
      '<a class="dropdown-item dropdown-item" target="_blank" href="tutorial/pay_with_imtoken.pdf">imtoken版教程<br></a>' +
      '<a class="dropdown-item dropdown-item" target="_blank" href="tutorial/tutorial_mobile.pdf">手机版教程<br></a>' +
      '<a class="dropdown-item dropdown-item" target="_blank" href="tutorial/withdraw.pdf">提取收益<br></a>' +
      '<a class="dropdown-item dropdown-item" target="_blank" href="tutorial/solution_for_unable_to_charge.pdf">无法充值<br></a>' +
      '</div>\t</li>  </ul>\r\n</nav>\r\n</state-navbar>\r\n\r\n<state-p3dnav><nav class="navbar navbar-expand-lg navbar-dark bg-dark jumboshade">\t<div class="container"><a class="navbar-brand nav-link nav-link-gren-shadow" style="font-size:1.5rem" href="/shakedown">PoWH3D</a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">  <span class="navbar-toggler-icon"></span></button><!-- NOTE: Adjust "active" state accordingly --><div class="collapse navbar-collapse flex-column" id="navbarNav">\t  <ul class="nav nav-pills w-100">\r\n\t  \t  <li class="nav-item">\t  <a class="nav-link nav-link-blu-on btn-blu" href="/quick">新模式</a>\t</li>\t<li class="nav-item mr-auto">\t  <a class="nav-link-purp-on nav-link nav-link-purp" href="/play">F3D: Long Con</a>\t</li>\t<li class="nav-item">\t  <a class="nav-link nav-link-gren" target="_new" href="https://discord.gg/DbapvnH">Community</a>\t</li><li class="dropdown nav-item"><a class="dropdown-toggle nav-link nav-link-gren" data-toggle="dropdown" href="#">Misc<span class="caret"></span></a><div class="dropdown-menu">  <a class="dropdown-item dropdown-item" target="_new" href="https://powh3d.hostedwiki.co/">Wiki</a>  <a class="dropdown-item dropdown-item" target="_new" href="https://etherscan.io/address/0xb3775fb83f7d12a36e0475abdd1fca35c091efbe#code">Contract PoWH3D<br></a>  <a class="dropdown-item dropdown-item" target="_new" href="https://powh3d.eu/">Powh3d.Eu (Lots of Fun Stats)</a>  <a class="dropdown-item dropdown-item" href="https://p3d-bot.github.io/FomoOS/256bit">FOMO OS (256bit) Backup </a>  <a class="dropdown-item dropdown-item" href="https://powh.io/shill-kit.html">Shill-kit</a></div>\t</li>  </ul></div>\t</div></nav>\r\n</state-p3dnav>\r\n\r\n<!-- <state-shakedownnav> --><!-- <nav style="background-color:#220622;height:60px;" class=""> -->\t<!-- </nav> -->\r\n<!-- </state-shakedownnav> -->\r\n\r\n<state-stats></state-stats>\r\n\r\n<state-how-to><div class="container" style="margin-top:5.5rem;">\tYou don\'t.</div>\r\n</state-how-to>\r\n\r\n<state-about><div class="container" style="margin-top:5.5rem;">\tMade by Team Just, the just you can trust.</div>\r\n</state-about>\r\n\r\n<state-modal></state-modal>\r\n\r\n<state-bash><div id="terminal" style="visibility: hidden;"><ul id="commandLine">\t<li class="intro">=================================</li>\t<li class="intro">Access to this machine is logged.</li>\t<li class="intro">Misuse is reported.</li>\t<li class="intro">=================================</li>\t<li class="prompt"> <span class="ps1">player@jekyllisland ~ $</span> <input type="text" class="commandInput active">\t</li></ul>\r\n</div>\r\n</state-bash>',
    );

    riot.compile(
      '<state-play>\r\n<script>\r\n/* Initializes Popovers so they only require 1 click\r\nwith love -justo */\r\n$(function () {\r\n\t$(\'[data-toggle="popover"]\').popover();\r\n\t$(\'.checkmark\').popover({\r\ntrigger: "hover"\r\n\t});\r\n})\r\n\r\n\r\nsetTimeout(function() {\r\n$(\'.tutorialArrow\').fadeOut(\'fast\');\r\n}, 20000); // <-- time in milliseconds\r\n</script>\r\n\r\n\t<!-- fomo\t-->\r\n\t<!-- NOTE: Displays the current pot size in ETH as well as time left in current round -->\r\n\t<div class="blurryboy" if={!$this.gracePeriod}></div>\r\n\t<div class="blurryboydark" if={$this.gracePeriod}></div>\r\n\r\n\t<div class="jumbotron rounded-0 text-center text-light teaser-cover" if={!$this.roundHasPassed}>\r\n<!--\r\n<div class="grid-container" if={!$this.gracePeriod}>\r\n\t<div id="hdgraphics" class="grid-top"></div>\r\n</div> -->\r\n<div class="container">\r\n\t<h4 class="display-4 scammed" style="font-style: italic;" if={!$this.playerIsLeader && JUST.Cache.currentRound[8] && JUST.Cache.currentRound[8] !=  "0x0000000000000000000000000000000000000000000000000000000000000000"}>\r\n\t{JUST.Bridges.Browser.web3.utils.toAscii(JUST.Cache.currentRound[8])} </h4>\r\n\t<h4 class="display-4 scammed" style="font-style: italic;" if={!$this.playerIsLeader && JUST.Cache.currentRound[8] && JUST.Cache.currentRound[8] ==  "0x0000000000000000000000000000000000000000000000000000000000000000"}>\r\n\t有个家伙</h4>\r\n\t<h1 class="display-1 scammed" if={!$this.playerIsLeader && !$this.gracePeriod}>要搞事情！</h1>\r\n\t<h1 class="display-1 scammed" if={$this.playerIsLeader && !$this.gracePeriod}>还等什么</h1>\r\n\t<h1 class="display-1 scammed" if={!$this.playerIsLeader && $this.gracePeriod}>ICO FUNDING</h1>\r\n\t<h1 class="display-1 scammed" if={$this.playerIsLeader && $this.gracePeriod}>YOU ARE ICO FUNDING</h1>\r\n\t<h2 class="display-3" if={$this.gracePeriod}><span class="ethglitch titleglow">{BN(JUST.Cache.currentRound[0]).plus(JUST.Cache.currentRound[5]).div(1e18).toFixed(4)} <i class="fab fa-ethereum ethglow"></i></span></h2>\r\n\t<h2 class="display-3" if={!$this.gracePeriod}><span class="ethglitch titleglow">{BN(JUST.Cache.currentRound[5]).div(1e18).toFixed(4)} <i class="fab fa-ethereum ethglow"></i></span> <span class="headtimer">--</span></h2>\r\n \t<h3 if={$this.gracePeriod} class="display-5" style="margin-top:50px;">ICO ends in <span class="headtimer" style="display:inline;font-size:inherit;">--</span></h3>\r\n\r\n\t<!-- <h5 class="display-5" if={!$this.playerIsLeader && !$this.gracePeriod}><a class="titlepopoutrightmini">You\'re</a> going to stop them, right?</h5> -->\r\n\t<!-- <h5 class="display-5" if={!$this.playerIsLeader && !$this.gracePeriod}>{memes.buyButtonMessagePlayer[Math.floor(memes.buyButtonMessagePlayer.length * Math.random()) - 1].replace(/\\$player/g, JUST.Bridges.Browser.web3.utils.toAscii(JUST.Cache.currentRound[8]))}</h5>-->\r\n\t<h5 class="display-5" if={$this.playerIsLeader  && !$this.gracePeriod}>如果没有人购买 key，你就赢得这局收益！</h5>\r\n  \t<!--<a if={$this.gracePeriod} href="javascript:void(0)" class="buyOneTicket btn btn-lg btn-block btn-purp pulse marginb">Participate in the ICO</a> -->\r\n  \t<h4 if={$this.gracePeriod} class="lead">ICO Phase: A short 1 Hour interlude. Sent eth will be rejected; wait for the round to start for the  <a class="titlepopoutrightmini">first</a> and <a class="titlepopoutrightmini">cheapest</a> keys</b> </h4>\r\n\r\n\t\r\n<!-- Button Handling for Buy 1x More;  -->\r\n<!-- This button appears when the player in the lead has a vanity name  -->\r\n<a href="javascript:void(0)" if={!$this.playerIsLeader && !$this.gracePeriod && JUST.Cache.currentRound[8] !=  "0x0000000000000000000000000000000000000000000000000000000000000000"} class="buyOneTicket btn btn-lg btn-block btn-purp pulse marginb">\r\n\t<div class=row>\r\n<div class="col-sm-1.5 no-mobile" style="padding-left: 10px">\r\n 1x <i class="fas fa-key"></i>\r\n</div>\r\n<div class=col-sm-11>\r\n<span style="margin-right: 1rem;margin-left: -1rem" class="only-mobile mobile-text">1x <i class="fas fa-key"></i></span>\r\n{memes.buyButtonMessagePlayer[Math.floor(memes.buyButtonMessagePlayer.length * Math.random()) - 1].replace(/\\$player/g, JUST.Bridges.Browser.web3.utils.toAscii(JUST.Cache.currentRound[8]))}\r\n</div>\r\n\t</div>\r\n</a>\r\n\r\n<!-- This button appears when the player in the lead does not have a vanity name  -->\r\n<a href="javascript:void(0)" if={!$this.playerIsLeader && !$this.gracePeriod && JUST.Cache.currentRound[8] ==  "0x0000000000000000000000000000000000000000000000000000000000000000"} class="buyOneTicket btn btn-lg btn-block btn-purp pulse marginb">\r\n<div class=row>\r\n\t<div class="col-sm-1.5 no-mobile" style="padding-left: 10px">\r\n\t 1x <i class="fas fa-key"></i>\r\n\t</div>\r\n\t<div class=col-sm-11>\r\n\t<span style="margin-right: 1rem;margin-left: -1rem" class="only-mobile mobile-text">1x <i class="fas fa-key"></i></span>\r\n\t{memes.buyButtonMessageAnon[Math.floor(memes.buyButtonMessageAnon.length * Math.random()) - 1].replace(/\\$player/g, JUST.Bridges.Browser.web3.utils.toAscii(JUST.Cache.currentRound[8]))}\r\n\t</div>\r\n</div>\r\n</a>\r\n\r\n</div>\r\n<!--\r\n<div class="grid-container">\r\n\t<div class="grid-bottom"></div>\t\r\n</div>\r\n-->\r\n\t</div>\r\n\t\r\n\t\r\n\t<!-- So and So has EXIT SCAMMED -->\r\n\t<div class="jumbotron rounded-0 text-center text-light teaser-cover marginb" if={$this.roundHasPassed}>\r\n\t<div class="container">\r\n\t\r\n\t\r\n\t<!-- Grouped up into elements w/ conditionals per winner or not winning case -->\r\n<h1 class="display-1 scammed" if={$this.playerIsLeader}>本局结束</h1>\r\n<h1 class="display-1 scammed" if={!$this.playerIsLeader}>本局结束</h1>\r\n\r\n\r\n<!-- Eth Amount -->\r\n<h2 class="display-3"><span class="ethglitch titleglow">{BN(JUST.Cache.currentRound[5]).div(1e18).toFixed(4)} <i class="fab fa-ethereum ethglow"></i></span> <span class="headtimer" if={!$this.playerIsLeader}><a href="javascript:void(0)">{(JUST.Cache.currentRound[8] && JUST.Cache.currentRound[8] !=  "0x0000000000000000000000000000000000000000000000000000000000000000" ? JUST.Bridges.Browser.web3.utils.toAscii(JUST.Cache.currentRound[8]) : JUST.Cache.currentRound[7].substr(0, 10).concat("..."))}</a>抽走收益!</span></h2>\r\n\t\r\n<!-- Custom RNG winner text -->\r\n<h6 class="display-5 scammed" if={!$this.gracePeriod && $this.playerIsLeader}>你获得了将近50%，还能分享剩余的部分</h6>\r\n<h6 class="display-5 scammed" if={$this.gracePeriod && $this.playerIsLeader}>You got about 50%, and shared the rest</h6>\r\n<h6 class="display-5 scammed titlepopoutrightmini" if={$this.playerIsLeader}><i>{memes.exitScamTheft[Math.floor(memes.exitScamTheft.length * Math.random()) - 1]}</i></h6>\r\n\t  \r\n<div style="position: relative;">\r\n  <h3 class="display-5" style="margin-top:50px;"><strong>{BN(JUST.Cache.currentRound[5]).div(10).div(1e18).toFixed(5)}</strong> ETH 在新奖金池里. <span style="font-style: italic;"><a class="titlepopoutrightmini">你</a> 想收了它 <span if={$this.playerIsLeader}>呵...</span>，对吗?</span></h3>\r\n  \r\n \r\n <!-- This button appears when an exit scam has finished, and a new ICO phase needs to start -->\r\n<a href="javascript:void(0)" class=" buyOneTicket btn btn-lg btn-block btn-purp pulse marginb">\r\n\t<div class=row>\r\n\t<div class=col-sm-1.5 style="padding-left: 10px">\r\n\t 1x <i class="fas fa-key"></i>\r\n\t</div>\r\n\t<div class=col-sm-11>\r\n\t开启你的梦幻之旅\r\n\t</div>\r\n\t</div>\r\n</a>\r\n\r\n\r\n</div>\r\n\t  </div>\r\n\t</div>\r\n\t</div>\r\n\t<!-- /fomo -->\r\n\t<div class="container" style="margin-top:-1rem;">\r\n<div class="row cta-ticket" style="margin-top:-5rem;">\r\n\t<div class="col">\r\n<div class="alert alert-purp pulse text-center text-light" role="alert">Buy a key to start a new ICO</div>\r\n\t</div>\r\n</div>\r\n<div class="row" if={$this.gracePeriod}>\r\n\t<div class="col-md-3 no-mobile">\r\n\r\n\t</div>\r\n\t<!-- biddings & vault -->\r\n\t<div class="col-sm">\r\n\r\n<ul class="nav nav-tabs tabs-border-adjust" id="buyTabs" role="tablist">\r\n  <li class="nav-item tab-item">\r\n    <a class="nav-link tab-link active" id="purchaseTab" data-toggle="tab" href="#purchaseArea" role="tab" aria-controls="purchaseArea" aria-selected="true">ICO</a>\r\n  </li>\r\n  <li class="nav-item tab-item">\r\n    <a class="nav-link tab-link" id="vaultTab" data-toggle="tab" href="#vaultArea" role="tab" aria-controls="vaultArea" aria-selected="false">Vault</a>\r\n  </li>\r\n  <li class="nav-item tab-item">\r\n    <a class="nav-link tab-link" id="refTab" data-toggle="tab" href="#refArea" role="tab" aria-controls="refArea" aria-selected="false">Vanity &amp; Referrals</a>\r\n  </li>\r\n</ul>\r\n<div class="tab-content" id="buyArea">\r\n<!-- biddings -->\r\n<div class="tab-pane fade show active" id="purchaseArea" role="tabpanel" aria-labelledby="purchaseArea">\r\n\t<div class="jumbotron jumbotron-adjust text-light bg-dark jumboshade tab-rounded">\r\n<div class="row">\r\n\t<div class="col">\r\n<p class="lead nomarginb">Initial Con Offering</p>\r\n\t</div>\r\n\t<div class="col-auto">\r\n<p class="text-right nomarginb tutorial">\r\n\t<i class="fas fa-arrow-right pulsetutorial tutorialArrow"></i>\r\n\t<a tabindex="0" type="button" class="qbtn" role="button" data-toggle="popover" data-trigger="focus" data-html="true" data-placement="bottom" title="juster maek fun text pls" data-content="{popover.ico}">\r\n\t<i class="far fa-question-circle"></i>\r\n\t</a>\r\n</p>\r\n\t</div>\r\n</div>\r\n<hr>\r\n<!-- ICO Purchase -->\r\n<div class="row">\r\n<div class="col text-center">\r\n<p class="small">You do want a share of the scheme, right?</p>\r\n\t</div>\r\n</div>\r\n<div class="row marginb">\r\n  <div class="col">\r\n\t<div id="purchase" class="tab-pane fade show active" role="tabpanel">\r\n\t<div class="row" id="purchase">\r\n\t  <div class="col">\r\n<div class="input-group mb-3">\r\n  <div class="input-group-prepend">\r\n\t<span class="input-group-text">\r\n\t  <i class="fab fa-ethereum"></i>\r\n\t</span>\r\n  </div>\r\n  <input type="text" id="ethToSpend" class="form-control text-center" value="0.01 ETH">\r\n</div>\r\n\t  </div>\r\n\t</div>\r\n\t<div class="row" style="position: relative;">\r\n\t  <div class="col">\r\n<button type="button" id="ethSpend" class="btn btn-block btn-purp btn-lg ticketProcess"><i class="fab fa-ethereum"></i>用ETH兑换</button>\r\n\t  </div>\r\n\t  <div class="col">\r\n<button type="button" id="ethReinvest" class="btn btn-block btn-outline-purp btn-lg ticketProcess"><i class="fas fa-piggy-bank"></i> 使用收益</button>\r\n\t  </div>\r\n\t</div>\r\n  </div>\r\n  </div>\r\n</div>\r\n<hr>\r\n<div class="row marginb">\r\n\t<div class="col">\r\n<p class="lead nomarginb">Choose a Team</p>\r\n\t</div>\r\n\t<div class="col-auto">\r\n<p class="text-right nomarginb tutorial">\r\n<i class="fas fa-arrow-right pulsetutorial tutorialArrow"></i>\r\n\t<a tabindex="0" type="button" class="qbtn" role="button" data-toggle="popover" data-trigger="focus" data-html="true" data-placement="bottom" title="Pick where the Eth Goes!" data-content="{popover.teamselect}"><i class="far fa-question-circle"></i></a></p>\r\n\t</div>\r\n</div>\t\r\n<div class="row marginb distribution">\r\n\t<div class="col">\r\n<div class="row">\r\n\t<div class="col-3 team">\r\n<label class="teamselector">\r\n\t<input class="form-check-input form-radio teamsave" type="radio" autocomplete="off" name="teamselect" value="2" id="teamsnek">\r\n\t<img src="/img/tsnek.png" alt="">\r\n\t<h5>Snek</h5>\r\n\t<p>Trickle down Divinomics</p>\r\n</label>\r\n<div>\r\n<p style="color:#2ecc71">++ Most dividends</p>\r\n</div>\r\n\t</div>\r\n\t<div class="col-3 team">\r\n<label class="teamselector">\r\n\t<input class="form-check-input form-radio teamsave" type="radio" autocomplete="off" name="teamselect" value="0" id="teamwhale">\r\n\t<img src="/img/twhale.png" alt="">\r\n\t<h5>Whale</h5>\r\n\t<p>Feed on the greed of others.</p>\r\n</label>\r\n<p style="color:#2ecc71">++ Most eth to pot</p>\r\n\t</div>\r\n\t<div class="col-3 team">\r\n<label class="teamselector">\r\n\t<input class="form-check-input form-radio teamsave" type="radio" autocomplete="off" name="teamselect" value="3" id="teambull">\r\n\t<img src="/img/tbull.png" alt="">\r\n\t<h5>Bull</h5>\r\n\t<p>Break upwards, never stagnate.</p>\r\n</label>\r\n<p style="color:#2ecc71">+ Balanced distribution</p>\r\n\r\n\t</div>\r\n\t<div class="col-3 team">\r\n<label class="teamselector">\r\n\t<input class="form-check-input form-radio teamsave" type="radio" autocomplete="off" name="teamselect" value="1" id="teambear">\r\n\t<img src="/img/tbear.png" alt="">\r\n\t<h5>Bear</h5>\r\n\t<p>Stand alone, fight alone.</p>\r\n</label>\r\n<p style="color:#2ecc71">++ Maximize eth to current round</p>\r\n\t</div>\r\n</div>\r\n<div class="row">\r\n\t<div class="col">\r\n<div class="chart"></div>\r\n\t</div>\r\n</div>\r\n\t</div>\r\n</div>\r\n\r\n\t<!--<p class="small text-center">Your purchase will extend the game by a total of <span class="extender">NaN</span> Minutes.</p> -->\t\r\n\t</div>\r\n</div>\r\n<!-- /biddings -->\t\r\n<!-- vault -->\r\n<div class="tab-pane fade" id="vaultArea" role="tabpanel" aria-labelledby="vaultArea">\r\n\t<div class="jumbotron jumbotron-adjust text-light bg-dark jumboshade tab-rounded">\r\n<div class="row">\r\n  <div class="col">\r\n\t<p class="lead nomarginb">Vault</p>\r\n  </div>\r\n  <div class="col-auto">\r\n\t<p class="text-right nomarginb tutorial">\r\n<i class="fas fa-arrow-right pulsetutorial tutorialArrow"></i>\r\n\t<a tabindex="0" type="button" class="qbtn" role="button" data-toggle="popover" data-trigger="focus" data-html="true" data-placement="bottom" title="Vault 77: Where you keep the puppets" data-content="{popover.vault}">\r\n\t<i class="far fa-question-circle"></i>\r\n\t</a>\r\n  </div>\r\n</div>\r\n<hr>\r\n<div class="jumbotron jumbotron-adjust teamscore">\r\n<!--  <div class="row">\r\n\t<div class="col">\r\n\t  <p class="lead">Winning Pot (Unused)</p>\r\n\t</div>\r\n\t<div class="col">\r\n\t  <p class="h3 text-right">{(JUST.Bridges.Metamask && JUST.Bridges.Metamask.signedIn && JUST.Cache.currentPlayer && JUST.Cache.currentPlayer.Vaults) ? BN(JUST.Cache.currentPlayer.Vaults[0]).div(1e18).toFixed(4) : BN(0).toFixed(4)} ETH</p>\r\n\t</div>\r\n  </div> -->\r\n  <div class="row">\r\n\t<div class="col">\r\n\t  <p class="lead">Exit Scammed</p>\r\n\t</div>\r\n\t<div class="col">\r\n\t  <p class="h3 text-right">{(JUST.Bridges.Metamask && JUST.Bridges.Metamask.signedIn && JUST.Cache.currentPlayer && JUST.Cache.currentPlayer.Vaults) ? BN(JUST.Cache.currentPlayer.Vaults[1]).plus(JUST.Cache.currentPlayer.Vaults[0]).div(1e18).toFixed(4) : BN(0).toFixed(4)} ETH</p>\r\n\t</div>\r\n  </div>\r\n  <div class="row">\r\n\t<div class="col">\r\n\t  <p class="lead">邀请奖励</p>\r\n\t</div>\r\n\t<div class="col">\r\n\t  <p class="h3 text-right">{(JUST.Bridges.Metamask && JUST.Bridges.Metamask.signedIn && JUST.Cache.currentPlayer && JUST.Cache.currentPlayer.Vaults) ? BN(JUST.Cache.currentPlayer.Vaults[2]).div(1e18).toFixed(4) : BN(0).toFixed(4)} ETH</p>\r\n\t</div>\r\n  </div>\r\n  <hr>\r\n  <div class="row">\r\n\t<div class="col">\r\n\t  <p class="lead">总收益</p>\r\n\t</div>\r\n\t<div class="col">\r\n\t  <p class="h3 text-right glow">{(JUST.Bridges.Metamask && JUST.Bridges.Metamask.signedIn && JUST.Cache.currentPlayer && JUST.Cache.currentPlayer.Vaults) ? BN(JUST.Cache.currentPlayer.Vaults[0]).plus(JUST.Cache.currentPlayer.Vaults[1]).plus(JUST.Cache.currentPlayer.Vaults[2]).div(1e18).toFixed(4) : BN(0).toFixed(4)} ETH</p>\r\n\t  <p class="text-right">&#8793; {BN(JUST.Cache.currentPlayer.Vaults[0]).plus(JUST.Cache.currentPlayer.Vaults[1]).plus(JUST.Cache.currentPlayer.Vaults[2]).div(1e18).multipliedBy(JUST.Cache.fiatRatios.USD).toFixed(5)} USDT</p>\r\n\t</div>\r\n  </div>\r\n  <div class="row">\r\n\t<div class="col">\r\n<p class="text-right nomarginb"><button href="" class="btn btn-outline-purp btn-block" id="withdrawEarnings"><i class="fas fa-hand-holding-heart"></i> 提款</button></p>\r\n\t</div>\r\n  </div>\r\n</div>\r\n\t</div>\r\n</div>\r\n<!-- /vault -->\r\n\r\n<!-- vanity -->\r\n<div class="tab-pane fade" id="refArea" role="tabpanel" aria-labelledby="refArea">\r\n\t<div class="jumbotron jumbotron-adjust text-light bg-dark jumboshade tab-rounded">\r\n<div class="row">\r\n  <div class="col">\r\n\t<p class="lead nomarginb">Advisory Board</p>\r\n  </div>\r\n  <div class="col-auto">\r\n\t<p class="text-right nomarginb tutorial">\r\n<i class="fas fa-arrow-right pulsetutorial tutorialArrow"></i>\r\n\t<a tabindex="0" type="button" class="qbtn" role="button" data-toggle="popover" data-trigger="focus" data-html="true" data-placement="bottom" title="Probably Bribery" data-content="{popover.referral}">\r\n\t<i class="far fa-question-circle"></i>\r\n\t</a>\r\n  </div>\r\n</div>\r\n<hr>\r\n<div class="jumbotron jumbotron-adjust teamscore">\r\n\t<div class="row" if={!$this.isCEO}>\r\n<div class="col">\r\n<p>Register a unique name, and unlock the referral system permanently.</p>\r\n</div>\r\n\t</div>\r\n\t<div class="row" if={!$this.isCEO}>\r\n<div class="col">\r\n\t<button href="" class="btn btn-purp btn-block buyceo"><i class="fas fa-check"></i> Register a name to use on the Leaderboard/Referrals</button>\r\n</div>\r\n\t  </div>\r\n\t<div class="row" if={$this.isCEO}>\r\n<div class="col">\r\n\t<p class="font-weight-light">通过链接邀请其他人购买key，可以得到所花费ETH 15%的分成。</p>\r\n</div>\r\n\t</div>\r\n\t<div class="row" if={$this.isCEO}>\r\n<div class="col text-center">\r\n\t<p>\r\n<span>钱包地址推荐</span><br>\r\n<span class="small" id="ceolink">{$this.myLink}</span><br>\r\n<button class="btn btn-outline-purp" id="copyCeoLink" data-clipboard-target="#ceolink"}>\r\n<i class="fas fa-paste"></i> 复制</button>\r\n\t</p>\r\n\t<p>\r\n<span>匿名推荐</span><br>\r\n<span class="small" id="ceolinkid">{$this.myLinkid}</span><br>\r\n<button class="btn btn-outline-purp" id="copyCeoLink" data-clipboard-target="#ceolinkid"}>\r\n<i class="fas fa-paste"></i> Copy</button>\r\n\r\n\t</p>\r\n\t<p>\r\n<span>用户名推荐</span><br>\r\n<span class="small" id="ceolinkvanity">{$this.myLinkName}</span><br>\r\n<button class="btn btn-outline-purp" id="copyCeoLink" data-clipboard-target="#ceolinkvanity"}>\r\n<i class="fas fa-paste"></i> 复制</button>\r\n\t</p>\r\n</div>\r\n\t</div>\r\n\t<div class="row" if={$this.isCEO}>\r\n<div class="col">\r\n\t<button href="" class="btn btn-outline-purp btn-block buyceo"><i class="fas fa-check"></i> 注册一个新推荐名</button>\r\n</div>\r\n\t</div>\r\n</div>\r\n\t</div>\r\n</div>\r\n\t</div>\r\n</div>\r\n\t<!-- /vanity -->\r\n<div class="col-md-3 no-mobile">\r\n\r\n</div>\t\r\n</div>\r\n<div class="row" if={!$this.gracePeriod}>\r\n\t<!-- biddings & vault -->\r\n\t<div class="col-sm">\r\n\r\n<ul class="nav nav-tabs tabs-border-adjust" id="buyTabs" role="tablist">\r\n  <li class="nav-item tab-item">\r\n    <a class="nav-link tab-link active" id="purchaseTab" data-toggle="tab" href="#purchaseArea" role="tab" aria-controls="purchaseArea" aria-selected="true">购买</a>\r\n  </li>\r\n  <li class="nav-item tab-item">\r\n    <a class="nav-link tab-link" id="vaultTab" data-toggle="tab" href="#vaultArea" role="tab" aria-controls="vaultArea" aria-selected="false">奖励</a>\r\n  </li>\r\n  <li class="nav-item tab-item">\r\n    <a class="nav-link tab-link" id="refTab" data-toggle="tab" href="#refArea" role="tab" aria-controls="refArea" aria-selected="false">邀请链接</a>\r\n  </li>\r\n</ul>\r\n<div class="tab-content" id="buyArea">\r\n<!-- biddings -->\r\n<div class="tab-pane fade show active" id="purchaseArea" role="tabpanel" aria-labelledby="purchaseArea">\r\n\t<div class="jumbotron jumbotron-adjust text-light bg-dark jumboshade tab-rounded">\r\n<div class="row">\r\n\t<div class="col" if={!$this.roundHasPassed}>\r\n<p class="lead nomarginb">Keyring</p>\r\n\t</div>\r\n\t<div class="col" if={$this.roundHasPassed}>\r\n<p class="lead nomarginb">预 ICO 阶段</p>\r\n\t</div>\r\n\t<div class="col-auto">\r\n<p class="text-right nomarginb tutorial">\r\n\t<i class="fas fa-arrow-right pulsetutorial tutorialArrow"></i>\r\n\t<a tabindex="0" type="button" class="qbtn" role="button" data-toggle="popover" data-trigger="focus" data-html="true" data-placement="bottom" title="Exit Scams and You!" data-content="{popover.purchase}">\r\n\t<i class="far fa-question-circle"></i>\r\n\t</a>\r\n</p>\r\n\t</div>\r\n</div>\r\n<hr>\r\n<!-- Ticket Purchase -->\r\n<!-- NOTE: Ticket purchase should update the ETH value to how much is actually going to be paid by the player, as well as update the time limit extension (NaN Minutes) accordingly -->\r\n<div class="row">\r\n  <div class="col">\r\n\t<div id="purchase" class="tab-pane fade show active" role="tabpanel">\r\n' +
        '<p class="font-weight-light small" if={!$this.roundHasPassed} id ="airdrop_chance">' +
        '购买或超过 0.1 个 ETH 有 {JUST.Cache.airdropTracker}% 的机会立即赢得 {JUST.Cache.airdropPot} ETH 空投奖励!' +
        '</p>\r\n\t<p class="text-center" if={$this.roundHasPassed}>发送以太开启下一局ICO</p>\r\n\t<div class="row" id="purchase" if={!$this.roundHasPassed}>\r\n\t  <div class="col">\r\n<div class="input-group mb-3">\r\n  <div class="input-group-prepend">\r\n\t<span class="input-group-text">\r\n\t  <i class="fas fa-key"></i>\r\n\t</span>\r\n  </div>\r\n  <input type="text" id="tixToBuy" class="form-control text-center" value="1 Key">\r\n  <div class="input-group-append">\r\n\t<span class="input-group-text" id="tixQuotation">\r\n\t  @ {BN(JUST.Cache.currentRound[3]).div(1e18).toFixed(8)} ETH\r\n\t</span>\r\n  </div>\r\n</div>\r\n\t  </div>\r\n\t</div>\r\n\t<div class="row" if={$this.roundHasPassed}>\r\n<div class="col">\r\n\t<div id="purchase" class="tab-pane fade show active" role="tabpanel">\r\n<div class="row" id="purchase">\r\n  <div class="col">\r\n\t<div class="input-group mb-3">\r\n\t  <div class="input-group-prepend">\r\n<span class="input-group-text">\r\n  <i class="fab fa-ethereum"></i>\r\n</span>\r\n\t  </div>\r\n\t  <input type="text" id="ethToSpend" class="form-control text-center" value="0.01 ETH">\r\n\t</div>\r\n  </div>\r\n</div>\r\n\t</div>\r\n</div>\r\n\t</div>\r\n\t<div class="row marginb" if={!$this.roundHasPassed}>\r\n\t  <div class="col">\r\n<div class="btn-group d-flex" role="group">\r\n  <button id="addOne" class="btn btn-outline-yel w-100 increment">+ 1 Key</button>\r\n  <button id="addTwo" class="btn btn-outline-yel w-100 increment">+ 2 Keys</button>\r\n  <button id="addFive" class="btn btn-outline-yel w-40 increment">+ 5</button>\r\n  <button id="addTen" class="btn btn-outline-yel w-30 increment">+ 10</button>\r\n  <button id="addHundred" class="btn btn-outline-yel w-30 increment">+ 100</button>\r\n</div>\r\n\t  </div>\r\n\t</div>\r\n\t<div class="row" style="position: relative;"  if={!$this.roundHasPassed}>\r\n\t  <div class="col">\r\n<button type="button" id="tixBuy" class="btn btn-block btn-purp btn-lg ticketProcess"><i class="fab fa-ethereum"></i>用ETH兑换</button>\r\n\t  </div>\r\n\t  <div class="col">\r\n<button type="button" id="tixReinvest" class="btn btn-block btn-outline-purp btn-lg ticketProcess"><i class="fas fa-piggy-bank"></i>收益购买</button>\r\n\t  </div>\r\n\t</div>\r\n\t<div class="row" style="position: relative;"  if={$this.roundHasPassed}>\r\n\t  <div class="col">\r\n<button type="button" id="ethSpend" class="btn btn-block btn-purp btn-lg ticketProcess"><i class="fab fa-ethereum"></i> 用ETH兑换</button>\r\n\t  </div>\r\n\t  <div class="col">\r\n<button type="button" id="ethReinvest" class="btn btn-block btn-outline-purp btn-lg ticketProcess"><i class="fas fa-piggy-bank"></i> 使用收益</button>\r\n\t  </div>\r\n\t</div>\r\n<p style=\'padding: 10px 0 0\' class="small text-center" if={!$this.gracePeriod}>用ETH兑换，或者用你的收益购买</p>\r\n  </div>\r\n  </div>\r\n</div>\r\n<!-- Team Selector -->\r\n<hr>\r\n<div class="row marginb">\r\n\t<div class="col">\r\n<p class="lead nomarginb">选择队伍</p>\r\n\t</div>\r\n\t<div class="col-auto">\r\n<p class="text-right nomarginb tutorial">\r\n<i class="fas fa-arrow-right pulsetutorial tutorialArrow"></i>\r\n\t<a tabindex="0" type="button" class="qbtn" role="button" data-toggle="popover" data-trigger="focus" data-html="true" data-placement="bottom" title="Pick where the Eth Goes!" data-content="{popover.teamselect}"><i class="far fa-question-circle"></i></a></p>\r\n\t</div>\r\n</div>\t\r\n<div class="row marginb distribution">\r\n\t<div class="col">\r\n<div class="row">\r\n\t<div class="col-3 team">\r\n<label class="teamselector">\r\n\t<input class="form-check-input form-radio teamsave" type="radio" autocomplete="off" name="teamselect" value="2" id="teamsnek">\r\n\t<img src="/img/tsnek.png" alt="">\r\n\t<h5>玩蛇队</h5>\r\n\t<p>选我，你就是在玩蛇</p>\r\n</label>\r\n<div>\r\n<p style="color:#2ecc71">分红最快 快速回本</p>\r\n</div>\r\n\t</div>\r\n\t<div class="col-3 team">\r\n<label class="teamselector">\r\n\t<input class="form-check-input form-radio teamsave" type="radio" autocomplete="off" name="teamselect" value="0" id="teamwhale">\r\n\t<img src="/img/twhale.png" alt="">\r\n\t<h5>蓝鲸队</h5>\r\n\t<p>我将吞噬你们</p>\r\n</label>\r\n<p style="color:#2ecc71">最终奖池 比例最高</p>\r\n\t</div>\r\n\t<div class="col-3 team">\r\n<label class="teamselector">\r\n\t<input class="form-check-input form-radio teamsave" type="radio" autocomplete="off" name="teamselect" value="3" id="teambull">\r\n\t<img src="/img/tbull.png" alt="">\r\n\t<h5>小牛队</h5>\r\n\t<p>向上突破，永不停滞</p>\r\n</label>\r\n<p style="color:#2ecc71">最终分红 比例最多</p>\r\n\r\n\t</div>\r\n\t<div class="col-3 team">\r\n<label class="teamselector">\r\n\t<input class="form-check-input form-radio teamsave" type="radio" autocomplete="off" name="teamselect" value="1" id="teambear">\r\n\t<img src="/img/tbear.png" alt="">\r\n\t<h5>懒熊队</h5>\r\n\t<p>独自战斗</p>\r\n</label>\r\n<p style="color:#2ecc71">所有奖励 均衡分配</p>\r\n\t</div>\r\n</div>\r\n<div class="row">\r\n\t<div class="col">\r\n<div class="chart"></div>\r\n\t</div>\r\n</div>\r\n\t</div>\r\n</div>\r\n<!-- /Team Selector -->\r\n\t<!--<p class="small text-center">Your purchase will extend the game by a total of <span class="extender">NaN</span> Minutes.</p> -->\t\r\n\t</div>\r\n</div>\r\n<!-- /biddings -->\t\r\n<!-- vault -->\r\n<div class="tab-pane fade" id="vaultArea" role="tabpanel" aria-labelledby="vaultArea">\r\n\t<div class="jumbotron jumbotron-adjust text-light bg-dark jumboshade tab-rounded">\r\n<div class="row">\r\n  <div class="col">\r\n\t<p class="lead nomarginb">收益</p>\r\n  </div>\r\n  <div class="col-auto">\r\n\t<p class="text-right nomarginb tutorial">\r\n<i class="fas fa-arrow-right pulsetutorial tutorialArrow"></i>\r\n\t<a tabindex="0" type="button" class="qbtn" role="button" data-toggle="popover" data-trigger="focus" data-html="true" data-placement="bottom" title="Vault 77: Where you keep the puppets" data-content="{popover.vault}">\r\n\t<i class="far fa-question-circle"></i>\r\n\t</a>\r\n  </div>\r\n</div>\r\n<hr>\r\n<div class="jumbotron jumbotron-adjust teamscore">\r\n<!--  <div class="row">\r\n\t<div class="col">\r\n\t  <p class="lead">Winning Pot (Unused)</p>\r\n\t</div>\r\n\t<div class="col">\r\n\t  <p class="h3 text-right">{(JUST.Bridges.Metamask && JUST.Bridges.Metamask.signedIn && JUST.Cache.currentPlayer && JUST.Cache.currentPlayer.Vaults) ? BN(JUST.Cache.currentPlayer.Vaults[0]).div(1e18).toFixed(4) : BN(0).toFixed(4)} ETH</p>\r\n\t</div>\r\n  </div> -->\r\n  \r\n\t<div class="row">\r\n\t<div class="col">\r\n\t  <p class="lead">战队分红（锁定）</p>\r\n\t</div>\r\n\t<div class="col">\r\n\t<!--\r\n\t  <p class="h6 text-right" style="font-size: .9rem">{(JUST.Bridges.Metamask && JUST.Bridges.Metamask.signedIn) ? ((BN(JUST.Cache.currentPlayer.Round[2]).div(1e18).toFixed(1) : BN(0).toFixed(4)).div(BN(JUST.Cache.currentRound[2]).div(1e18).toFixed(0))).mul((BN(JUST.Cache.currentRound[5]).div(1e18).toFixed(4).div(100)).mul(30))}</p>\r\n\t  -->\r\n\t  <p class="h3 text-right" label=poteth>{(JUST.Bridges.Metamask && JUST.Bridges.Metamask.signedIn) ? (((BN(JUST.Cache.currentRound[5]).div(100).multipliedBy(30)).div(BN(JUST.Cache.currentRound[2]))).multipliedBy(BN(JUST.Cache.currentPlayer.Round[2])).div(1e18).toFixed(4)) : BN(0).toFixed(4)} ETH</p>\r\n\t</div>\r\n  </div>\r\n\r\n  <div class="row">\r\n\t<div class="col">\r\n\t  <p class="lead">个人分红</p>\r\n\t</div>\r\n\t<div class="col">\r\n\t  <p class="h3 text-right">{(JUST.Bridges.Metamask && JUST.Bridges.Metamask.signedIn && JUST.Cache.currentPlayer && JUST.Cache.currentPlayer.Vaults) ? BN(JUST.Cache.currentPlayer.Vaults[1]).plus(JUST.Cache.currentPlayer.Vaults[0]).div(1e18).toFixed(4) : BN(0).toFixed(4)} ETH</p>\r\n\t</div>\r\n  </div>\r\n  \r\n  <div class="row">\r\n\t<div class="col">\r\n\t  <p class="lead">邀请奖励</p>\r\n\t</div>\r\n\t<div class="col">\r\n\t  <p class="h3 text-right">{(JUST.Bridges.Metamask && JUST.Bridges.Metamask.signedIn && JUST.Cache.currentPlayer && JUST.Cache.currentPlayer.Vaults) ? BN(JUST.Cache.currentPlayer.Vaults[2]).div(1e18).toFixed(4) : BN(0).toFixed(4)} ETH</p>\r\n\t</div>\r\n  </div>\r\n  \r\n  <hr>\r\n  <div class="row">\r\n\t<div class="col">\r\n\t  <p class="lead">总收益</p>\r\n\t</div>\r\n\t<div class="col">\r\n\t  <p class="h3 text-right glow">{(JUST.Bridges.Metamask && JUST.Bridges.Metamask.signedIn && JUST.Cache.currentPlayer && JUST.Cache.currentPlayer.Vaults) ? BN(JUST.Cache.currentPlayer.Vaults[0]).plus(JUST.Cache.currentPlayer.Vaults[1]).plus(JUST.Cache.currentPlayer.Vaults[2]).div(1e18).toFixed(4) : BN(0).toFixed(4)} ETH</p>\r\n\t  <p class="text-right">&#8793; {BN(JUST.Cache.currentPlayer.Vaults[0]).plus(JUST.Cache.currentPlayer.Vaults[1]).plus(JUST.Cache.currentPlayer.Vaults[2]).div(1e18).multipliedBy(JUST.Cache.fiatRatios.USD).toFixed(5)} USDT</p>\r\n\t</div>\r\n  </div>\r\n  \r\n  <div class="row">\r\n\t<div class="col">\r\n<p class="text-right nomarginb"><button href="" class="btn btn-outline-purp btn-block" id="withdrawEarnings"><i class="fas fa-hand-holding-heart"></i> 提款</button></p>\r\n\t</div>\r\n  </div>\r\n</div>\r\n\t</div>\r\n</div>\r\n<!-- /vault -->\r\n\r\n<!-- vanity -->\r\n<div class="tab-pane fade" id="refArea" role="tabpanel" aria-labelledby="refArea">\r\n\t<div class="jumbotron jumbotron-adjust text-light bg-dark jumboshade tab-rounded">\r\n<div class="row">\r\n  <div class="col">\r\n\t<p class="lead nomarginb">咨询委员会</p>\r\n  </div>\r\n  <div class="col-auto">\r\n\t<p class="text-right nomarginb tutorial">\r\n<i class="fas fa-arrow-right pulsetutorial tutorialArrow"></i>\r\n\t<a tabindex="0" type="button" class="qbtn" role="button" data-toggle="popover" data-trigger="focus" data-html="true" data-placement="bottom" title="Probably Bribery" data-content="{popover.referral}">\r\n\t<i class="far fa-question-circle"></i>\r\n\t</a>\r\n  </div>\r\n</div>\r\n<hr>\r\n<div class="jumbotron jumbotron-adjust teamscore">\r\n\t<div class="row" if={!$this.isCEO}>\r\n<div class="col">\r\n<p>注册唯一用户名，永久解锁邀请奖励系统。</p>\r\n</div>\r\n\t</div>\r\n\t<div class="row" if={!$this.isCEO}>\r\n<div class="col">\r\n\t<button href="" class="btn btn-purp btn-block buyceo"><i class="fas fa-check"></i> 注册用户名开启上方通知和邀请奖励系统</button>\r\n</div>\r\n\t  </div>\r\n\t<div class="row" if={$this.isCEO}>\r\n<div class="col">\r\n\t<p class="font-weight-light">通过链接邀请其他人购买key，可以得到所花费ETH 15%的分成。</p>\r\n</div>\r\n\t</div>\r\n\t<div class="row" if={$this.isCEO}>\r\n<div class="col text-center">\r\n\t<p>\r\n<span>钱包地址推荐</span><br>\r\n<span class="small" id="ceolink">{$this.myLink}</span><br>\r\n<button class="btn btn-outline-purp" id="copyCeoLink" data-clipboard-target="#ceolink"}>\r\n<i class="fas fa-paste"></i> 复制</button>\r\n\t</p>\r\n\t<p>\r\n<span>匿名推荐</span><br>\r\n<span class="small" id="ceolinkid">{$this.myLinkid}</span><br>\r\n<button class="btn btn-outline-purp" id="copyCeoLink" data-clipboard-target="#ceolinkid"}>\r\n<i class="fas fa-paste"></i> 复制</button>\r\n\r\n\t</p>\r\n\t<p>\r\n<span>用户名推荐</span><br>\r\n<span class="small" id="ceolinkvanity">{$this.myLinkName}</span><br>\r\n<button class="btn btn-outline-purp" id="copyCeoLink" data-clipboard-target="#ceolinkvanity"}>\r\n<i class="fas fa-paste"></i> 复制</button>\r\n\t</p>\r\n</div>\r\n\t</div>\r\n\t<div class="row" if={$this.isCEO}>\r\n<div class="col">\r\n\t<button href="" class="btn btn-outline-purp btn-block buyceo"><i class="fas fa-check"></i> 注册一个新推荐名</button>\r\n</div>\r\n\t</div>\r\n</div>\r\n\t</div>\r\n</div>\r\n<!-- /vanity -->\r\n</div>\r\n\t</div>\r\n\r\n\t<!-- stat tabs -->\r\n\t<div class="col-sm">\r\n<!-- tabs -->\r\n<ul class="nav nav-tabs tabs-border-adjust" id="statTabs" role="tablist">\r\n  <li class="nav-item tab-item">\r\n    <a class="nav-link tab-link active" id="potTab" data-toggle="tab" href="#potArea" role="tab" aria-controls="potArea" aria-selected="true">局</a>\r\n  </li>\r\n  <li class="nav-item tab-item">\r\n    <a class="nav-link tab-link" id="teamTab" data-toggle="tab" href="#teamArea" role="tab" aria-controls="teamArea" aria-selected="false">队伍</a>\r\n  </li>\r\n  <li class="nav-item tab-item">\r\n    <a class="nav-link tab-link" id="playerTab" data-toggle="tab" href="#playerArea" role="tab" aria-controls="playerArea" aria-selected="false">最近玩家</a>\r\n  </li>\r\n  <li class="nav-item tab-item">\r\n    <a class="nav-link tab-link" id="statsTab" data-toggle="tab" href="#statsArea" role="tab" aria-controls="statsArea" aria-selected="false">总览</a>\r\n  </li>\r\n</ul>\r\n\r\n<!-- tabbable areas -->\r\n<div class="tab-content" id="statArea">\r\n\t<!-- current pot -->\r\n\t<div class="tab-pane fade show active" id="potArea" role="tabpanel" aria-labelledby="potArea">\r\n\r\n<div class="jumbotron jumbotron-adjust text-light bg-dark jumboshade tab-rounded">\r\n\t<div class="row">\r\n\t  <div class="col">\r\n<p class="lead nomarginb">第 {JUST.Cache.currentRound[1]} 局</p>\r\n\t  </div>\r\n\t  <div class="col-auto">\r\n<p class="text-right nomarginb tutorial">\r\n\t<i class="fas fa-arrow-right pulsetutorial tutorialArrow"></i>\r\n<a tabindex="0" type="button" class="qbtn" role="button" data-toggle="popover" data-trigger="focus" data-html="true" data-placement="bottom" title="Important Box:" data-content="{popover.game}">\r\n<i class="far fa-question-circle"></i>\r\n</a>\r\n\t  </div>\r\n\t</div>\r\n\t<hr>\r\n\t<div class="row nomarginb margin-top" if={!$this.roundHasPassed}>\r\n<div class="col">\r\n\t<!-- NOTE: Time limit counter -->\r\n\t<p class="h2 text-center" if={this.playerIsLeader}>本局结束还有 <br><span class="glow boxtimer"></span></p>\r\n\t<p class="h2 text-center" if={!this.playerIsLeader}>本轮合约倒计时 <br><span class="glow boxtimer"></span></p>\r\n</div>\r\n\t</div>\r\n\t<div class="row nomarginb margin-top" if={$this.roundHasPassed}>\r\n<div class="col" style="position: relative;">\r\n\t<!-- NOTE: Time limit counter -->\r\n\t<p class="h6 text-center">ETH 大奖在上面，就问你要不要</p>\r\n\t  <a style="margin-bottom:40px;" href="javascript:void(0)" class="buyOneTicket btn btn-lg btn-block btn-purp pulse"> 购买一个 <i class="fas fa-key"></i> 你就算是战队统领了</a>\r\n</div>\r\n\t</div>\r\n\t<div class="row marginb" if={!$this.roundHasPassed}>\r\n<div class="col">\r\n\t<div class="progress">\r\n<div class="progress-bar boxglow" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>\r\n\t</div>\r\n</div>\r\n\t</div>\r\n\t<div class="jumbotron jumbotron-adjust teamscore">\r\n<div class="row nomarginb">\r\n\t<div class="col-auto">\r\n<p class="h4" if={!$this.roundHasPassed}>奖池</p>\r\n<p class="h4" if={$this.roundHasPassed}>未分配利润</p>\r\n\t</div>\r\n\t<div class="col">\r\n<!-- NOTE: Display of current pot size as well as converted USDT value -->\r\n<p class="h2 text-right glow ethglitch" if={!$this.roundHasPassed}>{BN(JUST.Cache.currentRound[5]).div(1e18).toFormat(2)} <i class="fab fa-ethereum ethglow"></i></p>\r\n<p class="h2 text-right glow ethglitch" if={$this.roundHasPassed}>{BN(JUST.Cache.currentRound[5]).div(1e19).toFormat(5)} <i class="fab fa-ethereum ethglow"></i></p>\r\n\t</div>\r\n</div>\r\n<div class="row marginb">\r\n\t<div class="col text-right"  if={!$this.roundHasPassed}>&#8793; {BN(JUST.Cache.currentRound[5]).div(1e18).multipliedBy(JUST.Cache.fiatRatios.USD).toFormat(5)} USDT</div>\r\n\t<div class="col text-right"  if={$this.roundHasPassed}>&#8793; {BN(JUST.Cache.currentRound[5]).div(1e19).multipliedBy(JUST.Cache.fiatRatios.USD).toFormat(5)} USDT</div>\r\n</div>\r\n<div class="row nomarginb"  if={!$this.roundHasPassed}>\r\n\t<div class="col">\r\n\t  <p class="h4">key数量</p>\r\n\t</div>\r\n\t<div class="col">\r\n\t  <p class="h2 text-right">{(JUST.Bridges.Metamask && JUST.Bridges.Metamask.signedIn) ? BN(JUST.Cache.currentPlayer.Round[2]).div(1e18).toFormat(1) : BN(0).toFormat(4)} <i class="fas fa-key"></i></p>\r\n\t</div>\r\n</div>\r\n\t  \t<div class="row marginb" if={!$this.roundHasPassed}>\r\n\t<div class="col text-right">共 {BN(JUST.Cache.currentRound[2]).div(1e18).toFormat(0)} Keys</div>\r\n\t  \t</div>\r\n\t  \t<div class="row nomarginb">\r\n\t<div class="col">\r\n\t  <p class="h4">你的收益</p>\r\n\t</div>\r\n\t<div class="col">\r\n\t  <p class="h2 text-right">{(JUST.Bridges.Metamask && JUST.Bridges.Metamask.signedIn) ? BN(JUST.Cache.currentPlayer.Vaults[0]).plus(JUST.Cache.currentPlayer.Vaults[1]).plus(JUST.Cache.currentPlayer.Vaults[2]).div(1e18).toFormat(4) : BN(0).toFormat(5)} <i class="fab fa-ethereum"></i></p>\r\n\t</div>\r\n</div>\r\n<div class="row marginb">\r\n\t<div class="col text-right">\r\n&#8793; {BN(JUST.Cache.currentPlayer.Vaults[0]).plus(JUST.Cache.currentPlayer.Vaults[1]).plus(JUST.Cache.currentPlayer.Vaults[2]).div(1e18).multipliedBy(JUST.Cache.fiatRatios.USD).toFormat(5)} USDT\r\n\t</div>\r\n\t  \t</div>\r\n\t</div>\r\n</div>\r\n\t</div>\r\n\t<!-- /current pot -->\r\n\t\r\n\t<!-- teams -->\r\n\t<div class="tab-pane fade" id="teamArea" role="tabpanel" aria-labelledby="teamArea">\r\n<div class="jumbotron jumbotron-adjust text-light bg-dark jumboshade tab-rounded">\r\n\t<div class="row">\r\n  <div class="col">\r\n\t<p class="lead nomarginb">队伍</p>\r\n  </div>\r\n\t  \t<div class="col-auto">\r\n\t<p class="text-right nomarginb tutorial">\r\n\t<i class="fas fa-arrow-right pulsetutorial tutorialArrow"></i>\r\n\t<a tabindex="0" type="button" class="qbtn" role="button" data-toggle="popover" data-trigger="focus" data-html="true" data-placement="bottom" title="Pick a team, get angry at those not on your team." data-content="{popover.teams}">\r\n<i class="far fa-question-circle"></i>\r\n\t</a>\r\n\t  \t</div>\r\n\t</div>\r\n\t<div class="row">\r\n<div class="col">\r\n\t<div class="jumbotron jumbotron-adjust text-center teamscore">\r\n<p class="lead">蓝鲸队</p>\r\n<img src="../img/twhale.png" width="25%"</img>\r\n<hr>\r\n<p class="glow-yel">{BN(JUST.Cache.currentRound[9]).div(1e18).toFormat(4)} ETH</p>\r\n\t</div>\r\n</div>\r\n<div class="col">\r\n\t<div class="jumbotron jumbotron-adjust text-center\tteamscore">\r\n<p class="lead">懒熊队</p>\r\n<img src="../img/tbear.png" width="25%"</img>\r\n<hr>\r\n<p class="glow-yel">{BN(JUST.Cache.currentRound[10]).div(1e18).toFormat(4)} ETH</p>\r\n\t</div>\r\n</div>\r\n\t</div>\r\n\t<div class="row">\r\n<div class="col">\r\n\t<div class="jumbotron jumbotron-adjust text-center\tteamscore">\r\n<p class="lead">小牛队</p>\r\n<img src="../img/tbull.png" width="25%"</img>\r\n<hr>\r\n<p class="glow-yel">{BN(JUST.Cache.currentRound[12]).div(1e18).toFormat(4)} ETH </p>\r\n\t</div>\r\n</div>\r\n<div class="col">\r\n\t<div class="jumbotron jumbotron-adjust text-center\tteamscore">\r\n<p class="lead">玩蛇队</p>\r\n<img src="../img/tsnek.png" width="25%"</img>\r\n<hr>\r\n<p class="glow-yel">{BN(JUST.Cache.currentRound[11]).div(1e18).toFormat(4)} ETH </p>\r\n\t</div>\r\n</div>\r\n\t</div>\r\n</div>\r\n\t</div>\t\r\n\t<!-- /teams -->\r\n\t\r\n\t<!-- recent players -->\r\n\t<div class="tab-pane fade" id="playerArea" role="tabpanel" aria-labelledby="playerArea">\r\n<div class="jumbotron jumbotron-adjust text-light bg-dark jumboshade tab-rounded">\r\n\t<div class="row">\r\n\t  <div class="col">\r\n<p class="lead nomarginb">最近玩家</p>\r\n\t  </div>\r\n\t  <div class="col-auto">\r\n<p class="text-right nomarginb tutorial">\r\n\t<i class="fas fa-arrow-right pulsetutorial tutorialArrow"></i>\r\n<a tabindex="0" type="button" class="qbtn" role="button" data-toggle="popover" data-trigger="focus" data-html="true" data-placement="bottom" title="Like a list of envy:" data-content="{popover.leaderboard}">\r\n<i class="far fa-question-circle"></i>\r\n</a>\r\n\t  </div>\r\n\t</div>\r\n\t<div class="row" style="position: relative;">\r\n<div class="faded" style="position: absolute; z-index: 9; text-align: center; width: 100%; height: 100%; background: #00000085; padding-top: 75px; font-size: 54px;">\r\n\tComing soon\r\n</div>\r\n<div class="col">\r\n\t<div class="jumbotron jumbotron-adjust teamscore">\r\n<!-- NOTE: Displays last 3 ticket buyers along with their chosen team and total amount of ETH spent -->\r\n<table class="table">\r\n\t<thead>\r\n<tr>\r\n\t<th scope="col" class="borderchange">Player</th>\r\n\t<th scope="col" class="borderchange text-center">Team</th>\r\n\t<th scope="col" class="borderchange tright">Amount</th>\r\n</tr>\r\n\t</thead>\r\n\t<tbody>\r\n<tr>\r\n\t<th scope="row" class="playername truncate">inverate inker</th>\r\n\t<td class="text-center">玩蛇队</td>\r\n\t<td class="tright">0.0248 ETH</td>\r\n</tr>\r\n<tr>\r\n\t<th scope="row" class="playername truncate">antic moldmaker</th>\r\n\t<td class="text-center">蓝鲸队</td>\r\n\t<td class="tright">0.2480 ETH</td>\r\n</tr>\r\n<tr>\r\n\t<th scope="row" class="playername truncate">harjd laser</th>\r\n\t<td class="text-center">小牛队</td>\r\n\t<td class="tright">0.0248 ETH</td>\r\n</tr>\r\n\t</tbody>\r\n</table>\r\n\t</div>\r\n</div>\r\n\t</div>\r\n</div>\r\n\t</div>\r\n\t<!-- /recent players -->\r\n\t\r\n\t\r\n\t\r\n\t<!-- Stats page -->\r\n\t<!-- Stats page -->\r\n\t\r\n\t<div class="tab-pane fade" id="statsArea" role="tabpanel" aria-labelledby="statsArea">\r\n\r\n<div class="jumbotron jumbotron-adjust text-light bg-dark jumboshade tab-rounded">\r\n\t<div class="row">\r\n\t  <div class="col">\r\n<p class="lead nomarginb">本局统计 #{JUST.Cache.currentRound[1]}</p>\r\n\t  </div>\r\n\t  <div class="col-auto">\r\n<p class="text-right nomarginb tutorial">\r\n\t<i class="fas fa-arrow-right pulsetutorial tutorialArrow"></i>\r\n<a tabindex="0" type="button" class="qbtn" role="button" data-toggle="popover" data-trigger="focus" data-html="true" data-placement="bottom" title="Important Box:" data-content="{popover.stats}">\r\n<i class="far fa-question-circle"></i>\r\n</a>\r\n\t  </div>\r\n\t</div>\r\n\t<hr>\r\n\t<div class="jumbotron jumbotron-adjust teamscore">\r\n\t\r\n<div class="row nomarginb">\r\n\t<div class="col-auto">\r\n<p class="h4" >总投入：</p>\r\n\t</div>\r\n\t<div class="col">\r\n<p class="h2 text-right glow ethglitch">{((BN(JUST.Cache.currentRound[9])).plus(BN(JUST.Cache.currentRound[10])).plus(BN(JUST.Cache.currentRound[11])).plus(BN(JUST.Cache.currentRound[12]))).div(1e18).toFormat(3)} <i class="fab fa-ethereum ethglow"></i></p>\r\n\t</div>\r\n</div>\r\n<div class="row marginb">\r\n\t<div class="col text-right">&#8793; {(((BN(JUST.Cache.currentRound[9])).plus(BN(JUST.Cache.currentRound[10])).plus(BN(JUST.Cache.currentRound[11])).plus(BN(JUST.Cache.currentRound[12])))).div(1e18).multipliedBy(JUST.Cache.fiatRatios.USD).toFormat(2)} USDT</div>\r\n</div>\r\n\r\n<div class="row nomarginb">\r\n\t<div class="col-auto">\r\n<p class="h4" >已分配奖励:</p>\r\n\t</div>\r\n\t<div class="col">\r\n<p class="h2 text-right glow ethglitch">{((BN(JUST.Cache.currentRound[9])).plus(BN(JUST.Cache.currentRound[10])).plus(BN(JUST.Cache.currentRound[11])).plus(BN(JUST.Cache.currentRound[12])).minus(BN(JUST.Cache.currentRound[5]))).div(1e18).toFormat(3)} <i class="fab fa-ethereum ethglow"></i></p>\r\n\t</div>\r\n</div>\r\n<div class="row marginb">\r\n\t<div class="col text-right">&#8793;{((BN(JUST.Cache.currentRound[9])).plus(BN(JUST.Cache.currentRound[10])).plus(BN(JUST.Cache.currentRound[11])).plus(BN(JUST.Cache.currentRound[12])).minus(BN(JUST.Cache.currentRound[5]))).multipliedBy(JUST.Cache.fiatRatios.USD).div(1e18).toFormat(2)} USDT </div>\r\n</div>\r\n\r\n\r\n<div class="row nomarginb">\r\n\t<div class="col-auto">\r\n<p class="h4" >预计结束时间:</p>\r\n\t</div>\r\n\t<div class="col">\r\n<p class="h2 text-right glow ethglitch">{((BN(JUST.Cache.currentRound[2])).div(1e18).multipliedBy(30000)).div(31536000000).toFixed(2)} Years</p>\r\n\t</div>\r\n</div>\r\n<div class="row marginb">\r\n\t<div class="col text-right"> {((BN(JUST.Cache.currentRound[2])).div(1e18).multipliedBy(30)).toFormat(0)} Seconds</div>\r\n</div>\r\n\t</div>\r\n</div>\r\n\t</div>\r\n\t\r\n\t\r\n\t\r\n\r\n</div>\r\n<!-- /tabbable area -->\r\n\t</div>\r\n\t<!-- /stat tabs -->\r\n\r\n</div>\r\n</div>\r\n\t</div>\r\n\t<!-- modal popup -->\r\n\t<div class="modal fade" id="gameover" tabindex="-1" role="dialog" aria-labelledby="gameoverTitle" aria-hidden="true">\r\n<div class="modal-dialog modal-dialog-centered" role="document">\r\n\t<div class="modal-content bg-dark text-light">\r\n<div class="modal-header">\r\n\t<h5 class="modal-title" id="gameoverTitle">Modal Title</h5>\r\n\t<button type="button" class="close" data-dismiss="modal" aria-label="Close">\r\n<span aria-hidden="true">&times;</span>\r\n\t</button>\r\n</div>\r\n<div class="modal-body">\r\n\tModal Content\r\n</div>\r\n\t</div>\r\n</div>\r\n\t</div>\r\n\t<!-- /modal popup -->\r\n\t<!-- airdrop custom modal popup \r\n\tcleanup\r\n\t<div class="container" id="airdrop" style="z-index: 999;">\r\n        <div class="row">\r\n            <div class="col-6" style="position: fixed; bottom:0; left:25%;">\r\n                <div class="jumbotron jumbotron-adjust jumboshade bg-dark text-light">\r\n                    <div class="row">\r\n                        <div class="col">\r\n                            <div class="row">\r\n                                <div class="col">\r\n                                    <p class="lead">Airdrop: Your buying power has been multiplied!</p>\r\n                                </div>\r\n                            </div>\r\n                            <div class="row">\r\n                                <div class="col">\r\n                                    <p class="font-weight-light string">You\'ve recieved at least a 2x multiplier on your last purchase! (PLACEHOLDER)</p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div class="col-auto">\r\n                            <i class="fas fa-parachute-box airdropicon ethglow-its-okay-justo"></i>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\t/airdrop custom modal popup -->\r\n\t\r\n\t<!-- If something breaks delet this script justo made; -->\r\n\t<script>\r\n\t// Contain the popover within the body NOT the element it was called in.\r\n$(\'[data-toggle="popover"]\').popover({\r\n\tcontainer: \'body\'\r\n});\r\n\r\n$this = this\r\n$this.refresher = debounce(async () => {\r\n\tJUST.Cache.currentRound = await JUST.Bridges.Browser.contracts.Fomo3D.read("getCurrentRoundInfo")\r\n\tclearInterval(window.globalTimerObject)\r\n\t$this.update()\r\n}, 500)\r\n\r\nasync function assemble() {\r\n\t$this.roundHasPassed = Math.floor( JUST.date().getTime() / 1000) > JUST.Cache.currentRound[3]\r\n\t$this.playerIsLeader = JUST.Bridges.Metamask && JUST.Bridges.Metamask.signedIn && Math.floor(parseInt(JUST.Cache.currentRound[6]/10)) == parseInt(JUST.Cache.currentPlayer.PID)\r\n\t$this.playerHasWon = $this.roundHasPassed && $this.playerIsLeader\r\n\t$this.isCEO = JUST.Bridges.Metamask && JUST.Bridges.Metamask.signedIn && JUST.Cache.currentPlayer && JUST.Cache.currentPlayer.Round && JUST.Cache.currentPlayer.Round[1] !== "0x0000000000000000000000000000000000000000000000000000000000000000"\r\n\t$this.myLink = $this.isCEO ? `${window.location.origin}/${JUST.Bridges.Metamask.web3.eth.defaultAccount}` : `#`\r\n\t$this.gracePeriod = false\r\n\t// $this.gracePeriod = true\r\n\t$this.myLinkid = $this.isCEO ? `${window.location.origin}/${JUST.Cache.currentPlayer.PID.toFixed()}` : `#`\r\n\t$this.myLinkName = $this.isCEO ? `${window.location.origin}/${JUST.Bridges.Browser.web3.utils.toAscii(JUST.Cache.currentPlayer.Round[1])}` : `#`\r\n\t$this.myLinkName = $this.myLinkName.replace(/ /g,\'%20\')\r\n}\r\n\r\nasync function rewire() {\r\n\r\n\tif($this.isCEO) jQuery(".afflink span").text($this.myLinkName)\r\n\r\n\t // open vanity from ceo box\r\n\tjQuery(".buyceo").click(async e => {\r\nlet correctNetwork  = await JUST.checkNetwork()\r\nif(!correctNetwork) return alertify.alert("You are not in the correct network. Please navigate to <a style=\'color: #1e10f8;text-decoration: underline;\' href=\'https://testnet.teamjust.io\'>the testnet portal</a> and follow the instructions.")\r\njQuery(\'#vanity\').modal()\r\n\t})\r\n\r\n\t/* Check for graphics quality switch settings\r\n\tlet sd_mode = localStorage.getItem(\'fancy\')\r\n\tif(sd_mode && sd_mode == "true"){\r\njQuery("#fancyswitch").prop("checked", false);\r\njQuery(\'#hdgraphics\').toggle();\r\n\t} else{\r\njQuery("#fancyswitch").prop("checked", true);\r\n\t}*/\r\n\r\n\t// Check for tutorial switch settings\r\n\tif(tutorial_mode != "true"){\r\njQuery(\'.tutorial\').css({"display": "none"});\r\njQuery("#tutorialswitch").prop("checked", false);\r\n\t}\r\n\r\n\t // Teamselect localstorage thingy\r\n\tlet saved_team = localStorage.getItem("team")\r\n  \tif(saved_team){\r\n  if(saved_team == "0"){\r\n\tjQuery("#teamsnek").prop("checked", true);\r\n}\r\nif(saved_team == "1"){\r\n\tjQuery("#teamwhale").prop("checked", true);\r\n}\r\nif(saved_team == "2"){\r\n\tjQuery("#teambull").prop("checked", true);\r\n}\r\nif(saved_team == "3"){\r\n\tjQuery("#teambear").prop("checked", true);\r\n}\r\n  \t} else {\r\n  jQuery("#teamsnek").prop("checked", true);\r\n  \t}\r\n\t\r\n\tif(!$this.roundHasPassed) {\r\n/* WIP\r\n// add airdrop text to html\r\nlet priceQuotation = await JUST.Bridges.Browser.contracts.Fomo3D.read(\'iWantXKeys\', count)\r\nlet purchase_amount = BN(priceQuotation).plus(100).div(1e18).toFixed(2)\r\nswitch(purchase_amount){\r\n\tcase >10:\r\n$(\'#airdrop_chance\').text({JUST.Cache.airdropTracker} + "% chance to receive a 4x Key Airdrop with your next purchase with at least 10 ETH!");\r\nbreak;\r\n\tcase >1:\r\n$(\'#airdrop_chance\').text({JUST.Cache.airdropTracker} + "% chance to receive a 3x Key Airdrop with your next purchase with at least 1 ETH!");\r\nbreak;\r\n\tdefault:\r\n$(\'#airdrop_chance\').text({JUST.Cache.airdropTracker} + "% chance to receive a 2x Key Airdrop with your next purchase with at least .1 ETH!");\r\n}\r\n*/\r\njQuery("#quotes").addClass("active")\r\nif(JUST.Bridges.Metamask && JUST.Bridges.Metamask.signedIn){\r\n\tjQuery(".keycount").text(BN(JUST.Cache.currentPlayer.Round[2]).div(1e18).toFixed(4))\r\n} else {\r\n\tjQuery(".keycount").text("0")\r\n\r\n}\r\nif($this.timer) $this.timer.Destroy()\r\n$this.timer = new Countdown(JUST.Cache.currentRound[3], async (data, expired) => {\r\n\tnow = (JUST.date().getTime() / 1000)\r\n\r\n\t// console.log({\r\n\t// \tcurrentTime: new Date(now * 1000), \r\n\t// \troundEnd: new Date(parseInt(JUST.Cache.currentRound[3]) * 1000),\r\n\t// \troundOver:  now < parseInt(JUST.Cache.currentRound[3]),\r\n\t// \troundID: JUST.Cache.currentRound[1],\r\n\t// \tpot: JUST.Cache.currentRound[5]\r\n\r\n\t// })\r\n\t\r\n\tif(Math.floor( JUST.date().getTime() / 1000) > (parseInt(JUST.Cache.currentRound[3]) - 90) && $this.gracePeriod) {\r\n\r\n$this.gracePeriod = false\r\n\r\n// pepe\r\nfunction pepe(){\r\n$(".animation").animate({bottom: "-30px"}, "slow");\r\n    $(".animation").animate({left: "100%"}, "slow", function () {\r\n      $(this).removeAttr(\'style\');  \r\n    });\r\n}\r\npepe()\r\n\r\n// clear timer from stack\r\nclearInterval(window.globalTimerObject)\r\n\r\n$this.refresher()\r\n\t}\r\n\r\n\tif(!expired){\r\nif($this.gracePeriod){\r\n\tlet actualTime = parseDifference(new Date(parseInt(JUST.Cache.currentRound[3]) - 90), JUST.date())\r\n\tjQuery(".headtimer").text(`${(actualTime.hours == "00" ? "" : actualTime.hours + ":") }${actualTime.minutes}:${actualTime.seconds}`)\r\n} else {\r\n\tjQuery(".headtimer").text(`${(data.hours == "00" ? "" : data.hours + ":") }${data.minutes}:${data.seconds}`)\r\n\r\n}\r\n\r\njQuery(".boxtimer").text(`${(data.hours == "00" ? "" : data.hours + ":") }${data.minutes}:${data.seconds}`)\r\n\r\nvar timeTotal = parseInt(parseInt(JUST.Cache.currentRound[4]) - parseInt(JUST.Cache.currentRound[4])) + 3600\r\nvar timeRemaining = parseInt(JUST.Cache.currentRound[3]) - now \r\nvar timePercentage = 100 - timeRemaining / (timeTotal / 100)\r\n\r\n//console.log(timeTotal, timeRemaining, Math.floor(timePercentage))\r\n\r\njQuery(".progress-bar.boxglow").css(\'width\', `${Math.floor(timePercentage)}%`)\r\n\r\n\t} else {\r\njQuery("#quotes").removeClass("active")\r\n// refresh dom\r\n$this.refresher()\r\n\t}\r\n})\r\n\t}\r\n\tif($this.gracePeriod && !this.graceTimer) {\r\n\r\nconsole.log("execute", parseInt(JUST.Cache.currentRound[3]) + 300)\r\nnew Countdown(parseInt(JUST.Cache.currentRound[3]) + 300, async (data, expired) => {\r\n\t$this.graceTimer = true\r\n\tnow = (JUST.date().getTime() / 1000)\r\n\r\n\r\n\tif(now < (parseInt(JUST.Cache.currentRound[3]) + 300) ){\r\njQuery(".graceTimer").text(`${(data.hours == "00" ? "" : data.hours + ":") }${data.minutes}:${data.seconds}`)\r\n\t} else {\r\n$this.gracePeriod = false\r\n// clear timer from stack\r\n$this.graceTimer = false\r\n// refresh dom\r\n$this.refresher()\r\n\t}\r\n})\r\n\t}\r\n\r\n\tawait jQuery( ".buyOneTicket" ).unbind()\r\n\tawait jQuery( "#tixBuy" ).unbind()\r\n\tawait jQuery( "#tixReinvest" ).unbind()\r\n\tawait jQuery( "#withdrawEarnings" ).unbind()\r\n\tawait jQuery( "#ethSpend" ).unbind()\r\n\tawait jQuery( "#ethReinvest" ).unbind()\r\n\r\n\tjQuery(".buyOneTicket").click(async e  => {\r\nif(!JUST.Bridges.Metamask || !JUST.Bridges.Metamask.signedIn) return alertify.alert("你没有登录 metamask.")\r\nlet correctNetwork  = await JUST.checkNetwork()\r\nif(!correctNetwork) return alertify.alert("You are not in the correct network. Please navigate to <a style=\'color: #1e10f8;text-decoration: underline;\' href=\'https://testnet.teamjust.io\'>the testnet portal</a> and follow the instructions.")\r\nvar masternode = window.localStorage.getItem("masternode") ? window.localStorage.getItem("masternode") : "0x0" \r\n\r\ntry {\r\n\tlet priceQuotation = await JUST.Bridges.Browser.contracts.Fomo3D.read(\'iWantXKeys\', [BN(1050000000000000000)])\r\n\tjQuery(\'#loading\').modal({backdrop: \'static\', keyboard: false})\r\n\tlet team = $("input[name=\'teamselect\']:checked").val()\r\n\tif(!team) team = 0\r\n\tlet receipt = await JUST.Bridges.Metamask.contracts.Fomo3D.purchaseKeys(priceQuotation, team)\r\n\t//let receipt = await JUST.Bridges.Metamask.contracts.Fomo3D.write("buy", [masternode, 1], {value: priceQuotation})\r\n\tjQuery(\'#loading\').modal(\'hide\')\r\n\talertify.log(`Your key purchasing request has been submitted to the blockchain!`)\r\n\tconsole.log(receipt)\r\n} catch (e) {\r\n\tconsole.log(e)\r\n\talertify.log(`Buy order has been cancelled.`)\r\n\tjQuery(\'#loading\').modal(\'hide\')\r\n}\r\n\r\n\t})\r\n\r\n\t/**\r\n\t * Whenever the input of tixToBuy changes..\r\n\t */\r\n\tjQuery("#tixToBuy").bind(\'input\', getQuote)\r\n\r\n\t/**\r\n\t * When the purchase button is clicked.\r\n\t */\r\n\tjQuery("#tixBuy").click( async e => {\r\nif(!JUST.Bridges.Metamask || !JUST.Bridges.Metamask.signedIn) return alertify.alert("你没有登录 metamask.")\r\nlet correctNetwork  = await JUST.checkNetwork()\r\nif(!correctNetwork) return alertify.alert("You are not in the correct network. Please navigate to <a style=\'color: #1e10f8;text-decoration: underline;\' href=\'https://testnet.teamjust.io\'>the testnet portal</a> and follow the instructions.")\r\nlet count = String(jQuery("#tixToBuy").val()).replace("keys", "").replace("key", "").replace("Keys", "").replace("Key", "")\r\nif(!Number.isInteger(parseInt(count))) return\r\nvar masternode = window.localStorage.getItem("masternode") ? window.localStorage.getItem("masternode") : "0x0" \r\ncount = BN((parseInt(count)) * 1e18)\r\n\r\ntry {\r\n\tlet priceQuotation = await JUST.Bridges.Browser.contracts.Fomo3D.read(\'iWantXKeys\', count)\r\n\tjQuery(\'#loading\').modal({backdrop: \'static\', keyboard: false})\r\n\tlet team = $("input[name=\'teamselect\']:checked").val()\r\n\tif(!team) team = 0\r\n\tlet receipt = await JUST.Bridges.Metamask.contracts.Fomo3D.purchaseKeys(BN(priceQuotation).plus(100).toString(), team)\r\n\talertify.log(`Your ticket purchasing request has been submitted to the blockchain!`)\r\n\tjQuery(\'#loading\').modal(\'hide\')\r\n\r\n\tconsole.log(receipt)\r\n} catch (e) {\r\n\talertify.log(`Buy order has been cancelled.`)\r\n\tjQuery(\'#loading\').modal(\'hide\')\r\n\r\n}\r\n\r\n\t})\r\n\r\n\t/**\r\n\t * When the reinvest button is clicked.\r\n\t */\r\n\tjQuery("#tixReinvest").click( async e => {\r\nif(!JUST.Bridges.Metamask || !JUST.Bridges.Metamask.signedIn) return alertify.alert("你没有登录 metamask.")\r\nlet correctNetwork  = await JUST.checkNetwork()\r\nif(!correctNetwork) return alertify.alert("You are not in the correct network. Please navigate to <a style=\'color: #1e10f8;text-decoration: underline;\' href=\'https://testnet.teamjust.io\'>the testnet portal</a> and follow the instructions.")\r\nlet vaultEarnings = BN(JUST.Cache.currentPlayer.Vaults[0]).plus(JUST.Cache.currentPlayer.Vaults[1]).plus(JUST.Cache.currentPlayer.Vaults[2])\r\nlet count = String(jQuery("#tixToBuy").val()).replace("keys", "").replace("key", "").replace("Keys", "").replace("Key", "")\r\nvar masternode = window.localStorage.getItem("masternode") ? window.localStorage.getItem("masternode") : "0x0" \r\nif(!Number.isInteger(parseInt(count))) return\r\ncount = BN((parseInt(count) ) * 1e18)\r\n\r\ntry {\r\n\tlet priceQuotation = await JUST.Bridges.Browser.contracts.Fomo3D.read(\'iWantXKeys\', [BN(count)])\r\n\tif(vaultEarnings.isLessThan(BN(priceQuotation))) return alertify.alert(`你钱包不够 ${BN(priceQuotation).div(1e18).toFixed(4)} ETH 来购买 ${count.div(1e18).toFixed(4)} keys. 你钱包里只有 ${vaultEarnings.div(1e18).toFixed(4)} ETH.`)\r\n\tjQuery(\'#loading\').modal({backdrop: \'static\', keyboard: false})\r\n\tlet team = $("input[name=\'teamselect\']:checked").val()\r\n\tif(!team) team = 0\r\n\tlet receipt = await JUST.Bridges.Metamask.contracts.Fomo3D.purchaseKeys(BN(priceQuotation).plus(100).toString(), team, true)\r\n\talertify.log(`Your ticket purchasing request has been submitted to the blockchain!`)\r\n\tjQuery(\'#loading\').modal(\'hide\')\r\n\r\n\tconsole.log(receipt)\r\n} catch (e) {\r\n\tconsole.error(e)\r\n\talertify.log(`Buy order has been cancelled.`)\r\n\tjQuery(\'#loading\').modal(\'hide\')\r\n\r\n}\r\n\t})\r\n\r\n\t/**\r\n\t * When the ICO invest button is pressed\r\n\t */\r\n\tjQuery("#ethSpend").click( async e => {\r\nif(!JUST.Bridges.Metamask || !JUST.Bridges.Metamask.signedIn) return alertify.alert("你没有登录 metamask.")\r\nlet correctNetwork  = await JUST.checkNetwork()\r\nif(!correctNetwork) return alertify.alert("You are not in the correct network. Please navigate to <a style=\'color: #1e10f8;text-decoration: underline;\' href=\'https://testnet.teamjust.io\'>the testnet portal</a> and follow the instructions.")\r\nlet count = String(jQuery("#ethToSpend").val()).replace("ethereum", "").replace("Ethereum", "").replace("eth", "").replace("ETH", "")\r\nif(!Number.isInteger(parseInt(count))) return\r\ncount = BN(count).multipliedBy(1e18)\r\n\r\ntry {\r\n\tlet team = $("input[name=\'teamselect\']:checked").val()\r\n\tif(!team) team = 1\r\n\tjQuery(\'#loading\').modal({backdrop: \'static\', keyboard: false})\r\n\tlet receipt = await JUST.Bridges.Metamask.contracts.Fomo3D.purchaseKeys(count.toString(), team)\r\n\talertify.log(`Your ICO funding request has been submitted to the blockchain!`)\r\n\tjQuery(\'#loading\').modal(\'hide\')\r\n\tconsole.log(receipt)\r\n} catch (e) {\r\n\talertify.log(`Funding request been cancelled.`)\r\n\tjQuery(\'#loading\').modal(\'hide\')\r\n\r\n}\r\n\t})\r\n\r\n\t/**\r\n\t * When the ICO invest button is pressed\r\n\t */\r\n\tjQuery("#ethReinvest").click( async e => {\r\nif(!JUST.Bridges.Metamask || !JUST.Bridges.Metamask.signedIn) return alertify.alert("你没有登录 metamask.")\r\nlet correctNetwork  = await JUST.checkNetwork()\r\nif(!correctNetwork) return alertify.alert("You are not in the correct network. Please navigate to <a style=\'color: #1e10f8;text-decoration: underline;\' href=\'https://testnet.teamjust.io\'>the testnet portal</a> and follow the instructions.")\r\nlet count = String(jQuery("#ethToSpend").val()).replace("ethereum", "").replace("Ethereum", "").replace("eth", "").replace("ETH", "")\r\nif(!Number.isInteger(parseInt(count))) return\r\ncount = BN(count).multipliedBy(1e18)\r\n\r\ntry {\r\n\tlet team = $("input[name=\'teamselect\']:checked").val()\r\n\tif(!team) team = 1\r\n\tlet receipt = await JUST.Bridges.Metamask.contracts.Fomo3D.purchaseKeys(count.toString(), team, true)\r\n\talertify.log(`Your ICO funding request has been submitted to the blockchain!`)\r\n\tjQuery(\'#loading\').modal(\'hide\')\r\n\tconsole.log(receipt)\r\n} catch (e) {\r\n\talertify.log(`Funding request been cancelled.`)\r\n\tjQuery(\'#loading\').modal(\'hide\')\r\n\r\n}\r\n\t})\r\n\r\n\tjQuery("#withdrawEarnings").click(async e => {\r\nlet correctNetwork  = await JUST.checkNetwork()\r\nif(!correctNetwork) return alertify.alert("You are not in the correct network. Please navigate to <a style=\'color: #1e10f8;text-decoration: underline;\' href=\'https://testnet.teamjust.io\'>the testnet portal</a> and follow the instructions.")\r\nif(!JUST.Bridges.Metamask || !JUST.Bridges.Metamask.signedIn) return alertify.alert("你没有登录 metamask.")\r\njQuery(\'#loading\').modal({backdrop: \'static\', keyboard: false})\r\ntry {\r\n\tlet receipt = await JUST.Bridges.Metamask.contracts.Fomo3D.write("withdraw")\r\n\tjQuery(\'#loading\').modal(\'hide\')\r\n\talertify.log(`Your withdrawal request has been submitted to the blockchain!`)\r\n\tconsole.log(receipt)\r\n\r\n} catch(e) {\r\n\talertify.log(`Withdrawal has been cancelled.`)\r\n\tjQuery(\'#loading\').modal(\'hide\')\r\n}\r\n\r\n\r\n\t})\r\n\r\n\r\n\tgetQuote()\r\n}\r\n\r\nasync function getQuote(){\r\n\tlet count = String(jQuery("#tixToBuy").val()).replace("key", "").replace("keys", "").replace("Key", "").replace("Keys", "")\r\n\tif(!Number.isInteger(parseInt(count))) return\r\n\tcount = BN(parseInt(count) * 1e18)\r\n\t\r\n\tlet priceQuotation = await JUST.Bridges.Browser.contracts.Fomo3D.read(\'iWantXKeys\', count)\r\n\r\n\tjQuery("#tixQuotation").text(`@ ${BN(priceQuotation).plus(100).div(1e18).toFixed(8)} ETH`)\r\n\r\n\tconsole.log(priceQuotation)\r\n}\r\n\r\n\r\n$this.on(\'update\', assemble)\r\n$this.on(\'updated\', rewire)\r\n$this.on(\'before-mount\', assemble)\r\nthis.on(\'unmount\', fn => {\r\n\tif(window.globalTimerObject && typeof window.globalTimerObject !== "undefined") clearInterval(window.globalTimerObject)\r\n})\r\n\r\n\r\nJUST.UI.on(\'ui.refresh\', () => {\r\n\tconsole.log(\'refreshing ui\')\r\n\t$this.refresher()\r\n} )\r\n\r\n\t\r\n$this.on(\'mount\', function(){\r\n\t\r\n\t// wire listeners\r\n\trewire()\r\n\r\n\tnew ClipboardJS(\'.btn\');\r\n\r\n  // Teamselection to var\r\n  jQuery(\'.ticketProcess\').click(function(){\r\n\tvar team = $("input[name=\'teamselect\']:checked").val()\r\n\t//console.log(team)\r\n  });\r\n\r\n  // Increase ticket amount to buy with buttons\r\n  jQuery(\'.increment\').click(function(){\r\n\tlet id = this.id\r\n\t\r\n\tif(id == \'addOne\'){ \r\n\t  var increment = 1\r\n\t}\r\n\tif(id == \'addTwo\'){ \r\n\t  var increment = 2\r\n\t}\r\n\tif(id == \'addFive\'){\r\n\t  var increment = 5\r\n\t}\r\n\tif(id == \'addTen\'){\r\n\t  var increment = 10\r\n\t}\r\n\r\n\tif(id == \'addHundred\'){\r\n\t  var increment = 100\r\n\t}\r\n\tif(jQuery(\'#tixToBuy\').val()){\r\n///replace("key", "").replace("keys", "").replace("Key", "").replace("Keys", "")\r\nvar iVal = parseInt(String(jQuery("#tixToBuy").val()).replace("keys", "").replace("key", "").replace("Keys", "").replace("Key", ""))\r\n\t}\r\n\telse{\r\nvar iVal = 1\r\n\t}\r\n\r\n\tlet nVal = iVal + increment\r\n\r\n\tjQuery("#tixToBuy").val(nVal.toString())\r\n\r\n\tgetQuote()\r\n\r\n  });\r\n\r\n  // Quote script\r\n  //jQuery(".qTarget").text(memes.global.quoteRoulette[Math.floor(Math.random()*memes.global.quoteRoulette.length)]);\r\n\r\n  // Enable popovers\r\n  jQuery(".qbtn").click(function(){\r\n\tjQuery(\'[data-toggle="popover"\').popover()\r\n  })\r\n  \r\n \r\n\r\n \r\n\r\n\t// save team\r\n\tjQuery(\'.teamselector input\').click(function(){\r\nlet thisteam = $(this).attr(\'id\')\r\nif(thisteam == "teamsnek"){\r\n\tlocalStorage.setItem(\'team\', \'0\');\r\n}\r\nif(thisteam == "teamwhale"){\r\n\tlocalStorage.setItem(\'team\', \'1\');\r\n}\r\nif(thisteam == "teambull"){\r\n\tlocalStorage.setItem(\'team\', \'2\');\r\n}\r\nif(thisteam == "teambear"){\r\n\tlocalStorage.setItem(\'team\', \'3\');\r\n}\r\n\t})\r\n\r\n\t// airdrop modal animation\r\n\t\r\n\tairdrop_animate = function(){\r\n$("#airdrop row col-6").animate({bottom: "-30px"}, "fast", function(){\r\n\t$(this).removeAttr(\'style\');\r\n});\r\n\t}\r\n\t\r\n// bash\r\n$("#terminal").click(function(){\r\n\t$(".commandInput").focus();\r\n})\r\n$("#commandLine li input").val(\'\');\r\n$("#commandLine").on("keypress", ".commandInput", function(e){\r\n\tif(e.which == 13){\r\nvar command = $("input.active").val().toLowerCase();\r\nif(/^[a-zA-Z0-9- ?.=/]*$/.test(command) == false){\r\n\tcommand = "syntax_error"\r\n}\r\n$("#commandLine li input").each(function(){\r\n\t$(this).removeClass("active");\r\n\t$(this).attr("disabled", true);\r\n});\r\nswitch(command){\r\n\t// include more cases for custom commands here\r\n\tcase "":\r\nbreak;\r\n\tcase "help":\r\n\tcase "?":\r\n$("#commandLine").append(\'<li class="prompt"><span class="ps1 noselect good">&rarr; List of available commands</span>\');\r\n$("#commandLine").append(\'<li class="prompt"><span class="ps1 noselect good">help, ?: display this message</span>\');\r\n$("#commandLine").append(\'<li class="prompt"><span class="ps1 noselect good">clear, cls: clear lines</span>\');\r\n$("#commandLine").append(\'<li class="prompt"><span class="ps1 noselect good">uname: show kernel information</span>\');\r\n$("#commandLine").append(\'<li class="prompt"><span class="ps1 noselect good">exit: quit this application</span>\');\r\nbreak;\r\n\r\n\tcase "syntax_error":\r\n$("#commandLine").append(\'<li class="prompt"><span class="ps1 noselect error">&rarr; syntax error</span>\');\r\nbreak;\r\n\t\r\n\tcase "uname":\r\n\tcase "uname -a":\r\n$("#commandLine").append(\'<li class="prompt"><span class="ps1 noselect good">&rarr; FomoOS jekyllisland 2.3.2-180708 #232-TeamJUST x86_256 GAHNOO/Fomo</span>\');\r\nbreak;\r\n\tcase "uptime":\r\n$("#commandLine").append(\'<li class="prompt"><span class="ps1 noselect good">&rarr; TIME up DIFFERENCE TO LAUNCH, USERS users, load average: 0,89, 0,92, 0,90</span>\');\r\nbreak;\r\n\tcase "clear":\r\n\tcase "cls":\r\n$(".prompt").each(function(){\r\n\t$(this).remove();\r\n});\r\nbreak;\r\n\r\n\tcase "exit":\r\n\tcase "quit":\r\n$("#commandLine li input").val(\'\');\r\n$(".prompt").each(function(){\r\n\t$(this).remove();\r\n});\r\n$("#terminal").css({\r\n\tvisibility: "hidden",\r\n})\r\nbreak;\r\n\r\n\tdefault:  // defaults to not found\r\n$("#commandLine").append(\'<li class="prompt"><span class="ps1 noselect error">&rarr; "\' + command + \'" command not found</span>\');\r\n}\r\n$("#commandLine").append(\'<li class="prompt"><span class="ps1 noselect">player@jekyllisland ~ $ <input type="text" class="commandInput active"></li>\'); \r\n$(".commandInput.active").focus();\r\nreturn false;\r\n\t}\r\n});\r\n\r\n\t  })\r\n\t</script>\r\n\r\n</state-play>\r\n\r\n<state-airdrop>\r\n\t<!-- airdrop custom modal popup -->\r\n    <div class="container" id="airdrop" style="z-index: 999; display:none;">\r\n        <div class="row">\r\n            <div class="col-6" style="position: fixed; bottom:0; left:25%;">\r\n                <div class="jumbotron jumbotron-adjust jumboshade bg-dark text-light">\r\n                    <div class="row">\r\n                        <div class="col">\r\n                            <div class="row">\r\n                                <div class="col">\r\n                                    <p class="lead">Airdrop: You just hit the jackpot baby,</p>\r\n                                </div>\r\n                            </div>\r\n                            <div class="row">\r\n                                <div class="col">\r\n                                    <p class="font-weight-light string">You\'ve drained at least 25% of the airdrop POT. (PLACEHOLDER)</p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div class="col-auto">\r\n                            <i class="fas fa-parachute-box airdropicon ethglow-its-okay-justo"></i>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <!-- /airdrop custom modal popup -->\r\n    <script>\r\n    \t$this = this\r\n    \t$this.on(\'mount\', e => {\r\n    console.log(\'mounted\')\r\n    \t})\r\n    </script>\r\n</state-airdrop>',
    );

    riot.compile(
      '<state-play2>\r\n<script>\r\n\t\t/* Initializes Popovers so they only require 1 click\r\n\t\twith love -justo */\r\n\t\t$(function () {\r\n\t\t\t$(\'[data-toggle="popover"]\').popover();\r\n\t\t\t$(\'.checkmark\').popover({\r\n\t\t\t\ttrigger: "hover"\r\n\t\t\t});\r\n\t\t})\r\n\r\n\t\t\r\n\r\n\t\tsetTimeout(function() {\r\n\t\t$(\'.tutorialArrow\').fadeOut(\'fast\');\r\n\t\t}, 20000); // <-- time in milliseconds\r\n</script>\r\n\r\n\t<!-- fomo\t-->\r\n\t<!-- NOTE: Displays the current pot size in ETH as well as time left in current round -->\r\n\t<div class="blurryboyblue" if={!$this.gracePeriod}></div>\r\n\t<div class="blurryboybluedark" if={$this.gracePeriod}></div>\r\n\r\n\t<div class="jumbotron rounded-0 text-center text-light teaser-cover" if={!$this.roundHasPassed}>\r\n\t\t<!--\r\n\t\t<div class="grid-container" if={!$this.gracePeriod}>\r\n\t\t\t<div id="hdgraphics" class="grid-top"></div>\r\n\t\t</div> -->\r\n\t\t<div class="container">\r\n\t\t\t<h4 class="display-4 scammed" style="font-style: italic;" if={!$this.playerIsLeader && JUST.Cache.currentRound[8] && JUST.Cache.currentRound[8] !=  "0x0000000000000000000000000000000000000000000000000000000000000000"}>\r\n\t\t\t{JUST.Bridges.Browser.web3.utils.toAscii(JUST.Cache.currentRound[8])} is</h4>\r\n\t\t\t<h4 class="display-4 scammed" style="font-style: italic;" if={!$this.playerIsLeader && JUST.Cache.currentRound[8] && JUST.Cache.currentRound[8] ==  "0x0000000000000000000000000000000000000000000000000000000000000000"}>\r\n\t\t\tsomeone else is</h4>\r\n\t\t\t<h1 class="display-1 scammed" if={!$this.playerIsLeader && !$this.gracePeriod}>本局结束</h1>\r\n\t\t\t<h1 class="display-1 scammed" if={$this.playerIsLeader && !$this.gracePeriod}>YOU ARE EXIT SCAMMING</h1>\r\n\t\t\t<h1 class="display-1 scammed" if={!$this.playerIsLeader && $this.gracePeriod}>ICO FUNDING</h1>\r\n\t\t\t<h1 class="display-1 scammed" if={$this.playerIsLeader && $this.gracePeriod}>YOU ARE ICO FUNDING</h1>\r\n\t\t\t<h2 class="display-3" if={$this.gracePeriod}><span class="ethglitch titleglow">{BN(JUST.Cache.currentRound[0]).plus(JUST.Cache.currentRound[5]).div(1e18).toFixed(4)} <i class="fab fa-ethereum ethglow"></i></span></h2>\r\n\t\t\t<h2 class="display-3" if={!$this.gracePeriod}><span class="ethglitch titleglow">{BN(JUST.Cache.currentRound[5]).div(1e18).toFixed(4)} <i class="fab fa-ethereum ethglow"></i></span> <span class="headtimer">--</span></h2>\r\n\t\t \t<h3 if={$this.gracePeriod} class="display-5" style="margin-top:50px;">ICO ends in <span class="headtimer" style="display:inline;font-size:inherit;">--</span></h3>\r\n\r\n\t\t\t<!-- <h5 class="display-5" if={!$this.playerIsLeader && !$this.gracePeriod}><a class="titlepopoutrightmini">You\'re</a> going to stop them, right?</h5> -->\r\n\t\t\t<!-- <h5 class="display-5" if={!$this.playerIsLeader && !$this.gracePeriod}>{memes.buyButtonMessagePlayer[Math.floor(memes.buyButtonMessagePlayer.length * Math.random()) - 1].replace(/\\$player/g, JUST.Bridges.Browser.web3.utils.toAscii(JUST.Cache.currentRound[8]))}</h5>-->\r\n\t\t\t<h5 class="display-5" if={$this.playerIsLeader  && !$this.gracePeriod}>如果没有人购买 key，你就赢得这局收益！</h5>\r\n\t\t  \t<!--<a if={$this.gracePeriod} href="javascript:void(0)" class="buyOneTicket btn btn-lg btn-block btn-blu pulse-blu marginb">Participate in the ICO</a> -->\r\n\t\t  \t<h4 if={$this.gracePeriod} class="lead">ICO Phase: A short interlude. Send eth to automatically get your share of the <a class="titlepopoutrightmini">first</a> and <a class="titlepopoutrightmini">cheapest</a> keys</b> </h4>\r\n\t\t\t<h6 if={$this.gracePeriod}> No tricks, you get the cheapest price</h6>\r\n\r\n\t\t\t\r\n\t\t\t\t<!-- Button Handling for Buy 1x More;  -->\r\n\t\t\t\t<!-- This button appears when the player in the lead has a vanity name  -->\r\n\r\n\r\n\r\n\t\t\t\t<a href="javascript:void(0)" if={!$this.playerIsLeader && !$this.gracePeriod && JUST.Cache.currentRound[8] !=  "0x0000000000000000000000000000000000000000000000000000000000000000"} class="buyOneTicket btn btn-lg btn-block btn-blu pulse marginb">\r\n\t\t\t\t\t<div class=row>\r\n\t\t\t\t\t\t<div class=col-sm-1.5 style="padding-left: 10px">\r\n\t\t\t\t\t\t 1x <i class="fas fa-key"></i>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class=col-sm-11>\r\n\t\t\t\t\t\t{memes.buyButtonMessagePlayer[Math.floor(memes.buyButtonMessagePlayer.length * Math.random()) - 1].replace(/\\$player/g, JUST.Bridges.Browser.web3.utils.toAscii(JUST.Cache.currentRound[8]))}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</a>\r\n\t\t\t\t\r\n\t\t\t\t<!-- This button appears when the player in the lead does not have a vanity name  -->\r\n\t\t\t\t<a href="javascript:void(0)" if={!$this.playerIsLeader && !$this.gracePeriod && JUST.Cache.currentRound[8] ==  "0x0000000000000000000000000000000000000000000000000000000000000000"} class="buyOneTicket btn btn-lg btn-block btn-blu pulse marginb">\r\n\t\t\t\t<div class=row>t\r\n\t\t\t\t\t<div class=col-sm-1.5 style="padding-left: 10px">\r\n\t\t\t\t\t 1x <i class="fas fa-key"></i>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=col-sm-11>\r\n\t\t\t\t\t{memes.buyButtonMessageAnon[Math.floor(memes.buyButtonMessageAnon.length * Math.random()) - 1].replace(/\\$player/g, JUST.Bridges.Browser.web3.utils.toAscii(JUST.Cache.currentRound[8]))}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t</a>\r\n\t\t\t\t\r\n\t\t</div>\r\n\t\t<!--\r\n\t\t<div class="grid-container">\r\n\t\t\t<div class="grid-bottom"></div>\t\r\n\t\t</div>\r\n\t\t-->\r\n\t</div>\r\n\t<div class="jumbotron rounded-0 text-center text-light teaser-cover marginb" if={$this.roundHasPassed}>\r\n\t<div class="container">\r\n\t\r\n\t\r\n\t<!-- Grouped up into elements w/ conditionals per winner or not winning case -->\r\n\t\t<h1 class="display-1 scammed" if={$this.playerIsLeader}>本局结束</h1>\r\n\t\t<h1 class="display-1 scammed" if={!$this.playerIsLeader}>本局结束</h1>\r\n\t\t\r\n\t\t\r\n\t\t<!-- Eth Amount -->\r\n\t\t<h2 class="display-3"><span class="ethglitch titleglow">{BN(JUST.Cache.currentRound[5]).div(1e18).toFixed(4)} <i class="fab fa-ethereum ethglow"></i></span> <span class="headtimer" if={!$this.playerIsLeader}><a href="javascript:void(0)">{(JUST.Cache.currentRound[8] && JUST.Cache.currentRound[8] !=  "0x0000000000000000000000000000000000000000000000000000000000000000" ? JUST.Bridges.Browser.web3.utils.toAscii(JUST.Cache.currentRound[8]) : JUST.Cache.currentRound[7].substr(0, 10).concat("..."))}</a>抽走收益</span></h2>\r\n\t\r\n\t\t<!-- Custom RNG winner text -->\r\n\t\t<h6 class="display-5 scammed" if={!$this.gracePeriod && $this.playerIsLeader}>你获得了将近50%，还能分享剩余的部分</h6>\r\n\t\t<h6 class="display-5 scammed" if={$this.gracePeriod && $this.playerIsLeader}>You got about 50%, and shared the rest</h6>\r\n\t\t<h6 class="display-5 scammed titlepopoutrightmini" if={$this.playerIsLeader}><i>{memes.exitScamTheft[Math.floor(memes.exitScamTheft.length * Math.random()) - 1]}</i></h6>\r\n\t  \r\n\t\t<div style="position: relative;">\r\n\t\t  <h3 class="display-5" style="margin-top:50px;"><strong>{BN(JUST.Cache.currentRound[5]).div(10).div(1e18).toFixed(5)}</strong> ETH 在新奖金池。 <span style="font-style: italic;"><a class="titlepopoutrightmini">你</a> 想收了它 <span if={$this.playerIsLeader}>呵...</span> 对吗?</span></h3>\r\n\t\t  \r\n\t\t \r\n\t\t <!-- This button appears when an exit scam has finished, and a new ICO phase needs to start -->\r\n\t\t<a href="javascript:void(0)" class=" buyOneTicket btn btn-lg btn-block btn-blu pulse-blu marginb">\r\n\t\t\t<div class=row>\r\n\t\t\t\t\t<div class=col-sm-1.5 style="padding-left: 10px">\r\n\t\t\t\t\t 1x <i class="fas fa-key"></i>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=col-sm-11>\r\n\t\t\t\t\t开启你的梦幻之旅\r\n\t\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</a>\r\n\t\t\r\n\t\t\r\n\t\t</div>\r\n\t  </div>\r\n\t</div>\r\n\t</div>\r\n\t<!-- /fomo -->\r\n\t<div class="container" style="margin-top:-1rem;">\r\n\t\t<div class="row cta-ticket" style="margin-top:-5rem;">\r\n\t\t\t<div class="col">\r\n\t\t\t\t<div class="alert alert-purp pulse-blu text-center text-light" role="alert">Buy a key to start a new ICO</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class="row" if={$this.gracePeriod}>\r\n\t\t\t<div class="col-md-3 no-mobile">\r\n\t\t\t\t\r\n\t\t\t</div>\r\n\t\t\t<!-- biddings & vault -->\r\n\t\t\t<div class="col-sm">\r\n\r\n\t\t\t\t<ul class="nav nav-tabs tabs-border-adjust" id="buyTabs" role="tablist">\r\n\t\t\t\t  <li class="nav-item tab-item">\r\n\t\t\t\t    <a class="nav-link tab-link active" id="purchaseTab" data-toggle="tab" href="#purchaseArea" role="tab" aria-controls="purchaseArea" aria-selected="true">ICO</a>\r\n\t\t\t\t  </li>\r\n\t\t\t\t  <li class="nav-item tab-item">\r\n\t\t\t\t    <a class="nav-link tab-link" id="vaultTab" data-toggle="tab" href="#vaultArea" role="tab" aria-controls="vaultArea" aria-selected="false">Vault</a>\r\n\t\t\t\t  </li>\r\n\t\t\t\t  <li class="nav-item tab-item">\r\n\t\t\t\t    <a class="nav-link tab-link" id="refTab" data-toggle="tab" href="#refArea" role="tab" aria-controls="refArea" aria-selected="false">Vanity &amp; Referrals</a>\r\n\t\t\t\t  </li>\r\n\t\t\t\t</ul>\r\n\t\t\t\t<div class="tab-content" id="buyArea">\r\n\t\t\t\t<!-- biddings -->\r\n\t\t\t\t<div class="tab-pane fade show active" id="purchaseArea" role="tabpanel" aria-labelledby="purchaseArea">\r\n\t\t\t\t\t<div class="jumbotron jumbotron-adjust text-light bg-dark jumboshade tab-rounded">\r\n\t\t\t\t\t\t<div class="row">\r\n\t\t\t\t\t\t\t<div class="col">\r\n\t\t\t\t\t\t\t\t<p class="lead nomarginb">Initial Con Offering</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class="col-auto">\r\n\t\t\t\t\t\t\t\t<p class="text-right nomarginb tutorial">\r\n\t\t\t\t\t\t\t\t\t<i class="fas fa-arrow-right pulsetutorial tutorialArrow"></i>\r\n\t\t\t\t\t\t\t\t\t<a tabindex="0" type="button" class="qbtn" role="button" data-toggle="popover" data-trigger="focus" data-html="true" data-placement="bottom" title="juster maek fun text pls" data-content="{popover.ico}">\r\n\t\t\t\t\t\t\t\t\t<i class="far fa-question-circle"></i>\r\n\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<hr>\r\n\t\t\t\t\t\t<!-- ICO Purchase -->\r\n\t\t\t\t\t\t<div class="row">\r\n\t\t\t\t\t\t<div class="col text-center">\r\n\t\t\t\t\t\t\t\t<p class="small">You do want a share of the scheme, right?</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class="row marginb">\r\n\t\t\t\t\t\t  <div class="col">\r\n\t\t\t\t\t\t\t<div id="purchase" class="tab-pane fade show active" role="tabpanel">\r\n\t\t\t\t\t\t\t<div class="row" id="purchase">\r\n\t\t\t\t\t\t\t  <div class="col">\r\n\t\t\t\t\t\t\t\t<div class="input-group mb-3">\r\n\t\t\t\t\t\t\t\t  <div class="input-group-prepend">\r\n\t\t\t\t\t\t\t\t\t<span class="input-group-text">\r\n\t\t\t\t\t\t\t\t\t  <i class="fab fa-ethereum"></i>\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t  </div>\r\n\t\t\t\t\t\t\t\t  <input type="text" id="ethToSpend" class="form-control text-center" value="0.01 ETH">\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t  </div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class="row" style="position: relative;">\r\n\t\t\t\t\t\t\t  <div class="col">\r\n\t\t\t\t\t\t\t\t<button type="button" id="ethSpend" class="btn btn-block btn-blu btn-lg ticketProcess"><i class="fab fa-ethereum"></i> 发送以太</button>\r\n\t\t\t\t\t\t\t  </div>\r\n\t\t\t\t\t\t\t  <div class="col">\r\n\t\t\t\t\t\t\t\t<button type="button" id="ethReinvest" class="btn btn-block btn-outline-blu btn-lg ticketProcess"><i class="fas fa-piggy-bank"></i> 使用收益</button>\r\n\t\t\t\t\t\t\t  </div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t  </div>\r\n\t\t\t\t\t\t  </div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<hr>\r\n\t\t\t\t\t\t<div class="row marginb">\r\n\t\t\t\t\t\t\t<div class="col">\r\n\t\t\t\t\t\t\t\t<p class="lead nomarginb">Choose a Team</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class="col-auto">\r\n\t\t\t\t\t\t\t\t<p class="text-right nomarginb tutorial">\r\n\t\t\t\t\t\t\t\t<i class="fas fa-arrow-right pulsetutorial tutorialArrow"></i>\r\n\t\t\t\t\t\t\t\t\t<a tabindex="0" type="button" class="qbtn" role="button" data-toggle="popover" data-trigger="focus" data-html="true" data-placement="bottom" title="Pick where the Eth Goes!" data-content="{popover.teamselect}"><i class="far fa-question-circle"></i></a></p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\t\t\t\r\n\t\t\t\t\t\t<div class="row marginb distribution">\r\n\t\t\t\t\t\t\t<div class="col">\r\n\t\t\t\t\t\t\t\t<div class="row">\r\n\t\t\t\t\t\t\t\t\t<div class="col-3 team">\r\n\t\t\t\t\t\t\t\t\t\t<label class="teamselector">\r\n\t\t\t\t\t\t\t\t\t\t\t<input class="form-check-input form-radio teamsave" type="radio" autocomplete="off" name="teamselect" value="2" id="teamsnek">\r\n\t\t\t\t\t\t\t\t\t\t\t<img src="/img/tsnek.png" alt="">\r\n\t\t\t\t\t\t\t\t\t\t\t<h5>Snek</h5>\r\n\t\t\t\t\t\t\t\t\t\t\t<p>Trickle down Divinomics</p>\r\n\t\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t<p style="color:#2ecc71">++ Most dividends</p>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div class="col-3 team">\r\n\t\t\t\t\t\t\t\t\t\t<label class="teamselector">\r\n\t\t\t\t\t\t\t\t\t\t\t<input class="form-check-input form-radio teamsave" type="radio" autocomplete="off" name="teamselect" value="0" id="teamwhale">\r\n\t\t\t\t\t\t\t\t\t\t\t<img src="/img/twhale.png" alt="">\r\n\t\t\t\t\t\t\t\t\t\t\t<h5>Whale</h5>\r\n\t\t\t\t\t\t\t\t\t\t\t<p>Feed on the greed of others.</p>\r\n\t\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t\t<p style="color:#2ecc71">++ Most eth to pot</p>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div class="col-3 team">\r\n\t\t\t\t\t\t\t\t\t\t<label class="teamselector">\r\n\t\t\t\t\t\t\t\t\t\t\t<input class="form-check-input form-radio teamsave" type="radio" autocomplete="off" name="teamselect" value="3" id="teambull">\r\n\t\t\t\t\t\t\t\t\t\t\t<img src="/img/tbull.png" alt="">\r\n\t\t\t\t\t\t\t\t\t\t\t<h5>Bull</h5>\r\n\t\t\t\t\t\t\t\t\t\t\t<p>Break upwards, never stagnate.</p>\r\n\t\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t\t<p style="color:#2ecc71">+ Balanced distribution</p>\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div class="col-3 team">\r\n\t\t\t\t\t\t\t\t\t\t<label class="teamselector">\r\n\t\t\t\t\t\t\t\t\t\t\t<input class="form-check-input form-radio teamsave" type="radio" autocomplete="off" name="teamselect" value="1" id="teambear">\r\n\t\t\t\t\t\t\t\t\t\t\t<img src="/img/tbear.png" alt="">\r\n\t\t\t\t\t\t\t\t\t\t\t<h5>Bear</h5>\r\n\t\t\t\t\t\t\t\t\t\t\t<p>Stand alone, fight alone.</p>\r\n\t\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t\t<p style="color:#2ecc71">++ Maximize eth to current round</p>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div class="row">\r\n\t\t\t\t\t\t\t\t\t<div class="col">\r\n\t\t\t\t\t\t\t\t\t\t<div class="chart"></div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<!--<p class="small text-center">Your purchase will extend the game by a total of <span class="extender">NaN</span> Minutes.</p> -->\t\t\t\t\t\t\t\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<!-- /biddings -->\t\r\n\t\t\t\t<!-- vault -->\r\n\t\t\t\t<div class="tab-pane fade" id="vaultArea" role="tabpanel" aria-labelledby="vaultArea">\r\n\t\t\t\t\t<div class="jumbotron jumbotron-adjust text-light bg-dark jumboshade tab-rounded">\r\n\t\t\t\t\t\t<div class="row">\r\n\t\t\t\t\t\t  <div class="col">\r\n\t\t\t\t\t\t\t<p class="lead nomarginb">Vault</p>\r\n\t\t\t\t\t\t  </div>\r\n\t\t\t\t\t\t  <div class="col-auto">\r\n\t\t\t\t\t\t\t<p class="text-right nomarginb tutorial">\r\n\t\t\t\t\t\t\t\t<i class="fas fa-arrow-right pulsetutorial tutorialArrow"></i>\r\n\t\t\t\t\t\t\t<a tabindex="0" type="button" class="qbtn" role="button" data-toggle="popover" data-trigger="focus" data-html="true" data-placement="bottom" title="Vault 77: Where you keep the puppets" data-content="{popover.vault}">\r\n\t\t\t\t\t\t\t<i class="far fa-question-circle"></i>\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t  </div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<hr>\r\n\t\t\t\t\t\t<div class="jumbotron jumbotron-adjust teamscore">\r\n\t\t\t\t\t\t<!--  <div class="row">\r\n\t\t\t\t\t\t\t<div class="col">\r\n\t\t\t\t\t\t\t  <p class="lead">Winning Pot (Unused)</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class="col">\r\n\t\t\t\t\t\t\t  <p class="h3 text-right">{(JUST.Bridges.Metamask && JUST.Bridges.Metamask.signedIn && JUST.Cache.currentPlayer && JUST.Cache.currentPlayer.Vaults) ? BN(JUST.Cache.currentPlayer.Vaults[0]).div(1e18).toFixed(4) : BN(0).toFixed(4)} ETH</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t  </div> -->\r\n\t\t\t\t\t\t  <div class="row">\r\n\t\t\t\t\t\t\t<div class="col">\r\n\t\t\t\t\t\t\t  <p class="lead">Exit Scammed</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class="col">\r\n\t\t\t\t\t\t\t  <p class="h3 text-right">{(JUST.Bridges.Metamask && JUST.Bridges.Metamask.signedIn && JUST.Cache.currentPlayer && JUST.Cache.currentPlayer.Vaults) ? BN(JUST.Cache.currentPlayer.Vaults[1]).plus(JUST.Cache.currentPlayer.Vaults[0]).div(1e18).toFixed(4) : BN(0).toFixed(4)} ETH</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t  </div>\r\n\t\t\t\t\t\t  <div class="row">\r\n\t\t\t\t\t\t\t<div class="col">\r\n\t\t\t\t\t\t\t  <p class="lead">邀请奖励</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class="col">\r\n\t\t\t\t\t\t\t  <p class="h3 text-right">{(JUST.Bridges.Metamask && JUST.Bridges.Metamask.signedIn && JUST.Cache.currentPlayer && JUST.Cache.currentPlayer.Vaults) ? BN(JUST.Cache.currentPlayer.Vaults[2]).div(1e18).toFixed(4) : BN(0).toFixed(4)} ETH</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t  </div>\r\n\t\t\t\t\t\t  <hr>\r\n\t\t\t\t\t\t  <div class="row">\r\n\t\t\t\t\t\t\t<div class="col">\r\n\t\t\t\t\t\t\t  <p class="lead">总收益</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class="col">\r\n\t\t\t\t\t\t\t  <p class="h3 text-right glow">{(JUST.Bridges.Metamask && JUST.Bridges.Metamask.signedIn && JUST.Cache.currentPlayer && JUST.Cache.currentPlayer.Vaults) ? BN(JUST.Cache.currentPlayer.Vaults[0]).plus(JUST.Cache.currentPlayer.Vaults[1]).plus(JUST.Cache.currentPlayer.Vaults[2]).div(1e18).toFixed(4) : BN(0).toFixed(4)} ETH</p>\r\n\t\t\t\t\t\t\t  <p class="text-right">&#8793; {BN(JUST.Cache.currentPlayer.Vaults[0]).plus(JUST.Cache.currentPlayer.Vaults[1]).plus(JUST.Cache.currentPlayer.Vaults[2]).div(1e18).multipliedBy(JUST.Cache.fiatRatios.USD).toFixed(5)} USDT</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t  </div>\r\n\t\t\t\t\t\t  <div class="row">\r\n\t\t\t\t\t\t\t<div class="col">\r\n\t\t\t\t\t\t\t\t<p class="text-right nomarginb"><button href="" class="btn btn-outline-blu btn-block" id="withdrawEarnings"><i class="fas fa-hand-holding-heart"></i> Withdraw</button></p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t  </div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<!-- /vault -->\r\n\r\n\t\t\t\t<!-- vanity -->\r\n\t\t\t\t<div class="tab-pane fade" id="refArea" role="tabpanel" aria-labelledby="refArea">\r\n\t\t\t\t\t<div class="jumbotron jumbotron-adjust text-light bg-dark jumboshade tab-rounded">\r\n\t\t\t\t\t\t<div class="row">\r\n\t\t\t\t\t\t  <div class="col">\r\n\t\t\t\t\t\t\t<p class="lead nomarginb">Advisory Board</p>\r\n\t\t\t\t\t\t  </div>\r\n\t\t\t\t\t\t  <div class="col-auto">\r\n\t\t\t\t\t\t\t<p class="text-right nomarginb tutorial">\r\n\t\t\t\t\t\t\t\t<i class="fas fa-arrow-right pulsetutorial tutorialArrow"></i>\r\n\t\t\t\t\t\t\t<a tabindex="0" type="button" class="qbtn" role="button" data-toggle="popover" data-trigger="focus" data-html="true" data-placement="bottom" title="Probably Bribery" data-content="{popover.referral}">\r\n\t\t\t\t\t\t\t<i class="far fa-question-circle"></i>\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t  </div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<hr>\r\n\t\t\t\t\t\t<div class="jumbotron jumbotron-adjust teamscore">\r\n\t\t\t\t\t\t\t<div class="row" if={!$this.isCEO}>\r\n\t\t\t\t\t\t\t\t<div class="col">\r\n\t\t\t\t\t\t\t\t<p>Register a unique name, and unlock the referral system permanently.</p>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class="row" if={!$this.isCEO}>\r\n\t\t\t\t\t\t\t\t<div class="col">\r\n\t\t\t\t\t\t\t\t\t<button href="" class="btn btn-blu btn-block buyceo"><i class="fas fa-check"></i> Register a name to use on the Leaderboard/Referrals</button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t  </div>\r\n\t\t\t\t\t\t\t<div class="row" if={$this.isCEO}>\r\n\t\t\t\t\t\t\t\t<div class="col">\r\n\t\t\t\t\t\t\t\t\t<p class="font-weight-light">通过链接邀请其他人购买key，可以得到所花费ETH 15%的分成。</p>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class="row" if={$this.isCEO}>\r\n\t\t\t\t\t\t\t\t<div class="col text-center">\r\n\t\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\t\t<span>钱包地址推荐</span><br>\r\n\t\t\t\t\t\t\t\t\t\t<span class="small" id="ceolink">{$this.myLink}</span><br>\r\n\t\t\t\t\t\t\t\t\t\t<button class="btn btn-outline-blu" id="copyCeoLink" data-clipboard-target="#ceolink"}>\r\n\t\t\t\t\t\t\t\t\t\t<i class="fas fa-paste"></i> 复制</button>\r\n\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\t\t<span>匿名推荐</span><br>\r\n\t\t\t\t\t\t\t\t\t\t<span class="small" id="ceolinkid">{$this.myLinkid}</span><br>\r\n\t\t\t\t\t\t\t\t\t\t<button class="btn btn-outline-blu" id="copyCeoLink" data-clipboard-target="#ceolinkid"}>\r\n\t\t\t\t\t\t\t\t\t\t<i class="fas fa-paste"></i> 复制</button>\r\n\r\n\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\t\t<span>用户名推荐</span><br>\r\n\t\t\t\t\t\t\t\t\t\t<span class="small" id="ceolinkvanity">{$this.myLinkName}</span><br>\r\n\t\t\t\t\t\t\t\t\t\t<button class="btn btn-outline-blu" id="copyCeoLink" data-clipboard-target="#ceolinkvanity"}>\r\n\t\t\t\t\t\t\t\t\t\t<i class="fas fa-paste"></i> 复制</button>\r\n\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class="row" if={$this.isCEO}>\r\n\t\t\t\t\t\t\t\t<div class="col">\r\n\t\t\t\t\t\t\t\t\t<button href="" class="btn btn-outline-blu btn-block buyceo"><i class="fas fa-check"></i> 注册一个新推荐名</button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t\t<!-- /vanity -->\r\n\t\t<div class="col-md-3 no-mobile">\r\n\t\t\t\t\r\n\t\t</div>\t\r\n\t\t</div>\r\n\t\t<div class="row" if={!$this.gracePeriod}>\r\n\t\t\t<!-- biddings & vault -->\r\n\t\t\t<div class="col-sm">\r\n\r\n\t\t\t\t<ul class="nav nav-tabs tabs-border-adjust" id="buyTabs" role="tablist">\r\n\t\t\t\t  <li class="nav-item tab-item">\r\n\t\t\t\t    <a class="nav-link tab-link active" id="purchaseTab" data-toggle="tab" href="#purchaseArea" role="tab" aria-controls="purchaseArea" aria-selected="true">Purchase</a>\r\n\t\t\t\t  </li>\r\n\t\t\t\t  <li class="nav-item tab-item">\r\n\t\t\t\t    <a class="nav-link tab-link" id="vaultTab" data-toggle="tab" href="#vaultArea" role="tab" aria-controls="vaultArea" aria-selected="false">Vault</a>\r\n\t\t\t\t  </li>\r\n\t\t\t\t  <li class="nav-item tab-item">\r\n\t\t\t\t    <a class="nav-link tab-link" id="refTab" data-toggle="tab" href="#refArea" role="tab" aria-controls="refArea" aria-selected="false">Vanity &amp; Referrals</a>\r\n\t\t\t\t  </li>\r\n\t\t\t\t</ul>\r\n\t\t\t\t<div class="tab-content" id="buyArea">\r\n\t\t\t\t<!-- biddings -->\r\n\t\t\t\t<div class="tab-pane fade show active" id="purchaseArea" role="tabpanel" aria-labelledby="purchaseArea">\r\n\t\t\t\t\t<div class="jumbotron jumbotron-adjust text-light bg-dark jumboshade tab-rounded">\r\n\t\t\t\t\t\t<div class="row">\r\n\t\t\t\t\t\t\t<div class="col" if={!$this.roundHasPassed}>\r\n\t\t\t\t\t\t\t\t<p class="lead nomarginb">Keyring</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class="col" if={$this.roundHasPassed}>\r\n\t\t\t\t\t\t\t\t<p class="lead nomarginb">预 ICO 阶段</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class="col-auto">\r\n\t\t\t\t\t\t\t\t<p class="text-right nomarginb tutorial">\r\n\t\t\t\t\t\t\t\t\t<i class="fas fa-arrow-right pulsetutorial tutorialArrow"></i>\r\n\t\t\t\t\t\t\t\t\t<a tabindex="0" type="button" class="qbtn" role="button" data-toggle="popover" data-trigger="focus" data-html="true" data-placement="bottom" title="Exit Scams and You!" data-content="{popover.purchaselong}">\r\n\t\t\t\t\t\t\t\t\t<i class="far fa-question-circle"></i>\r\n\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<hr>\r\n\t\t\t\t\t\t<!-- Ticket Purchase -->\r\n\t\t\t\t\t\t<!-- NOTE: Ticket purchase should update the ETH value to how much is actually going to be paid by the player, as well as update the time limit extension (NaN Minutes) accordingly -->\r\n\t\t\t\t\t\t<div class="row">\r\n\t\t\t\t\t\t  <div class="col">\r\n\t\t\t\t\t\t\t<div id="purchase" class="tab-pane fade show active" role="tabpanel">\r\n\t\t\t\t\t\t\t<p class="font-weight-light small" if={!$this.roundHasPassed} id ="airdrop_chance">{JUST.Cache.airdropTracker}% chance to snag some Eth from the Airdrop pot with your next purchase with at least .1<i class="fab fa-ethereum"></i>! <br></p>\r\n\t\t\t\t\t\t\t<p class="text-center" if={$this.roundHasPassed}>Send ETH to start the next ICO</p>\r\n\t\t\t\t\t\t\t<div class="row" id="purchase" if={!$this.roundHasPassed}>\r\n\t\t\t\t\t\t\t  <div class="col">\r\n\t\t\t\t\t\t\t\t<div class="input-group mb-3">\r\n\t\t\t\t\t\t\t\t  <div class="input-group-prepend">\r\n\t\t\t\t\t\t\t\t\t<span class="input-group-text">\r\n\t\t\t\t\t\t\t\t\t  <i class="fas fa-key"></i>\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t  </div>\r\n\t\t\t\t\t\t\t\t  <input type="text" id="tixToBuy" class="form-control text-center" value="1 Key">\r\n\t\t\t\t\t\t\t\t  <div class="input-group-append">\r\n\t\t\t\t\t\t\t\t\t<span class="input-group-text" id="tixQuotation">\r\n\t\t\t\t\t\t\t\t\t  @ {BN(JUST.Cache.currentRound[3]).div(1e18).toFixed(8)} ETH\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t  </div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t  </div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class="row" if={$this.roundHasPassed}>\r\n\t\t\t\t\t\t\t\t<div class="col">\r\n\t\t\t\t\t\t\t\t\t<div id="purchase" class="tab-pane fade show active" role="tabpanel">\r\n\t\t\t\t\t\t\t\t\t\t<div class="row" id="purchase">\r\n\t\t\t\t\t\t\t\t\t\t  <div class="col">\r\n\t\t\t\t\t\t\t\t\t\t\t<div class="input-group mb-3">\r\n\t\t\t\t\t\t\t\t\t\t\t  <div class="input-group-prepend">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span class="input-group-text">\r\n\t\t\t\t\t\t\t\t\t\t\t\t  <i class="fab fa-ethereum"></i>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t  </div>\r\n\t\t\t\t\t\t\t\t\t\t\t  <input type="text" id="ethToSpend" class="form-control text-center" value="0.01 ETH">\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t  </div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class="row marginb" if={!$this.roundHasPassed}>\r\n\t\t\t\t\t\t\t  <div class="col">\r\n\t\t\t\t\t\t\t\t<div class="btn-group d-flex" role="group">\r\n\t\t\t\t\t\t\t\t  <button id="addOne" class="btn btn-outline-yel w-100 increment">+ 1 Key</button>\r\n\t\t\t\t\t\t\t\t  <button id="addTwo" class="btn btn-outline-yel w-100 increment">+ 2 Keys</button>\r\n\t\t\t\t\t\t\t\t  <button id="addFive" class="btn btn-outline-yel w-40 increment">+ 5</button>\r\n\t\t\t\t\t\t\t\t  <button id="addTen" class="btn btn-outline-yel w-30 increment">+ 10</button>\r\n\t\t\t\t\t\t\t\t  <button id="addHundred" class="btn btn-outline-yel w-30 increment">+ 100</button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t  </div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class="row" style="position: relative;"  if={!$this.roundHasPassed}>\r\n\t\t\t\t\t\t\t  <div class="col">\r\n\t\t\t\t\t\t\t\t<button type="button" id="tixBuy" class="btn btn-block btn-blu btn-lg ticketProcess"><i class="fab fa-ethereum"></i> 发送以太</button>\r\n\t\t\t\t\t\t\t  </div>\r\n\t\t\t\t\t\t\t  <div class="col">\r\n\t\t\t\t\t\t\t\t<button type="button" id="tixReinvest" class="btn btn-block btn-outline-blu btn-lg ticketProcess"><i class="fas fa-piggy-bank"></i> 使用收益</button>\r\n\t\t\t\t\t\t\t  </div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class="row" style="position: relative;"  if={$this.roundHasPassed}>\r\n\t\t\t\t\t\t\t  <div class="col">\r\n\t\t\t\t\t\t\t\t<button type="button" id="ethSpend" class="btn btn-block btn-blu btn-lg ticketProcess"><i class="fab fa-ethereum"></i> 发送以太</button>\r\n\t\t\t\t\t\t\t  </div>\r\n\t\t\t\t\t\t\t  <div class="col">\r\n\t\t\t\t\t\t\t\t<button type="button" id="ethReinvest" class="btn btn-block btn-outline-blu btn-lg ticketProcess"><i class="fas fa-piggy-bank"></i> 使用收益</button>\r\n\t\t\t\t\t\t\t  </div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<p class="small text-center" if={!$this.gracePeriod}>Send eth, or use earnings from your vault!</p>\r\n\t\t\t\t\t\t  </div>\r\n\t\t\t\t\t\t  </div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<!-- Team Selector -->\r\n\t\t\t\t\t\t<hr>\r\n\t\t\t\t\t\t<div class="row marginb">\r\n\t\t\t\t\t\t\t<div class="col">\r\n\t\t\t\t\t\t\t\t<p class="lead nomarginb">Choose a Team</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class="col-auto">\r\n\t\t\t\t\t\t\t\t<p class="text-right nomarginb tutorial">\r\n\t\t\t\t\t\t\t\t<i class="fas fa-arrow-right pulsetutorial tutorialArrow"></i>\r\n\t\t\t\t\t\t\t\t\t<a tabindex="0" type="button" class="qbtn" role="button" data-toggle="popover" data-trigger="focus" data-html="true" data-placement="bottom" title="Pick where the Eth Goes!" data-content="{popover.teamselect}"><i class="far fa-question-circle"></i></a></p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\t\t\t\r\n\t\t\t\t\t\t<div class="row marginb distribution">\r\n\t\t\t\t\t\t\t<div class="col">\r\n\t\t\t\t\t\t\t\t<div class="row">\r\n\t\t\t\t\t\t\t\t\t<div class="col-3 team">\r\n\t\t\t\t\t\t\t\t\t\t<label class="teamselector">\r\n\t\t\t\t\t\t\t\t\t\t\t<input class="form-check-input form-radio teamsave" type="radio" autocomplete="off" name="teamselect" value="2" id="teamsnek">\r\n\t\t\t\t\t\t\t\t\t\t\t<img src="/img/tsnek.png" alt="">\r\n\t\t\t\t\t\t\t\t\t\t\t<h5>Snek</h5>\r\n\t\t\t\t\t\t\t\t\t\t\t<p>Trickle down Divinomics</p>\r\n\t\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t<p style="color:#2ecc71">++ Most dividends</p>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div class="col-3 team">\r\n\t\t\t\t\t\t\t\t\t\t<label class="teamselector">\r\n\t\t\t\t\t\t\t\t\t\t\t<input class="form-check-input form-radio teamsave" type="radio" autocomplete="off" name="teamselect" value="0" id="teamwhale">\r\n\t\t\t\t\t\t\t\t\t\t\t<img src="/img/twhale.png" alt="">\r\n\t\t\t\t\t\t\t\t\t\t\t<h5>Whale</h5>\r\n\t\t\t\t\t\t\t\t\t\t\t<p>Feed on the greed of others.</p>\r\n\t\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t\t<p style="color:#2ecc71">++ Most eth to pot</p>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div class="col-3 team">\r\n\t\t\t\t\t\t\t\t\t\t<label class="teamselector">\r\n\t\t\t\t\t\t\t\t\t\t\t<input class="form-check-input form-radio teamsave" type="radio" autocomplete="off" name="teamselect" value="3" id="teambull">\r\n\t\t\t\t\t\t\t\t\t\t\t<img src="/img/tbull.png" alt="">\r\n\t\t\t\t\t\t\t\t\t\t\t<h5>Bull</h5>\r\n\t\t\t\t\t\t\t\t\t\t\t<p>Break upwards, never stagnate.</p>\r\n\t\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t\t<p style="color:#2ecc71">+ Balanced distribution</p>\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div class="col-3 team">\r\n\t\t\t\t\t\t\t\t\t\t<label class="teamselector">\r\n\t\t\t\t\t\t\t\t\t\t\t<input class="form-check-input form-radio teamsave" type="radio" autocomplete="off" name="teamselect" value="1" id="teambear">\r\n\t\t\t\t\t\t\t\t\t\t\t<img src="/img/tbear.png" alt="">\r\n\t\t\t\t\t\t\t\t\t\t\t<h5>Bear</h5>\r\n\t\t\t\t\t\t\t\t\t\t\t<p>Stand alone, fight alone.</p>\r\n\t\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t\t<p style="color:#2ecc71">++ Maximize eth to current round</p>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div class="row">\r\n\t\t\t\t\t\t\t\t\t<div class="col">\r\n\t\t\t\t\t\t\t\t\t\t<div class="chart"></div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<!-- /Team Selector -->\t\t\r\n\t\t\t\t\t<!--<p class="small text-center">Your purchase will extend the game by a total of <span class="extender">NaN</span> Minutes.</p> -->\t\t\t\t\t\t\t\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<!-- /biddings -->\t\r\n\t\t\t\t<!-- vault -->\r\n\t\t\t\t<div class="tab-pane fade" id="vaultArea" role="tabpanel" aria-labelledby="vaultArea">\r\n\t\t\t\t\t<div class="jumbotron jumbotron-adjust text-light bg-dark jumboshade tab-rounded">\r\n\t\t\t\t\t\t<div class="row">\r\n\t\t\t\t\t\t  <div class="col">\r\n\t\t\t\t\t\t\t<p class="lead nomarginb">Vault</p>\r\n\t\t\t\t\t\t  </div>\r\n\t\t\t\t\t\t  <div class="col-auto">\r\n\t\t\t\t\t\t\t<p class="text-right nomarginb tutorial">\r\n\t\t\t\t\t\t\t\t<i class="fas fa-arrow-right pulsetutorial tutorialArrow"></i>\r\n\t\t\t\t\t\t\t<a tabindex="0" type="button" class="qbtn" role="button" data-toggle="popover" data-trigger="focus" data-html="true" data-placement="bottom" title="Vault 77: Where you keep the puppets" data-content="{popover.vault}">\r\n\t\t\t\t\t\t\t<i class="far fa-question-circle"></i>\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t  </div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<hr>\r\n\t\t\t\t\t\t<div class="jumbotron jumbotron-adjust teamscore">\r\n\t\t\t\t\t\t<!--  <div class="row">\r\n\t\t\t\t\t\t\t<div class="col">\r\n\t\t\t\t\t\t\t  <p class="lead">Winning Pot (Unused)</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class="col">\r\n\t\t\t\t\t\t\t  <p class="h3 text-right">{(JUST.Bridges.Metamask && JUST.Bridges.Metamask.signedIn && JUST.Cache.currentPlayer && JUST.Cache.currentPlayer.Vaults) ? BN(JUST.Cache.currentPlayer.Vaults[0]).div(1e18).toFixed(4) : BN(0).toFixed(4)} ETH</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t  </div> -->\r\n\t\t\t\t\t\t  \r\n\t\t\t\t\t\t\t<div class="row">\r\n\t\t\t\t\t\t\t<div class="col">\r\n\t\t\t\t\t\t\t  <p class="lead">Your Key Value (estimated)</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class="col">\r\n\t\t\t\t\t\t\t<!--\r\n\t\t\t\t\t\t\t  <p class="h6 text-right" style="font-size: .9rem">{(JUST.Bridges.Metamask && JUST.Bridges.Metamask.signedIn) ? ((BN(JUST.Cache.currentPlayer.Round[2]).div(1e18).toFixed(1) : BN(0).toFixed(4)).div(BN(JUST.Cache.currentRound[2]).div(1e18).toFixed(0))).mul((BN(JUST.Cache.currentRound[5]).div(1e18).toFixed(4).div(100)).mul(30))}</p>\r\n\t\t\t\t\t\t\t  -->\r\n\t\t\t\t\t\t\t  <p class="h3 text-right" label=poteth>{(JUST.Bridges.Metamask && JUST.Bridges.Metamask.signedIn) ? (((BN(JUST.Cache.currentRound[5]).div(100).multipliedBy(30)).div(BN(JUST.Cache.currentRound[2]))).multipliedBy(BN(JUST.Cache.currentPlayer.Round[2])).div(1e18).toFixed(4)) : BN(0).toFixed(4)} ETH</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t  </div>\r\n\t\t\t\t\t\t  <div class="row">\r\n\t\t\t\t\t\t\t<div class="col">\r\n\t\t\t\t\t\t\t  <p class="lead">Exit Scammed</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class="col">\r\n\t\t\t\t\t\t\t  <p class="h3 text-right">{(JUST.Bridges.Metamask && JUST.Bridges.Metamask.signedIn && JUST.Cache.currentPlayer && JUST.Cache.currentPlayer.Vaults) ? BN(JUST.Cache.currentPlayer.Vaults[1]).plus(JUST.Cache.currentPlayer.Vaults[0]).div(1e18).toFixed(4) : BN(0).toFixed(4)} ETH</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t  </div>\r\n\t\t\t\t\t\t  <div class="row">\r\n\t\t\t\t\t\t\t<div class="col">\r\n\t\t\t\t\t\t\t  <p class="lead">邀请奖励</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class="col">\r\n\t\t\t\t\t\t\t  <p class="h3 text-right">{(JUST.Bridges.Metamask && JUST.Bridges.Metamask.signedIn && JUST.Cache.currentPlayer && JUST.Cache.currentPlayer.Vaults) ? BN(JUST.Cache.currentPlayer.Vaults[2]).div(1e18).toFixed(4) : BN(0).toFixed(4)} ETH</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t  </div>\r\n\t\t\t\t\t\t  <hr>\r\n\t\t\t\t\t\t  <div class="row">\r\n\t\t\t\t\t\t\t<div class="col">\r\n\t\t\t\t\t\t\t  <p class="lead">总收益</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class="col">\r\n\t\t\t\t\t\t\t  <p class="h3 text-right glow">{(JUST.Bridges.Metamask && JUST.Bridges.Metamask.signedIn && JUST.Cache.currentPlayer && JUST.Cache.currentPlayer.Vaults) ? BN(JUST.Cache.currentPlayer.Vaults[0]).plus(JUST.Cache.currentPlayer.Vaults[1]).plus(JUST.Cache.currentPlayer.Vaults[2]).div(1e18).toFixed(4) : BN(0).toFixed(4)} ETH</p>\r\n\t\t\t\t\t\t\t  <p class="text-right">&#8793; {BN(JUST.Cache.currentPlayer.Vaults[0]).plus(JUST.Cache.currentPlayer.Vaults[1]).plus(JUST.Cache.currentPlayer.Vaults[2]).div(1e18).multipliedBy(JUST.Cache.fiatRatios.USD).toFixed(5)} USDT</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t  </div>\r\n\t\t\t\t\t\t  <div class="row">\r\n\t\t\t\t\t\t\t<div class="col">\r\n\t\t\t\t\t\t\t\t<p class="text-right nomarginb"><button href="" class="btn btn-outline-blu btn-block" id="withdrawEarnings"><i class="fas fa-hand-holding-heart"></i> Withdraw</button></p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t  </div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<!-- /vault -->\r\n\r\n\t\t\t\t<!-- vanity -->\r\n\t\t\t\t<div class="tab-pane fade" id="refArea" role="tabpanel" aria-labelledby="refArea">\r\n\t\t\t\t\t<div class="jumbotron jumbotron-adjust text-light bg-dark jumboshade tab-rounded">\r\n\t\t\t\t\t\t<div class="row">\r\n\t\t\t\t\t\t  <div class="col">\r\n\t\t\t\t\t\t\t<p class="lead nomarginb">Advisory Board</p>\r\n\t\t\t\t\t\t  </div>\r\n\t\t\t\t\t\t  <div class="col-auto">\r\n\t\t\t\t\t\t\t<p class="text-right nomarginb tutorial">\r\n\t\t\t\t\t\t\t\t<i class="fas fa-arrow-right pulsetutorial tutorialArrow"></i>\r\n\t\t\t\t\t\t\t<a tabindex="0" type="button" class="qbtn" role="button" data-toggle="popover" data-trigger="focus" data-html="true" data-placement="bottom" title="Probably Bribery" data-content="{popover.referral}">\r\n\t\t\t\t\t\t\t<i class="far fa-question-circle"></i>\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t  </div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<hr>\r\n\t\t\t\t\t\t<div class="jumbotron jumbotron-adjust teamscore">\r\n\t\t\t\t\t\t\t<div class="row" if={!$this.isCEO}>\r\n\t\t\t\t\t\t\t\t<div class="col">\r\n\t\t\t\t\t\t\t\t<p>Register a unique name, and unlock the referral system permanently.</p>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class="row" if={!$this.isCEO}>\r\n\t\t\t\t\t\t\t\t<div class="col">\r\n\t\t\t\t\t\t\t\t\t<button href="" class="btn btn-blu btn-block buyceo"><i class="fas fa-check"></i> Register a name to use on the Leaderboard/Referrals</button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t  </div>\r\n\t\t\t\t\t\t\t<div class="row" if={$this.isCEO}>\r\n\t\t\t\t\t\t\t\t<div class="col">\r\n\t\t\t\t\t\t\t\t\t<p class="font-weight-light">通过链接邀请其他人购买key，可以得到所花费ETH 15%的分成。</p>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class="row" if={$this.isCEO}>\r\n\t\t\t\t\t\t\t\t<div class="col text-center">\r\n\t\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\t\t<span>钱包地址推荐</span><br>\r\n\t\t\t\t\t\t\t\t\t\t<span class="small" id="ceolink">{$this.myLink}</span><br>\r\n\t\t\t\t\t\t\t\t\t\t<button class="btn btn-outline-blu" id="copyCeoLink" data-clipboard-target="#ceolink"}>\r\n\t\t\t\t\t\t\t\t\t\t<i class="fas fa-paste"></i> 复制</button>\r\n\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\t\t<span>匿名推荐</span><br>\r\n\t\t\t\t\t\t\t\t\t\t<span class="small" id="ceolinkid">{$this.myLinkid}</span><br>\r\n\t\t\t\t\t\t\t\t\t\t<button class="btn btn-outline-blu" id="copyCeoLink" data-clipboard-target="#ceolinkid"}>\r\n\t\t\t\t\t\t\t\t\t\t<i class="fas fa-paste"></i> 复制</button>\r\n\r\n\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\t\t<span>用户名推荐</span><br>\r\n\t\t\t\t\t\t\t\t\t\t<span class="small" id="ceolinkvanity">{$this.myLinkName}</span><br>\r\n\t\t\t\t\t\t\t\t\t\t<button class="btn btn-outline-blu" id="copyCeoLink" data-clipboard-target="#ceolinkvanity"}>\r\n\t\t\t\t\t\t\t\t\t\t<i class="fas fa-paste"></i> 复制</button>\r\n\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class="row" if={$this.isCEO}>\r\n\t\t\t\t\t\t\t\t<div class="col">\r\n\t\t\t\t\t\t\t\t\t<button href="" class="btn btn-outline-blu btn-block buyceo"><i class="fas fa-check"></i> 注册一个新推荐名</button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<!-- /vanity -->\r\n\t\t\t\t</div>\t\t\r\n\t\t\t</div>\r\n\r\n\t\t\t<!-- stat tabs -->\r\n\t\t\t<div class="col-sm">\r\n\t\t\t\t<!-- tabs -->\r\n\t\t\t\t<ul class="nav nav-tabs tabs-border-adjust" id="statTabs" role="tablist">\r\n\t\t\t\t  <li class="nav-item tab-item">\r\n\t\t\t\t    <a class="nav-link tab-link active" id="potTab" data-toggle="tab" href="#potArea" role="tab" aria-controls="potArea" aria-selected="true">Round</a>\r\n\t\t\t\t  </li>\r\n\t\t\t\t  <li class="nav-item tab-item">\r\n\t\t\t\t    <a class="nav-link tab-link" id="teamTab" data-toggle="tab" href="#teamArea" role="tab" aria-controls="teamArea" aria-selected="false">队伍</a>\r\n\t\t\t\t  </li>\r\n\t\t\t\t  <li class="nav-item tab-item">\r\n\t\t\t\t    <a class="nav-link tab-link" id="playerTab" data-toggle="tab" href="#playerArea" role="tab" aria-controls="playerArea" aria-selected="false">最近玩家</a>\r\n\t\t\t\t  </li>\r\n\t\t\t\t</ul>\r\n\r\n\t\t\t\t<!-- tabbable areas -->\r\n\t\t\t\t<div class="tab-content" id="statArea">\r\n\t\t\t\t\t<!-- current pot -->\r\n\t\t\t\t\t<div class="tab-pane fade show active" id="potArea" role="tabpanel" aria-labelledby="potArea">\r\n\r\n\t\t\t\t\t\t<div class="jumbotron jumbotron-adjust text-light bg-dark jumboshade tab-rounded">\r\n\t\t\t\t\t\t\t<div class="row">\r\n\t\t\t\t\t\t\t  <div class="col">\r\n\t\t\t\t\t\t\t\t<p class="lead nomarginb">第 {JUST.Cache.currentRound[1]} 局</p>\r\n\t\t\t\t\t\t\t  </div>\r\n\t\t\t\t\t\t\t  <div class="col-auto">\r\n\t\t\t\t\t\t\t\t<p class="text-right nomarginb tutorial">\r\n\t\t\t\t\t\t\t\t\t<i class="fas fa-arrow-right pulsetutorial tutorialArrow"></i>\r\n\t\t\t\t\t\t\t\t<a tabindex="0" type="button" class="qbtn" role="button" data-toggle="popover" data-trigger="focus" data-html="true" data-placement="bottom" title="Important Box:" data-content="{popover.game}">\r\n\t\t\t\t\t\t\t\t<i class="far fa-question-circle"></i>\r\n\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t  </div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<hr>\r\n\t\t\t\t\t\t\t<div class="row nomarginb margin-top" if={!$this.roundHasPassed}>\r\n\t\t\t\t\t\t\t\t<div class="col">\r\n\t\t\t\t\t\t\t\t\t<!-- NOTE: Time limit counter -->\r\n\t\t\t\t\t\t\t\t\t<p class="h2 text-center" if={this.playerIsLeader}>本局结束还有 <br><span class="glow boxtimer"></span></p>\r\n\t\t\t\t\t\t\t\t\t<p class="h2 text-center" if={!this.playerIsLeader}>Contract will drain in <br><span class="glow boxtimer"></span></p>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class="row nomarginb margin-top" if={$this.roundHasPassed}>\r\n\t\t\t\t\t\t\t\t<div class="col" style="position: relative;">\r\n\t\t\t\t\t\t\t\t\t<!-- NOTE: Time limit counter -->\r\n\t\t\t\t\t\t\t\t\t<p class="h6 text-center">That eth is just sitting there, what are <a class="titlepopoutrightmini">you</a> waiting for?</p>\r\n\t\t\t\t\t\t\t\t\t  <a style="margin-bottom:40px;" href="javascript:void(0)" class="buyOneTicket btn btn-lg btn-block btn-blu pulse-blu"> Buy one <i class="fas fa-key"></i> Put yourself back in the lead!</a>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class="row marginb" if={!$this.roundHasPassed}>\r\n\t\t\t\t\t\t\t\t<div class="col">\r\n\t\t\t\t\t\t\t\t\t<div class="progress">\r\n\t\t\t\t\t\t\t\t\t\t<div class="progress-bar boxglow" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class="jumbotron jumbotron-adjust teamscore">\r\n\t\t\t\t\t\t\t\t<div class="row nomarginb">\r\n\t\t\t\t\t\t\t\t\t<div class="col-auto">\r\n\t\t\t\t\t\t\t\t\t\t<p class="h4" if={!$this.roundHasPassed}>奖池</p>\r\n\t\t\t\t\t\t\t\t\t\t<p class="h4" if={$this.roundHasPassed}>未分配利润</p>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div class="col">\r\n\t\t\t\t\t\t\t\t\t\t<!-- NOTE: Display of current pot size as well as converted USDT value -->\r\n\t\t\t\t\t\t\t\t\t\t<p class="h2 text-right glow ethglitch" if={!$this.roundHasPassed}>{BN(JUST.Cache.currentRound[5]).div(1e18).toFixed(2)} <i class="fab fa-ethereum ethglow"></i></p>\r\n\t\t\t\t\t\t\t\t\t\t<p class="h2 text-right glow ethglitch" if={$this.roundHasPassed}>{BN(JUST.Cache.currentRound[5]).div(1e19).toFixed(5)} <i class="fab fa-ethereum ethglow"></i></p>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div class="row marginb">\r\n\t\t\t\t\t\t\t\t\t<div class="col text-right"  if={!$this.roundHasPassed}>&#8793; {BN(JUST.Cache.currentRound[5]).div(1e18).multipliedBy(JUST.Cache.fiatRatios.USD).toFixed(5)} USDT</div>\r\n\t\t\t\t\t\t\t\t\t<div class="col text-right"  if={$this.roundHasPassed}>&#8793; {BN(JUST.Cache.currentRound[5]).div(1e19).multipliedBy(JUST.Cache.fiatRatios.USD).toFixed(5)} USDT</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div class="row nomarginb"  if={!$this.roundHasPassed}>\r\n\t\t\t\t\t\t\t\t\t<div class="col">\r\n\t\t\t\t\t\t\t\t\t  <p class="h4">key数量</p>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div class="col">\r\n\t\t\t\t\t\t\t\t\t  <p class="h2 text-right">{(JUST.Bridges.Metamask && JUST.Bridges.Metamask.signedIn) ? BN(JUST.Cache.currentPlayer.Round[2]).div(1e18).toFixed(1) : BN(0).toFixed(4)} <i class="fas fa-key"></i></p>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t  \t<div class="row marginb" if={!$this.roundHasPassed}>\r\n\t\t\t\t\t\t\t\t\t<div class="col text-right">共 {BN(JUST.Cache.currentRound[2]).div(1e18).toFixed(0)} Keys</div>\r\n\t\t\t\t\t\t\t  \t</div>\r\n\t\t\t\t\t\t\t  \t<div class="row nomarginb">\r\n\t\t\t\t\t\t\t\t\t<div class="col">\r\n\t\t\t\t\t\t\t\t\t  <p class="h4">你的收益</p>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div class="col">\r\n\t\t\t\t\t\t\t\t\t  <p class="h2 text-right">{(JUST.Bridges.Metamask && JUST.Bridges.Metamask.signedIn) ? BN(JUST.Cache.currentPlayer.Vaults[0]).plus(JUST.Cache.currentPlayer.Vaults[1]).plus(JUST.Cache.currentPlayer.Vaults[2]).div(1e18).toFixed(4) : BN(0).toFixed(4)} <i class="fab fa-ethereum"></i></p>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div class="row marginb">\r\n\t\t\t\t\t\t\t\t\t<div class="col text-right">\r\n\t\t\t\t\t\t\t\t\t\t&#8793; {BN(JUST.Cache.currentPlayer.Vaults[0]).plus(JUST.Cache.currentPlayer.Vaults[1]).plus(JUST.Cache.currentPlayer.Vaults[2]).div(1e18).multipliedBy(JUST.Cache.fiatRatios.USD).toFixed(5)} USDT\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t  \t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<!-- /current pot -->\r\n\t\t\t\t\t\r\n\t\t\t\t\t<!-- teams -->\r\n\t\t\t\t\t<div class="tab-pane fade" id="teamArea" role="tabpanel" aria-labelledby="teamArea">\r\n\t\t\t\t\t\t<div class="jumbotron jumbotron-adjust text-light bg-dark jumboshade tab-rounded">\r\n\t\t\t\t\t\t\t<div class="row">\r\n\t\t\t\t\t\t  \t\t<div class="col">\r\n\t\t\t\t\t\t\t\t\t<p class="lead nomarginb">Teams</p>\r\n\t\t\t\t  \t\t\t\t</div>\r\n\t\t\t\t\t  \t\t\t<div class="col-auto">\r\n\t\t\t\t\t\t\t\t\t<p class="text-right nomarginb tutorial">\r\n\t\t\t\t\t\t\t\t\t<i class="fas fa-arrow-right pulsetutorial tutorialArrow"></i>\r\n\t\t\t\t\t\t\t\t\t<a tabindex="0" type="button" class="qbtn" role="button" data-toggle="popover" data-trigger="focus" data-html="true" data-placement="bottom" title="Pick a team, get angry at those not on your team." data-content="{popover.teams}">\r\n\t\t\t\t\t\t\t\t\t\t<i class="far fa-question-circle"></i>\r\n\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t  \t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class="row">\r\n\t\t\t\t\t\t\t\t<div class="col">\r\n\t\t\t\t\t\t\t\t\t<div class="jumbotron jumbotron-adjust text-center teamscore">\r\n\t\t\t\t\t\t\t\t\t\t<p class="lead">蓝鲸队</p>\r\n\t\t\t\t\t\t最近玩家t\t\t\t<img src="../img/twhale.png" width="25%"</img>\r\n\t\t\t\t\t\t\t\t\t\t<hr>\r\n\t\t\t\t\t\t\t\t\t\t<p class="glow-yel">{BN(JUST.Cache.currentRound[9]).div(1e18).toFixed(4)} ETH</p>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div class="col">\r\n\t\t\t\t\t\t\t\t\t<div class="jumbotron jumbotron-adjust text-center\tteamscore">\r\n\t\t\t\t\t\t\t\t\t\t<p class="lead">懒熊队</p>\r\n\t\t\t\t\t\t\t\t\t\t<img src="../img/tbear.png" width="25%"</img>\r\n\t\t\t\t\t\t\t\t\t\t<hr>\r\n\t\t\t\t\t\t\t\t\t\t<p class="glow-yel">{BN(JUST.Cache.currentRound[10]).div(1e18).toFixed(4)} ETH</p>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class="row">\r\n\t\t\t\t\t\t\t\t<div class="col">\r\n\t\t\t\t\t\t\t\t\t<div class="jumbotron jumbotron-adjust text-center\tteamscore">\r\n\t\t\t\t\t\t\t\t\t\t<p class="lead">小牛队</p>\r\n\t\t\t\t\t\t\t\t\t\t<img src="../img/tbull.png" width="25%"</img>\r\n\t\t\t\t\t\t\t\t\t\t<hr>\r\n\t\t\t\t\t\t\t\t\t\t<p class="glow-yel">{BN(JUST.Cache.currentRound[12]).div(1e18).toFixed(4)} ETH</p>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div class="col">\r\n\t\t\t\t\t\t\t\t\t<div class="jumbotron jumbotron-adjust text-center\tteamscore">\r\n\t\t\t\t\t\t\t\t\t\t<p class="lead">玩蛇队</p>\r\n\t\t\t\t\t\t\t\t\t\t<img src="../img/tsnek.png" width="25%"</img>\r\n\t\t\t\t\t\t\t\t\t\t<hr>\r\n\t\t\t\t\t\t\t\t\t\t<p class="glow-yel">{BN(JUST.Cache.currentRound[11]).div(1e18).toFixed(4)} ETH</p>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\t\r\n\t\t\t\t\t<!-- /teams -->\r\n\t\r\n\t\t\t\t\t<!-- recent players -->\r\n\t\t\t\t\t<div class="tab-pane fade" id="playerArea" role="tabpanel" aria-labelledby="playerArea">\r\n\t\t\t\t\t\t<div class="jumbotron jumbotron-adjust text-light bg-dark jumboshade tab-rounded">\r\n\t\t\t\t\t\t\t<div class="row">\r\n\t\t\t\t\t\t\t  <div class="col">\r\n\t\t\t\t\t\t\t\t<p class="lead nomarginb">最近玩家</p>\r\n\t\t\t\t\t\t\t  </div>\r\n\t\t\t\t\t\t\t  <div class="col-auto">\r\n\t\t\t\t\t\t\t\t<p class="text-right nomarginb tutorial">\r\n\t\t\t\t\t\t\t\t\t<i class="fas fa-arrow-right pulsetutorial tutorialArrow"></i>\r\n\t\t\t\t\t\t\t\t<a tabindex="0" type="button" class="qbtn" role="button" data-toggle="popover" data-trigger="focus" data-html="true" data-placement="bottom" title="Like a list of envy:" data-content="{popover.leaderboard}">\r\n\t\t\t\t\t\t\t\t<i class="far fa-question-circle"></i>\r\n\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t  </div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class="row" style="position: relative;">\r\n\t\t\t\t\t\t\t\t<div class="faded" style="position: absolute; z-index: 9; text-align: center; width: 100%; height: 100%; background: #00000085; padding-top: 75px; font-size: 54px;">\r\n\t\t\t\t\t\t\t\t\tComing soon\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div class="col">\r\n\t\t\t\t\t\t\t\t\t<div class="jumbotron jumbotron-adjust teamscore">\r\n\t\t\t\t\t\t\t\t\t\t<!-- NOTE: Displays last 3 ticket buyers along with their chosen team and total amount of ETH spent -->\r\n\t\t\t\t\t\t\t\t\t\t<table class="table">\r\n\t\t\t\t\t\t\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<th scope="col" class="borderchange">Player</th>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<th scope="col" class="borderchange text-center">Team</th>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<th scope="col" class="borderchange tright">Amount</th>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t\t\t\t</thead>\r\n\t\t\t\t\t\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<th scope="row" class="playername truncate">inverate inker</th>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td class="text-center">玩蛇队</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td class="tright">0.0248 ETH</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<th scope="row" class="playername truncate">antic moldmaker</th>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td class="text-center">蓝鲸队</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td class="tright">0.2480 ETH</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<th scope="row" class="playername truncate">harjd laser</th>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td class="text-center">小牛队</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<td class="tright">0.0248 ETH</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t\t\t\t\t\t</table>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\t\t\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<!-- /recent players -->\r\n\r\n\t\t\t\t</div>\r\n\t\t\t\t<!-- /tabbable area -->\r\n\t\t\t</div>\r\n\t\t\t<!-- /stat tabs -->\r\n\r\n\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n\t<!-- modal popup -->\r\n\t<div class="modal fade" id="gameover" tabindex="-1" role="dialog" aria-labelledby="gameoverTitle" aria-hidden="true">\r\n\t\t<div class="modal-dialog modal-dialog-centered" role="document">\r\n\t\t\t<div class="modal-content bg-dark text-light">\r\n\t\t\t\t<div class="modal-header">\r\n\t\t\t\t\t<h5 class="modal-title" id="gameoverTitle">Modal Title</h5>\r\n\t\t\t\t\t<button type="button" class="close" data-dismiss="modal" aria-label="Close">\r\n\t\t\t\t\t\t<span aria-hidden="true">&times;</span>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="modal-body">\r\n\t\t\t\t\tModal Content\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n\t<!-- /modal popup -->\t\r\n\t<div class="modal fade" role="dialog" id="lasttimer" style="margin-top:40vh;">\r\n\t  <div class="modal-dialog" role="document">\r\n\t    <div class="modal-content bg-dark text-light">\r\n\t      <div class="modal-body">\r\n\t      \t<p class="lead text-center">UNLOCKING IN</p>\r\n\t        <h1 class="text-center" id="countdowntime">00:00:00</h1>\r\n\t        <hr>\r\n\t        <p class="text-center">敬请期待<br><br>更多信息即将推出。 定期查看此页面！</p>\r\n\t      </div>\r\n\t      <div class="modal-footer">\r\n\t        <button type="button" class="btn btn-block btn-lg btn-secondary btn-purp" data-dismiss="modal" onclick="window.history.back()">Back</button>\r\n\t      </div>\r\n\t    </div>\r\n\t  </div>\r\n\t</div>\r\n\r\n\t\t<!-- If something breaks delet this script justo made; -->\r\n\t<script>\r\n\t// Contain the popover within the body NOT the element it was called in.\r\n\t\t$(\'[data-toggle="popover"]\').popover({\r\n\t\t\tcontainer: \'body\'\r\n\t\t});\r\n\r\n\t\t$this = this\r\n\t\t$this.refresher = debounce(async () => {\r\n\t\t\tJUST.Cache.currentRound = await JUST.Bridges.Browser.contracts.Fomo3D.read("getCurrentRoundInfo")\r\n\t\t\tclearInterval(window.globalTimerObject)\r\n\t\t\t$this.update()\r\n\t\t}, 500)\r\n\r\n\t\tasync function assemble() {\r\n\t\t\t$this.roundHasPassed = Math.floor( JUST.date().getTime() / 1000) > JUST.Cache.currentRound[3]\r\n\t\t\t$this.playerIsLeader = JUST.Bridges.Metamask && JUST.Bridges.Metamask.signedIn && Math.floor(parseInt(JUST.Cache.currentRound[6]/10)) == parseInt(JUST.Cache.currentPlayer.PID)\r\n\t\t\t$this.playerHasWon = $this.roundHasPassed && $this.playerIsLeader\r\n\t\t\t$this.isCEO = JUST.Bridges.Metamask && JUST.Bridges.Metamask.signedIn && JUST.Cache.currentPlayer && JUST.Cache.currentPlayer.Round && JUST.Cache.currentPlayer.Round[1] !== "0x0000000000000000000000000000000000000000000000000000000000000000"\r\n\t\t\t$this.myLink = $this.isCEO ? `${window.location.origin}/${JUST.Bridges.Metamask.web3.eth.defaultAccount}` : `#`\r\n\t\t\t$this.gracePeriod = Math.floor( JUST.date().getTime() / 1000) < (parseInt(JUST.Cache.currentRound[3]) - 95)\r\n\t\t\t// $this.gracePeriod = true\r\n\t\t\t$this.myLinkid = $this.isCEO ? `${window.location.origin}/${JUST.Cache.currentPlayer.PID.toFixed()}` : `#`\r\n\t\t\t$this.myLinkName = $this.isCEO ? `${window.location.origin}/${JUST.Bridges.Browser.web3.utils.toAscii(JUST.Cache.currentPlayer.Round[1])}` : `#`\r\n\t\t\t$this.myLinkName = $this.myLinkName.replace(/ /g,\'%20\')\r\n\t\t}\r\n\r\n\t\tasync function rewire() {\r\n\r\n\t\t\t$this.timer = new Countdown(1532735940, async (data, expired) => {\r\n\t\t\t\tconsole.log(data)\r\n\t\t\t\tjQuery("#countdowntime").html(`${(data.hours == "00" ? "" : data.hours + ":") }${data.minutes}:${data.seconds}<br><i style="font-style:italic;font-size:23px;">(${Math.floor(data.hours / 24)} days)</i>`)\r\n\t\t\t})\r\n\r\n\t\t\treturn;\r\n\r\n\r\n\t\t\tif($this.isCEO) jQuery(".afflink span").text($this.myLinkName)\r\n\r\n\t\t\t/* Check for graphics quality switch settings\r\n\t\t\tlet sd_mode = localStorage.getItem(\'fancy\')\r\n\t\t\tif(sd_mode && sd_mode == "true"){\r\n\t\t\t\tjQuery("#fancyswitch").prop("checked", false);\r\n\t\t\t\tjQuery(\'#hdgraphics\').toggle();\r\n\t\t\t} else{\r\n\t\t\t\tjQuery("#fancyswitch").prop("checked", true);\r\n\t\t\t}*/\r\n\r\n\t\t\t// Check for tutorial switch settings\r\n\t\t\tif(tutorial_mode != "true"){\r\n\t\t\t\tjQuery(\'.tutorial\').css({"display": "none"});\r\n\t\t\t\tjQuery("#tutorialswitch").prop("checked", false);\r\n\t\t\t}\r\n\r\n\t\t\t // Teamselect localstorage thingy\r\n\t\t\tlet saved_team = localStorage.getItem("team")\r\n\t\t  \tif(saved_team){\r\n\t\t  \t\tif(saved_team == "0"){\r\n\t\t\t\t\tjQuery("#teamsnek").prop("checked", true);\r\n\t\t\t\t}\r\n\t\t\t\tif(saved_team == "1"){\r\n\t\t\t\t\tjQuery("#teamwhale").prop("checked", true);\r\n\t\t\t\t}\r\n\t\t\t\tif(saved_team == "2"){\r\n\t\t\t\t\tjQuery("#teambull").prop("checked", true);\r\n\t\t\t\t}\r\n\t\t\t\tif(saved_team == "3"){\r\n\t\t\t\t\tjQuery("#teambear").prop("checked", true);\r\n\t\t\t\t}\r\n\t\t  \t} else {\r\n\t\t  \t\tjQuery("#teamsnek").prop("checked", true);\r\n\t\t  \t}\r\n\t\t\t\r\n\t\t\tif(!$this.roundHasPassed) {\r\n\t\t\t\t/* WIP\r\n\t\t\t\t// add airdrop text to html\r\n\t\t\t\tlet priceQuotation = await JUST.Bridges.Browser.contracts.Fomo3D.read(\'iWantXKeys\', count)\r\n\t\t\t\tlet purchase_amount = BN(priceQuotation).plus(100).div(1e18).toFixed(2)\r\n\t\t\t\tswitch(purchase_amount){\r\n\t\t\t\t\tcase >10:\r\n\t\t\t\t\t\t$(\'#airdrop_chance\').text({JUST.Cache.airdropTracker} + "% chance to receive a 4x Key Airdrop with your next purchase with at least 10 ETH!");\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase >1:\r\n\t\t\t\t\t\t$(\'#airdrop_chance\').text({JUST.Cache.airdropTracker} + "% chance to receive a 3x Key Airdrop with your next purchase with at least 1 ETH!");\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t$(\'#airdrop_chance\').text({JUST.Cache.airdropTracker} + "% chance to receive a 2x Key Airdrop with your next purchase with at least .1 ETH!");\r\n\t\t\t\t}\r\n\t\t\t\t*/\r\n\t\t\t\tjQuery("#quotes").addClass("active")\r\n\t\t\t\tif(JUST.Bridges.Metamask && JUST.Bridges.Metamask.signedIn){\r\n\t\t\t\t\tjQuery(".keycount").text(BN(JUST.Cache.currentPlayer.Round[2]).div(1e18).toFixed(4))\r\n\t\t\t\t} else {\r\n\t\t\t\t\tjQuery(".keycount").text("0")\r\n\r\n\t\t\t\t}\r\n\t\t\t\tif($this.timer) $this.timer.Destroy()\r\n\t\t\t\t$this.timer = new Countdown(JUST.Cache.currentRound[3], async (data, expired) => {\r\n\t\t\t\t\tnow = (JUST.date().getTime() / 1000)\r\n\r\n\t\t\t\t\t// console.log({\r\n\t\t\t\t\t// \tcurrentTime: new Date(now * 1000), \r\n\t\t\t\t\t// \troundEnd: new Date(parseInt(JUST.Cache.currentRound[3]) * 1000),\r\n\t\t\t\t\t// \troundOver:  now < parseInt(JUST.Cache.currentRound[3]),\r\n\t\t\t\t\t// \troundID: JUST.Cache.currentRound[1],\r\n\t\t\t\t\t// \tpot: JUST.Cache.currentRound[5]\r\n\r\n\t\t\t\t\t// })\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(Math.floor( JUST.date().getTime() / 1000) > (parseInt(JUST.Cache.currentRound[3]) - 90) && $this.gracePeriod) {\r\n\r\n\t\t\t\t\t\t$this.gracePeriod = false\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// pepe\r\n\t\t\t\t\t\tfunction pepe(){\r\n\t\t\t\t\t\t$(".animation").animate({bottom: "-30px"}, "slow");\r\n\t\t\t\t\t\t    $(".animation").animate({left: "100%"}, "slow", function () {\r\n\t\t\t\t\t\t      $(this).removeAttr(\'style\');  \r\n\t\t\t\t\t\t    });\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tpepe()\r\n\r\n\t\t\t\t\t\t// clear timer from stack\r\n\t\t\t\t\t\tclearInterval(window.globalTimerObject)\r\n\r\n\t\t\t\t\t\t$this.refresher()\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(!expired){\r\n\t\t\t\t\t\tif($this.gracePeriod){\r\n\t\t\t\t\t\t\tlet actualTime = parseDifference(new Date(parseInt(JUST.Cache.currentRound[3]) - 90), JUST.date())\r\n\t\t\t\t\t\t\tjQuery(".headtimer").text(`${(actualTime.hours == "00" ? "" : actualTime.hours + ":") }${actualTime.minutes}:${actualTime.seconds}`)\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tjQuheadtimerery(".headtimer").text(`${(data.hours == "00" ? "" : data.hours + ":") }${data.minutes}:${data.seconds}`)\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tjQuery(".boxtimer").text(`${(data.hours == "00" ? "" : data.hours + ":") }${data.minutes}:${data.seconds}`)\r\n\r\n\t\t\t\t\t\tvar timeTotal = parseInt(parseInt(JUST.Cache.currentRound[4]) - parseInt(JUST.Cache.currentRound[4])) + 90\r\n\t\t\t\t\t\tvar timeRemaining = parseInt(JUST.Cache.currentRound[3]) - now \r\n\t\t\t\t\t\tvar timePercentage = 100 - timeRemaining / (timeTotal / 100)\r\n\r\n\t\t\t\t\t\t//console.log(timeTotal, timeRemaining, Math.floor(timePercentage))\r\n\r\n\t\t\t\t\t\tjQuery(".progress-bar.boxglow").css(\'width\', `${Math.floor(timePercentage)}%`)\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tjQuery("#quotes").removeClass("active")\r\n\t\t\t\t\t\t// refresh dom\r\n\t\t\t\t\t\t$this.refresher()\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\tif($this.gracePeriod && !this.graceTimer) {\r\n\r\n\t\t\t\tconsole.log("execute", parseInt(JUST.Cache.currentRound[3]) + 300)\r\n\t\t\t\tnew Countdown(parseInt(JUST.Cache.currentRound[3]) + 300, async (data, expired) => {\r\n\t\t\t\t\t$this.graceTimer = true\r\n\t\t\t\t\tnow = (JUST.date().getTime() / 1000)\r\n\r\n\r\n\t\t\t\t\tif(now < (parseInt(JUST.Cache.currentRound[3]) + 300) ){\r\n\t\t\t\t\t\tjQuery(".graceTimer").text(`${(data.hours == "00" ? "" : data.hours + ":") }${data.minutes}:${data.seconds}`)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$this.gracePeriod = false\r\n\t\t\t\t\t\t// clear timer from stack\r\n\t\t\t\t\t\t$this.graceTimer = false\r\n\t\t\t\t\t\t// refresh dom\r\n\t\t\t\t\t\t$this.refresher()\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t\tawait jQuery( ".buyOneTicket" ).unbind()\r\n\t\t\tawait jQuery( "#tixBuy" ).unbind()\r\n\t\t\tawait jQuery( "#tixReinvest" ).unbind()\r\n\t\t\tawait jQuery( "#withdrawEarnings" ).unbind()\r\n\t\t\tawait jQuery( "#ethSpend" ).unbind()\r\n\t\t\tawait jQuery( "#ethReinvest" ).unbind()\r\n\r\n\t\t\tjQuery(".buyOneTicket").click(async e  => {\r\n\t\t\t\tif(!JUST.Bridges.Metamask || !JUST.Bridges.Metamask.signedIn) return alertify.alert("你没有登录 metamask.")\r\n\t\t\t\tlet correctNetwork  = await JUST.checkNetwork()\r\n\t\t\t\tif(!correctNetwork) return alertify.alert("You are not correct to the testnet. Please navigate to <a style=\'color: #1e10f8;text-decoration: underline;\' href=\'https://testnet.teamjust.io\'>the testnet portal and follow the instructions</a>.")\r\n\t\t\t\tvar masternode = window.localStorage.getItem("masternode") ? window.localStorage.getItem("masternode") : "0x0" \r\n\r\n\t\t\t\ttry {\r\n\t\t\t\t\tlet priceQuotation = await JUST.Bridges.Browser.contracts.Fomo3D.read(\'iWantXKeys\', [BN(1050000000000000000)])\r\n\t\t\t\t\tjQuery(\'#loading\').modal({backdrop: \'static\', keyboard: false})\r\n\t\t\t\t\tlet team = $("input[name=\'teamselect\']:checked").val()\r\n\t\t\t\t\tif(!team) team = 0\r\n\t\t\t\t\tlet receipt = await JUST.Bridges.Metamask.contracts.Fomo3D.purchaseKeys(priceQuotation, team)\r\n\t\t\t\t\t//let receipt = await JUST.Bridges.Metamask.contracts.Fomo3D.write("buy", [masternode, 1], {value: priceQuotation})\r\n\t\t\t\t\tjQuery(\'#loading\').modal(\'hide\')\r\n\t\t\t\t\talertify.log(`Your key purchasing request has been submitted to the blockchain!`)\r\n\t\t\t\t\tconsole.log(receipt)\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tconsole.log(e)\r\n\t\t\t\t\talertify.log(`Buy order has been cancelled.`)\r\n\t\t\t\t\tjQuery(\'#loading\').modal(\'hide\')\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t})\r\n\r\n\t\t\t/**\r\n\t\t\t * Whenever the input of tixToBuy changes..\r\n\t\t\t */\r\n\t\t\tjQuery("#tixToBuy").bind(\'input\', getQuote)\r\n\r\n\t\t\t/**\r\n\t\t\t * When the purchase button is clicked.\r\n\t\t\t */\r\n\t\t\tjQuery("#tixBuy").click( async e => {\r\n\t\t\t\tif(!JUST.Bridges.Metamask || !JUST.Bridges.Metamask.signedIn) return alertify.alert("你没有登录 metamask.")\r\n\t\t\t\tlet correctNetwork  = await JUST.checkNetwork()\r\n\t\t\t\tif(!correctNetwork) return alertify.alert("You are not correct to the testnet. Please navigate to <a style=\'color: #1e10f8;text-decoration: underline;\' href=\'https://testnet.teamjust.io\'>the testnet portal and follow the instructions</a>.")\r\n\t\t\t\tlet count = String(jQuery("#tixToBuy").val()).replace("keys", "").replace("key", "").replace("Keys", "").replace("Key", "")\r\n\t\t\t\tif(!Number.isInteger(parseInt(count))) return\r\n\t\t\t\tvar masternode = window.localStorage.getItem("masternode") ? window.localStorage.getItem("masternode") : "0x0" \r\n\t\t\t\tcount = BN((parseInt(count)) * 1e18)\r\n\r\n\t\t\t\ttry {\r\n\t\t\t\t\tlet priceQuotation = await JUST.Bridges.Browser.contracts.Fomo3D.read(\'iWantXKeys\', count)\r\n\t\t\t\t\tjQuery(\'#loading\').modal({backdrop: \'static\', keyboard: false})\r\n\t\t\t\t\tlet team = $("input[name=\'teamselect\']:checked").val()\r\n\t\t\t\t\tif(!team) team = 0\r\n\t\t\t\t\tlet receipt = await JUST.Bridges.Metamask.contracts.Fomo3D.purchaseKeys(BN(priceQuotation).plus(100).toString(), team)\r\n\t\t\t\t\talertify.log(`Your ticket purchasing request has been submitted to the blockchain!`)\r\n\t\t\t\t\tjQuery(\'#loading\').modal(\'hide\')\r\n\r\n\t\t\t\t\tconsole.log(receipt)\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\talertify.log(`Buy order has been cancelled.`)\r\n\t\t\t\t\tjQuery(\'#loading\').modal(\'hide\')\r\n\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t})\r\n\r\n\t\t\t/**\r\n\t\t\t * When the reinvest button is clicked.\r\n\t\t\t */\r\n\t\t\tjQuery("#tixReinvest").click( async e => {\r\n\t\t\t\tif(!JUST.Bridges.Metamask || !JUST.Bridges.Metamask.signedIn) return alertify.alert("你没有登录 metamask.")\r\n\t\t\t\tlet correctNetwork  = await JUST.checkNetwork()\r\n\t\t\t\tif(!correctNetwork) return alertify.alert("You are not correct to the testnet. Please navigate to <a style=\'color: #1e10f8;text-decoration: underline;\' href=\'https://testnet.teamjust.io\'>the testnet portal and follow the instructions</a>.")\r\n\t\t\t\tlet vaultEarnings = BN(JUST.Cache.currentPlayer.Vaults[0]).plus(JUST.Cache.currentPlayer.Vaults[1]).plus(JUST.Cache.currentPlayer.Vaults[2])\r\n\t\t\t\tlet count = String(jQuery("#tixToBuy").val()).replace("keys", "").replace("key", "").replace("Keys", "").replace("Key", "")\r\n\t\t\t\tvar masternode = window.localStorage.getItem("masternode") ? window.localStorage.getItem("masternode") : "0x0" \r\n\t\t\t\tif(!Number.isInteger(parseInt(count))) return\r\n\t\t\t\tcount = BN((parseInt(count) ) * 1e18)\r\n\r\n\t\t\t\ttry {\r\n\t\t\t\t\tlet priceQuotation = await JUST.Bridges.Browser.contracts.Fomo3D.read(\'iWantXKeys\', [BN(count)])\r\n\t\t\t\t\tif(vaultEarnings.isLessThan(BN(priceQuotation))) return alertify.alert(`你钱包不够 ${BN(priceQuotation).div(1e18).toFixed(4)} ETH 来购买 ${count.div(1e18).toFixed(4)} keys. 你钱包里只有 ${vaultEarnings.div(1e18).toFixed(4)} ETH.`)\r\n\t\t\t\t\tjQuery(\'#loading\').modal({backdrop: \'static\', keyboard: false})\r\n\t\t\t\t\tlet team = $("input[name=\'teamselect\']:checked").val()\r\n\t\t\t\t\tif(!team) team = 0\r\n\t\t\t\t\tlet receipt = await JUST.Bridges.Metamask.contracts.Fomo3D.purchaseKeys(BN(priceQuotation).plus(100).toString(), team, true)\r\n\t\t\t\t\talertify.log(`Your ticket purchasing request has been submitted to the blockchain!`)\r\n\t\t\t\t\tjQuery(\'#loading\').modal(\'hide\')\r\n\r\n\t\t\t\t\tconsole.log(receipt)\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tconsole.error(e)\r\n\t\t\t\t\talertify.log(`Buy order has been cancelled.`)\r\n\t\t\t\t\tjQuery(\'#loading\').modal(\'hide\')\r\n\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\t\t\t/**\r\n\t\t\t * When the ICO invest button is pressed\r\n\t\t\t */\r\n\t\t\tjQuery("#ethSpend").click( async e => {\r\n\t\t\t\tif(!JUST.Bridges.Metamask || !JUST.Bridges.Metamask.signedIn) return alertify.alert("你没有登录 metamask.")\r\n\t\t\t\tlet correctNetwork  = await JUST.checkNetwork()\r\n\t\t\t\tif(!correctNetwork) return alertify.alert("You are not correct to the testnet. Please navigate to <a style=\'color: #1e10f8;text-decoration: underline;\' href=\'https://testnet.teamjust.io\'>the testnet portal and follow the instructions</a>.")\r\n\t\t\t\tlet count = String(jQuery("#ethToSpend").val()).replace("ethereum", "").replace("Ethereum", "").replace("eth", "").replace("ETH", "")\r\n\t\t\t\tif(!Number.isInteger(parseInt(count))) return\r\n\t\t\t\tcount = BN(count).multipliedBy(1e18)\r\n\r\n\t\t\t\ttry {\r\n\t\t\t\t\tlet team = $("input[name=\'teamselect\']:checked").val()\r\n\t\t\t\t\tif(!team) team = 1\r\n\t\t\t\t\tjQuery(\'#loading\').modal({backdrop: \'static\', keyboard: false})\r\n\t\t\t\t\tlet receipt = await JUST.Bridges.Metamask.contracts.Fomo3D.purchaseKeys(count.toString(), team)\r\n\t\t\t\t\talertify.log(`Your ICO funding request has been submitted to the blockchain!`)\r\n\t\t\t\t\tjQuery(\'#loading\').modal(\'hide\')\r\n\t\t\t\t\tconsole.log(receipt)\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\talertify.log(`Funding request been cancelled.`)\r\n\t\t\t\t\tjQuery(\'#loading\').modal(\'hide\')\r\n\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\t\t\t/**\r\n\t\t\t * When the ICO invest button is pressed\r\n\t\t\t */\r\n\t\t\tjQuery("#ethReinvest").click( async e => {\r\n\t\t\t\tif(!JUST.Bridges.Metamask || !JUST.Bridges.Metamask.signedIn) return alertify.alert("你没有登录 metamask.")\r\n\t\t\t\tlet correctNetwork  = await JUST.checkNetwork()\r\n\t\t\t\tif(!correctNetwork) return alertify.alert("You are not correct to the testnet. Please navigate to <a style=\'color: #1e10f8;text-decoration: underline;\' href=\'https://testnet.teamjust.io\'>the testnet portal and follow the instructions</a>.")\r\n\t\t\t\tlet count = String(jQuery("#ethToSpend").val()).replace("ethereum", "").replace("Ethereum", "").replace("eth", "").replace("ETH", "")\r\n\t\t\t\tif(!Number.isInteger(parseInt(count))) return\r\n\t\t\t\tcount = BN(count).multipliedBy(1e18)\r\n\r\n\t\t\t\ttry {\r\n\t\t\t\t\tlet team = $("input[name=\'teamselect\']:checked").val()\r\n\t\t\t\t\tif(!team) team = 1\r\n\t\t\t\t\tlet receipt = await JUST.Bridges.Metamask.contracts.Fomo3D.purchaseKeys(count.toString(), team, true)\r\n\t\t\t\t\talertify.log(`Your ICO funding request has been submitted to the blockchain!`)\r\n\t\t\t\t\tjQuery(\'#loading\').modal(\'hide\')\r\n\t\t\t\t\tconsole.log(receipt)\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\talertify.log(`Funding request been cancelled.`)\r\n\t\t\t\t\tjQuery(\'#loading\').modal(\'hide\')\r\n\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\t\t\tjQuery("#withdrawEarnings").click(async e => {\r\n\t\t\t\tlet correctNetwork  = await JUST.checkNetwork()\r\n\t\t\t\tif(!correctNetwork) return alertify.alert("You are not correct to the testnet. Please navigate to <a style=\'color: #1e10f8;text-decoration: underline;\' href=\'https://testnet.teamjust.io\'>the testnet portal and follow the instructions</a>.")\r\n\t\t\t\tif(!JUST.Bridges.Metamask || !JUST.Bridges.Metamask.signedIn) return alertify.alert("你没有登录 metamask.")\r\n\t\t\t\tjQuery(\'#loading\').modal({backdrop: \'static\', keyboard: false})\r\n\t\t\t\ttry {\r\n\t\t\t\t\tlet receipt = await JUST.Bridges.Metamask.contracts.Fomo3D.write("withdraw")\r\n\t\t\t\t\tjQuery(\'#loading\').modal(\'hide\')\r\n\t\t\t\t\talertify.log(`Your withdrawal request has been submitted to the blockchain!`)\r\n\t\t\t\t\tconsole.log(receipt)\r\n\r\n\t\t\t\t} catch(e) {\r\n\t\t\t\t\talertify.log(`Withdrawal has been cancelled.`)\r\n\t\t\t\t\tjQuery(\'#loading\').modal(\'hide\')\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t})\r\n\r\n\r\n\t\t\tgetQuote()\t\t\r\n\t\t}\r\n\r\n\t\tasync function getQuote(){\r\n\t\t\tlet count = String(jQuery("#tixToBuy").val()).replace("key", "").replace("keys", "").replace("Key", "").replace("Keys", "")\r\n\t\t\tif(!Number.isInteger(parseInt(count))) return\r\n\t\t\tcount = BN(parseInt(count) * 1e18)\r\n\t\t\t\r\n\t\t\tlet priceQuotation = await JUST.Bridges.Browser.contracts.Fomo3D.read(\'iWantXKeys\', count)\r\n\r\n\t\t\tjQuery("#tixQuotation").text(`@ ${BN(priceQuotation).plus(100).div(1e18).toFixed(8)} ETH`)\r\n\r\n\t\t\tconsole.log(priceQuotation)\r\n\t\t}\r\n\r\n\r\n\t\t$this.on(\'update\', assemble)\r\n\t\t$this.on(\'updated\', rewire)\r\n\t\t$this.on(\'before-mount\', assemble)\r\n\t\tthis.on(\'unmount\', fn => {\r\n\t\t\tif(window.globalTimerObject && typeof window.globalTimerObject !== "undefined") clearInterval(window.globalTimerObject)\r\n\t\t})\r\n\t\t\r\n\r\n\t\tJUST.UI.on(\'ui.refresh\', () => {\r\n\t\t\tconsole.log(\'refreshing ui\')\r\n\t\t\t$this.refresher()\r\n\t\t} )\r\n\r\n\t\t\t\r\n\t\t$this.on(\'mount\', function(){\r\n\t\t\t\r\n\t\t\t// wire listeners\r\n\t\t\trewire()\r\n\r\n\t\t\tnew ClipboardJS(\'.btn\');\r\n\r\n\t\t  // Teamselection to var\r\n\t\t  jQuery(\'.ticketProcess\').click(function(){\r\n\t\t\tvar team = $("input[name=\'teamselect\']:checked").val()\r\n\t\t\t//console.log(team)\r\n\t\t  });\r\n\t\t\t\t\r\n\t\t  // Increase ticket amount to buy with buttons\r\n\t\t  jQuery(\'.increment\').click(function(){\r\n\t\t\tlet id = this.id\r\n\t\t\t\r\n\t\t\tif(id == \'addOne\'){ \r\n\t\t\t  var increment = 1\r\n\t\t\t}\r\n\t\t\tif(id == \'addTwo\'){ \r\n\t\t\t  var increment = 2\r\n\t\t\t}\r\n\t\t\tif(id == \'addFive\'){\r\n\t\t\t  var increment = 5\r\n\t\t\t}\r\n\t\t\tif(id == \'addTen\'){\r\n\t\t\t  var increment = 10\r\n\t\t\t}\r\n\r\n\t\t\tif(id == \'addHundred\'){\r\n\t\t\t  var increment = 100\r\n\t\t\t}\r\n\t\t\tif(jQuery(\'#tixToBuy\').val()){\r\n\t\t\t\t///replace("key", "").replace("keys", "").replace("Key", "").replace("Keys", "")\r\n\t\t\t\tvar iVal = parseInt(String(jQuery("#tixToBuy").val()).replace("keys", "").replace("key", "").replace("Keys", "").replace("Key", ""))\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tvar iVal = 1\r\n\t\t\t}\r\n\r\n\t\t\tlet nVal = iVal + increment\r\n\r\n\t\t\tjQuery("#tixToBuy").val(nVal.toString())\r\n\r\n\t\t\tgetQuote()\r\n\r\n\t\t  });\r\n\r\n\t\t  // Quote script\r\n\t\t  //jQuery(".qTarget").text(memes.global.quoteRoulette[Math.floor(Math.random()*memes.global.quoteRoulette.length)]);\r\n\r\n\t\t  // Enable popovers\r\n\t\t  jQuery(".qbtn").click(function(){\r\n\t\t\tjQuery(\'[data-toggle="popover"\').popover()\r\n\t\t  })\r\n\t\t  \r\n\t\t  // open vanity from ceo box\r\n\t\t  jQuery(".buyceo").click(async e => {\r\n\t\t  \tlet correctNetwork  = await JUST.checkNetwork()\r\n\t\t\t\tif(!correctNetwork) return alertify.alert("You are not correct to the testnet. Please navigate to <a style=\'color: #1e10f8;text-decoration: underline;\' href=\'https://testnet.teamjust.io\'>the testnet portal and follow the instructions</a>.")\r\n\t\t\tjQuery(\'#vanity\').modal()\r\n\t\t  })\r\n\r\n\t\t \r\n\t\t\t\t\r\n\t\t\t// save team\r\n\t\t\tjQuery(\'.teamselector input\').click(function(){\r\n\t\t\t\tlet thisteam = $(this).attr(\'id\')\r\n\t\t\t\tif(thisteam == "teamsnek"){\r\n\t\t\t\t\tlocalStorage.setItem(\'team\', \'0\');\r\n\t\t\t\t}\r\n\t\t\t\tif(thisteam == "teamwhale"){\r\n\t\t\t\t\tlocalStorage.setItem(\'team\', \'1\');\r\n\t\t\t\t}\r\n\t\t\t\tif(thisteam == "teambull"){\r\n\t\t\t\t\tlocalStorage.setItem(\'team\', \'2\');\r\n\t\t\t\t}\r\n\t\t\t\tif(thisteam == "teambear"){\r\n\t\t\t\t\tlocalStorage.setItem(\'team\', \'3\');\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\t\t\t// airdrop modal animation\r\n\t\t\t\r\n\t\t\tairdrop_animate = function(){\r\n\t\t\t\t$("#airdrop row col-6").animate({bottom: "-30px"}, "fast", function(){\r\n\t\t\t\t\t$(this).removeAttr(\'style\');\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\t// open up unclosable countdown modal\r\n\t\t\tjQuery(\'#lasttimer\').modal({backdrop: \'static\', keyboard: false})\r\n\r\n\t  })\r\n\t</script>\r\n\r\n</state-play2>\r\n\r\n<module-airdrop>\r\n\t<!-- airdrop custom modal popup -->\r\n    <div class="container" id="airdrop" style="z-index: 999;">\r\n        <div class="row">\r\n            <div class="col-6" style="position: fixed; bottom:0; left:25%;">\r\n                <div class="jumbotron jumbotron-adjust jumboshade bg-dark text-light">\r\n                    <div class="row">\r\n                        <div class="col">\r\n                            <div class="row">\r\n                                <div class="col">\r\n                                    <p class="lead">Airdrop: Your buying power has been multiplied!</p>\r\n                                </div>\r\n                            </div>\r\n                            <div class="row">\r\n                                <div class="col">\r\n                                    <p class="font-weight-light string">You\'ve recieved at least a 2x multiplier on your last purchase! (PLACEHOLDER)</p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div class="col-auto">\r\n                            <i class="fas fa-parachute-box airdropicon ethglow-its-okay-justo"></i>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <!-- /airdrop custom modal popup -->\r\n    <script>\r\n    \t$this = this\r\n    \t$this.on(\'mount\', e => {\r\n    \t\tconsole.log(\'mounted\')\r\n    \t})\r\n    </script>\r\n</module-airdrop>',
    );

    riot.compile(
      '<state-p3d>\r\n\r\n\r\n\r\n<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script> -->\r\n<script src="https://cdnjs.cloudflare.com/ajax/libs/bignumber.js/7.2.1/bignumber.min.js"></script>\r\n\r\n\r\n\r\n<!-- API HANDLING FROM ETHERS CAN AND OUR DJ MC-PUMP -->\r\n<!-- API HANDLING FROM ETHERS CAN AND OUR DJ MC-PUMP -->\r\n<script> \r\n    jQuery(document).ready(() => {        \r\n        // define a new BigNumber instance with formatting options\r\n        const FBN = BN.clone({\r\n          DECIMAL_PLACES: 4,\r\n          FORMAT: {\r\n            decimalSeparator: \'.\',\r\n            groupSeparator: \',\',\r\n            groupSize: 3,\r\n            secondaryGroupSize: 0,\r\n            fractionGroupSeparator: \' \',\r\n            fractionGroupSize: 0,\r\n          }\r\n        });\r\n\r\n        // format a BigNumber represented in wei as ETH value\r\n        let formatBN = (bn) => {\r\n            return new FBN(bn).div(\'1000000000000000000\').toFormat(1);\r\n        }\r\n        \r\n        jQuery.get(\'https://powh3d.eu/api/public/p3d\')\r\n          .done((data) => {\r\n            let totalRewards = new BN(data.totalRewards);\r\n            let totalReferralCommissions = new BN(data.totalReferralCommissions);\r\n            let totalPayout = totalRewards.plus(totalReferralCommissions);\r\n            let totalVolume = totalPayout.times(new BN(\'10\'));\r\n            jQuery(\'#totalRewards\').html(formatBN(totalRewards));\r\n            jQuery(\'#totalReferralCommissions\').html(formatBN(totalReferralCommissions) + \' ETH\');\r\n            jQuery(\'#totalPayout\').html(formatBN(totalPayout) + \' \');\r\n            jQuery(\'#totalVolume\').html(formatBN(totalVolume) + \' \');\r\n\t\t\tjQuery(\'#totalVolumeAvg\').html(formatBN(totalVolume.div(diffDays)) + \' \');\r\n\t\t\tjQuery(\'#totalVolumeAvg2\').html(formatBN(totalVolume.div(diffDays)) + \' \');\r\n\t\t\tjQuery(\'#totalPayoutAvg\').html(formatBN(totalPayout.div(diffDays)) + \' \');\r\n          })\r\n          .fail((xhr, status) => {\r\n            console.log(status);\r\n          });\r\n\r\n\t\t  \r\n\t\t  <!-- jQuery.get(\'https://api.etherscan.io/api?module=stats&action=tokensupply&contractaddress=0xB3775fB83F7D12A36E0475aBdD1FCA35c091efBe&apikey=YourApiKeyToken=QIHHB3T7S5T1GT6NE3ABJZK5YPV11SQ1JH\') -->\r\n           <!-- .done((data) => { -->\r\n\t\t   <!-- console.log(data); -->\r\n\t\t   <!-- let totalToken = new BN(data.result); -->\r\n\t\t   <!-- jQuery(\'#totalToken\').html(formatBN(totalToken) + \' \'); -->\r\n           <!-- }) -->\r\n           <!-- .fail((xhr, status) => {  -->\r\n             <!-- console.log(status); -->\r\n           <!-- });  -->\r\n\t  \r\n\t  \t/* Initializes Popovers so they only require 1 click\r\n\t\twith love -justo */\r\n\t\t$(function () {\r\n\t\t\t$(\'[data-toggle="popover"]\').popover();\r\n\t\t\t$(\'.checkmark\').popover({\r\n\t\t\t\ttrigger: "hover"\r\n\t\t\t});\r\n\t\t})\r\n\r\n\t\tsetTimeout(function() {\r\n\t\t$(\'.tutorialArrow\').fadeOut(\'fast\');\r\n\t\t}, 20000); // <-- time in milliseconds\r\n\t});\r\n</script>\r\n\t<!-- API HANDLING FROM ETHERS CAN AND OUR DJ MC-PUMP -->\r\n\t<!-- API HANDLING FROM ETHERS CAN AND OUR DJ MC-PUMP -->\r\n\t\r\n\t\r\n\r\n<div class="p3dblurryboy"></div>\r\n\t<!-- fomo\t-->\r\n\t<!-- NOTE: Displays the current pot size in ETH as well as time left in current round -->\r\n\t\t<div class="jumbotron-fix jumbotron-dark text-light">\r\n\t\t\t\t<div class="container text-center">\r\n\t\t\t\t\r\n\t\t\t\t\t<h5 class="display-5"><a class="titlepopoutrightminigreen">You\'re</a> going to invest, right?</h5>\r\n\t\t\t\t\t<h5 class="display-5"><a class="titlepopoutrightminigreen">P3D</a> earns you passive ETH dividends from its own volume, and all our <a class="titlepopoutrightmini">3D</a> games!</h5>\r\n\t\t\t\t\t<h4 class="display-4 scammed">AVERAGE DAILY VOLUME</h4>\r\n\t\t\t\t\t<h4 class="display-4"><span id="totalVolumeAvg" class="ethglitch titleglow-green"> </span><i class="fab fa-ethereum ethglow-green"></i></h4>\r\n\t\t\t\t\t<!-- <h4 class="display-4 scammed">AVERAGE PER DAY VOLUME</h4> -->\r\n\t\t\t\t\t<!-- <h4 class="display-4"><span id="totalRewards" class="ethglitch titleglow-green"></span><i class="fab fa-ethereum ethglow-green"></i></h4> -->\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="container no-mobile ">\r\n\t\t\t\t\t<div style="height: 50vh;" class="ghostframe ghosttron-spacing">\r\n\t\t\t\t\t<div class=container-fluid>\r\n\t\t\t\t\t\t<div class=\'ui\'>\r\n\t\t\t\t\t\t\t<div style="font-weight:200px" class=\'ui_box\'>\r\n\t\t\t\t\t\t\t\t<div class=\'ui_box__inner\'>\r\n\t\t\t\t\t\t\t\t\t  <h2>Overall Volume</h2>\r\n\t\t\t\t\t\t\t\t\t  <p>Total Ethereum handled by the smart-exchange</p>\r\n\t\t\t\t\t\t\t\t\t  <div class=\'stat\'>\r\n\t\t\t\t\t\t\t\t\t\t<span id="totalVolume" class="ethglitch titleglow-green"></span><i style="font-size: 3rem" class="fab fa-ethereum ethglow-green"></i>\r\n\t\t\t\t\t\t\t\t\t  </div>\r\n\t\t\t\t\t\t\t\t\t  <!-- <div class=\'progress\'> -->\r\n\t\t\t\t\t\t\t\t\t\t<!-- <div class=\'progress_bar--two\'></div> -->\r\n\t\t\t\t\t\t\t\t\t  <!-- </div> -->\r\n\t\t\t\t\t\t\t\t\t  <p>10% of all volume the p3d token experiences, is taxxed and split across all p3d owners as passive eth <i class="fab fa-ethereum"></i> income. </p>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div class=\'drop\'>\r\n\t\t\t\t\t\t\t\t\t  <p class="droptext" style="font-size: 0.8rem">P3D is the first successful bonded ethereum token model.<br>\r\n\t\t\t\t\t\t\t\t\t  <br>\r\n\t\t\t\t\t\t\t\t\t  Think of it like a "Gold" backed cryptocurrency.</p>\r\n\t\t\t\t\t\t\t\t\t  <div class=\'arrow\'></div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t  </div>\r\n\t\t\t\t\t\t</div> \r\n\t\t\t\t\t\t<div class=\'ui\'>\r\n\t\t\t\t\t\t\t<div class=\'ui_box\'>\r\n\t\t\t\t\t\t\t\t<div class=\'ui_box__inner\'>\r\n\t\t\t\t\t\t\t\t\t  <h2>\r\n\t\t\t\t\t\t\t\t\t\tDividends\r\n\t\t\t\t\t\t\t\t\t  </h2>\r\n\t\t\t\t\t\t\t\t\t  <p>Total paid out as dividends by the smart-contract</p>\r\n\t\t\t\t\t\t\t\t\t  <div class=\'stat\'>\r\n\t\t\t\t\t\t\t\t\t  <span id="totalPayout" class="ethglitch titleglow-green"></span><i style="font-size: 3rem" class="fab fa-ethereum ethglow-green"></i>\r\n\t\t\t\t\t\t\t\t\t  </div>\r\n\t\t\t\t\t\t\t\t\t  <div class=\'progress\'>\r\n\t\t\t\t\t\t\t\t\t\t<div style="width:100%" class=\'progress_bar\'></div>\r\n\t\t\t\t\t\t\t\t\t  </div>\r\n\t\t\t\t\t\t\t\t\t  <p>The smart contract handles payouts, never humans.</p>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div class=\'drop\'>\r\n\t\t\t\t\t\t\t\t  <p class="droptext" style="font-size: 0.8rem">The dynamic 10% tax-per-transaction model was designed to be a working prototype of a shared Universal Basic Income. <br> It\'s been a historic success</p>\r\n\t\t\t\t\t\t\t\t  <div class=\'arrow\'></div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div> \r\n\t\t\t\t\t\t<div class=\'ui\'>\r\n\t\t\t\t\t\t\t<div class=\'ui_box\'>\r\n\t\t\t\t\t\t\t\t<div class=\'ui_box__inner\'>\r\n\t\t\t\t\t\t\t\t\t  <h2>\r\n\t\t\t\t\t\t\t\t\t\tDaily Volume\r\n\t\t\t\t\t\t\t\t\t  </h2>\r\n\t\t\t\t\t\t\t\t\t  <p>Of The first bonded token</p>\r\n\t\t\t\t\t\t\t\t\t  <div class=\'stat_left\'>\r\n\t\t\t\t\t\t\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t\t\t\t\t\t  <li>\r\n\t\t\t\t\t\t\t\t\t\t\t\tAverage Daily Volume: <span style="font-size: 1.2rem" id="totalVolumeAvg2" class="ethglitch "></span><i style="font-size: 1.2rem" class="fab fa-ethereum"></i>\r\n\t\t\t\t\t\t\t\t\t\t\t  </li>\r\n\t\t\t\t\t\t\t\t\t\t\t  <li>\r\n\t\t\t\t\t\t\t\t\t\t\t\tAverage Daily Dividends: <span style="font-size: 1.2rem" id="totalPayoutAvg" class="ethglitch"></span><i style="font-size: 1.2rem" class="fab fa-ethereum"></i>\r\n\t\t\t\t\t\t\t\t\t\t\t  </li>\r\n\t\t\t\t\t\t\t\t\t\t\t  <li>\r\n\t\t\t\t\t\t\t\t\t\t\t\tTotal Transactions: <span style="font-size: 1.2rem" id="totaltx" class="ethglitch"></span><i style="font-size: 1.2rem" class="fab fa-ethereum"></i>\r\n\t\t\t\t\t\t\t\t\t\t\t  </li>\r\n\t\t\t\t\t\t\t\t\t\t\t  <li>\r\n\t\t\t\t\t\t\t\t\t\t\t\tAverage Daily Users: <span style="font-size: 1.2rem" id="dailyusers" class="ethglitch"></span><i style="font-size: 1.2rem" class="fab fa-ethereum"></i>\r\n\t\t\t\t\t\t\t\t\t\t\t  </li>\r\n\t\t\t\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t\t\t  </div>\r\n\t\t\t\t\t\t\t\t\t  <div class=\'progress_graph\'>\r\n\t\t\t\t\t\t\t\t\t\t\t<div class=\'progress_graph__bar--1\'></div>\r\n\t\t\t\t\t\t\t\t\t\t\t<div class=\'progress_graph__bar--3\'></div>\r\n\t\t\t\t\t\t\t\t\t\t\t<div class=\'progress_graph__bar--2\'></div>\r\n\t\t\t\t\t\t\t\t\t\t\t<!-- <div class=\'progress_graph__bar--4\'></div> -->\r\n\t\t\t\t\t\t\t\t\t  </div>\r\n\t\t\t\t\t\t\t\t\t  <p></p>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div style="z-index: 0" class=\'drop\'>\r\n\t\t\t\t\t\t\t\t\t  <p class="droptext" style="font-size: 0.8rem">The contract holds ETH when a token is bought, and pays out ETH when a token is sold. <br><br> 100% liquidity at all times.</p>\r\n\t\t\t\t\t\t\t\t\t  <div class=\'arrow\'></div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t    </div>\r\n\t\t\t\t\t\t</div> \r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\t\r\n\t\t</div>\r\n\t\t<!-- <div style="height:400px" class="container text-center">\r\n\t\t<h3 style="color:white" class="display-4 scammed">THIS INTERFACE UNDER CONSTRUCTION</h3>\r\n\t\t<a href="https://powh.io/purchase-tokens" class="buyOneTicket btn btn-lg btn-block btn-gren pulse-gren marginb">\r\n\t\tYou can always buy them on our exchange interface though!\r\n\t\t\t\t</a>\r\n\t\t</div> -->\r\n\t<!-- /fomo -->\r\n\t<div class="container" style="margin-top:-1rem;">\r\n\t\t<div class="row">\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\t\t<!-- biddings & vault -->\r\n\t\t\t<div class="col-sm">\r\n\r\n\t\t\t\t<ul class="nav nav-tabs tabs-border-adjust" id="buyTabs" role="tablist">\r\n\t\t\t\t  <li class="nav-item tab-item">\r\n\t\t\t\t    <a class="nav-link nav-link-gren tab-link active" id="purchaseTab" data-toggle="tab" href="#purchaseArea" role="tab" aria-controls="purchaseArea" aria-selected="true">Buy P3D</a>\r\n\t\t\t\t  </li>\r\n\t\t\t\t  <li class="nav-item tab-item">\r\n\t\t\t\t    <a class="nav-link nav-link-gren tab-link" id="sellTab" data-toggle="tab" href="#sellArea" role="tab" aria-controls="sellArea" aria-selected="false">Sell P3D</a>\r\n\t\t\t\t  </li>\r\n\t\t\t\t  <li class="nav-item tab-item">\r\n\t\t\t\t    <a class="nav-link nav-link-gren tab-link" id="refTab" data-toggle="tab" href="#refArea" role="tab" aria-controls="refArea" aria-selected="false">Referrals</a>\r\n\t\t\t\t  </li>\r\n\t\t\t\t</ul>\r\n\t\t\t\t<div class="tab-content" id="buyArea">\r\n\t\t\t\t<!-- buy p3d -->\r\n\t\t\t\t<div class="tab-pane fade show active" id="purchaseArea" role="tabpanel" aria-labelledby="purchaseArea">\r\n\t\t\t\t\t<div class="jumbotron jumbotron-adjust text-light bg-dark jumboshade tab-rounded">\r\n\t\t\t\t\t\t<div class="row">\r\n\t\t\t\t\t\t\t\t\t<div class="col">\r\n\t\t\t\t\t\t\t\t\t\t<p class="lead nomarginb">Create Tokens!</p>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div class="col-auto">\r\n\t\t\t\t\t\t\t\t\t\t<p class="text-right nomarginb tutorial">\r\n\t\t\t\t\t\t\t\t\t\t\t<i class="fas fa-arrow-right pulsetutorial tutorialArrow"></i>\r\n\t\t\t\t\t\t\t\t\t\t\t<a tabindex="0" type="button" class="qbtn" role="button" data-toggle="popover" data-trigger="focus" data-html="true" data-placement="bottom" title="Invest in the Ecosystem" data-content="{popover.p3dbuy}">\r\n\t\t\t\t\t\t\t\t\t\t\t<i class="far fa-question-circle"></i>\r\n\t\t\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<!-- Ticket Purchase -->\r\n\t\t\t\t\t\t<div class="row">\r\n\t\t\t\t\t\t  <div class="col">\r\n\t\t\t\t\t\t\t<div id="purchase" class="tab-pane fade show active" role="tabpanel">\r\n\t\t\t\t\t\t\t\t<div class="row">\r\n\t\t\t\t\t\t\t\t\t<div class="col">\r\n\t\t\t\t\t\t\t\t\t\t<p class="small text-center">Purchase with ETH from your wallet, or reinvest from your Vault to compound your dividend income</p>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div class="row" id="purchase">\r\n\t\t\t\t\t\t\t\t  <div class="col">\r\n\t\t\t\t\t\t\t\t\t<div class="input-group mb-3">\r\n\t\t\t\t\t\t\t\t\t  <div class="input-group-prepend">\r\n\t\t\t\t\t\t\t\t\t\t<span class="input-group-text">\r\n\t\t\t\t\t\t\t\t\t\t  <i class="fas fa-coins"></i>\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t  </div>\r\n\t\t\t\t\t\t\t\t\t  <input type="text" id="ethToSpend" class="form-control text-center" placeholder="0.01 ETH">\r\n\t\t\t\t\t\t\t\t\t  <div class="input-group-append">\r\n\t\t\t\t\t\t\t\t\t\t<span class="input-group-text" id="tokenQuotation">\r\n\t\t\t\t\t\t\t\t\t\t  = 0 P3D\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t  </div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<p class="small text-center">Remember: There is a 10% Tax, that\'s how the token works after all.</p>\r\n\t\t\t\t\t\t\t\t  </div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div class="row" style="position: relative;">\r\n\t\t\t\t\t\t\t\t  <div class="col">\r\n\t\t\t\t\t\t\t\t\t<button type="button" id="ethSend" class="btn btn-block btn-gren btn-lg ticketProcess"><i class="fab fa-ethereum"></i> 发送以太</button>\r\n\t\t\t\t\t\t\t\t  </div>\r\n\t\t\t\t\t\t\t\t  <div class="col">\r\n\t\t\t\t\t\t\t\t\t<button type="button" id="ethReinvest" class="btn btn-block btn-outline-gren btn-lg ticketProcess"><i class="fas fa-piggy-bank"></i> Reinvest</button>\r\n\t\t\t\t\t\t\t\t  </div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t  </div>\r\n\t\t\t\t\t\t  </div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<!-- /buy p3d -->\t\r\n\r\n\t\t\t\t<!-- sell p3d -->\r\n\t\t\t\t<div class="tab-pane fade show" id="sellArea" role="tabpanel" aria-labelledby="sellArea">\r\n\t\t\t\t\t<div class="jumbotron jumbotron-adjust text-light bg-dark jumboshade tab-rounded">\r\n\t\t\t\t\t\t<div class="row">\r\n\t\t\t\t\t\t\t\t\t<div class="col">\r\n\t\t\t\t\t\t\t\t\t\t<p class="lead nomarginb">Sell to the Contract:</p>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div class="col-auto">\r\n\t\t\t\t\t\t\t\t\t\t<p class="text-right nomarginb tutorial">\r\n\t\t\t\t\t\t\t\t\t\t\t<i class="fas fa-arrow-right pulsetutorial tutorialArrow"></i>\r\n\t\t\t\t\t\t\t\t\t\t\t<a tabindex="0" type="button" class="qbtn" role="button" data-toggle="popover" data-trigger="focus" data-html="true" data-placement="bottom" title="Admit you have weak hands" data-content="{popover.p3dsell}">\r\n\t\t\t\t\t\t\t\t\t\t\t<i class="far fa-question-circle"></i>\r\n\t\t\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<!-- Ticket sale -->\r\n\t\t\t\t\t\t<div class="row">\r\n\t\t\t\t\t\t  <div class="col">\r\n\t\t\t\t\t\t\t<div id="purchase" class="tab-pane fade show active" role="tabpanel">\r\n\t\t\t\t\t\t\t\t<div class="row">\r\n\t\t\t\t\t\t\t\t\t<div class="col">\r\n\t\t\t\t\t\t\t\t\t\t<p class="small text-center">Sell your P3D instantly at any time for ETH</p>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div class="row" id="purchase">\r\n\t\t\t\t\t\t\t\t  <div class="col">\r\n\t\t\t\t\t\t\t\t\t<div class="input-group mb-3">\r\n\t\t\t\t\t\t\t\t\t  <div class="input-group-prepend">\r\n\t\t\t\t\t\t\t\t\t\t<span class="input-group-text">\r\n\t\t\t\t\t\t\t\t\t\t  <i class="fab fa-ethereum"></i>\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t  </div>\r\n\t\t\t\t\t\t\t\t\t  <input type="text" id="ethToSell" class="form-control text-center" placeholder="0.01 P3D">\r\n\t\t\t\t\t\t\t\t\t  <div class="input-group-append">\r\n\t\t\t\t\t\t\t\t\t\t<span class="input-group-text" id="ethQuotation">\r\n\t\t\t\t\t\t\t\t\t\t  = 0 ETH\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t  </div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t  </div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div class="row">\r\n\t\t\t\t\t\t\t\t\t<div class="col">\r\n\t\t\t\t\t\t\t\t\t\t<p class="small text-center">Note: ETH will be deposited in your vault. You need to manually withdraw it to your wallet.</p>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div class="row" style="position: relative;">\r\n\t\t\t\t\t\t\t\t  <div class="col">\r\n\t\t\t\t\t\t\t\t\t<button type="button" id="ethSell" class="btn btn-block btn-gren btn-lg ticketProcess"><i class="fab fa-ethereum"></i> Sell P3D</button>\r\n\t\t\t\t\t\t\t\t  </div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t  </div>\r\n\t\t\t\t\t\t  </div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<!-- /sell p3d -->\t\r\n\r\n\t\t\t\t<!-- vanity -->\r\n\t\t\t\t<div class="tab-pane fade" id="refArea" role="tabpanel" aria-labelledby="refArea">\r\n\t\t\t\t\t<div class="jumbotron jumbotron-adjust text-light bg-dark jumboshade tab-rounded">\r\n\t\t\t\t\t\t\t\t<div class="row">\r\n\t\t\t\t\t\t\t\t\t<div class="col">\r\n\t\t\t\t\t\t\t\t\t\t<p class="lead nomarginb">Masternodes:</p>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div class="col-auto">\r\n\t\t\t\t\t\t\t\t\t\t<p class="text-right nomarginb tutorial">\r\n\t\t\t\t\t\t\t\t\t\t\t<i class="fas fa-arrow-right pulsetutorial tutorialArrow"></i>\r\n\t\t\t\t\t\t\t\t\t\t\t<a tabindex="0" type="button" class="qbtn" role="button" data-toggle="popover" data-trigger="focus" data-html="true" data-placement="bottom" title="Expand the Network" data-content="{popover.p3dmasternode}">\r\n\t\t\t\t\t\t\t\t\t\t\t<i class="far fa-question-circle"></i>\r\n\t\t\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class="jumbotron jumbotron-adjust teamscore">\r\n\t\t\t\t\t\t\t<div class="row">\r\n\t\t\t\t\t\t\t\t<div class="col">\r\n\t\t\t\t\t\t\t\t<p class="lead">Owning 100 P3D unlocks the Masternode / Referral System</p>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div if={$this.myTokens >= 100}>\r\n\t\t\t\t\t\t\t<div class="row" >\r\n\t\t\t\t\t\t\t\t<div class="col text-center">\r\n\t\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\t\t<i class="fas fa-link"></i>\r\n\t\t\t\t\t\t\t\t\t\t<span class="small" id="mnlink">https://exitscam.me/{web3.eth.defaultAccount}</span>\r\n\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class="row">\r\n\t\t\t\t\t\t\t\t<div class="col">\r\n\t\t\t\t\t\t\t\t\t<button class="btn btn-outline-gren btn-block" id="copyCeoLink" data-clipboard-target="#mnlink"}>\r\n\t\t\t\t\t\t\t\t\t\t<i class="fas fa-paste"></i> Copy Masternode Link\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<!-- /vanity -->\r\n\t\t\t\t</div>\t\t\r\n\t\t\t</div>\r\n\r\n\t\t\t<!-- stat tabs -->\r\n\t\t\t<div class="col-sm">\r\n\r\n\t\t\t\t<ul class="nav nav-tabs tabs-border-adjust" id="buyTabs" role="tablist">\r\n\t\t\t\t  <li class="nav-item tab-item">\r\n\t\t\t\t    <a class="nav-link nav-link-gren tab-link active" id="vaultTab" data-toggle="tab" href="#vaultArea" role="tab" aria-controls="vaultArea" aria-selected="true">Vault</a>\r\n\t\t\t\t  </li>\r\n\t\t\t\t</ul>\r\n\t\t\t\t<!-- vault -->\r\n\t\t\t\t<div class="tab-pane fade show active" id="vaultArea" role="tabpanel" aria-labelledby="vaultArea">\r\n\t\t\t\t\t<div class="jumbotron jumbotron-adjust text-light bg-dark jumboshade tab-rounded">\r\n\t\t\t\t\t\t<div class="jumbotron jumbotron-adjust teamscore">\r\n\t\t\t\t\t\t<!--  <div class="row">\r\n\t\t\t\t\t\t\t<div class="col">\r\n\t\t\t\t\t\t\t  <p class="lead">Winning Pot (Unused)</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class="col">\r\n\t\t\t\t\t\t\t  <p class="h3 text-right">{(JUST.Bridges.Metamask && JUST.Bridges.Metamask.signedIn && JUST.Cache.currentPlayer && JUST.Cache.currentPlayer.Vaults) ? BN(JUST.Cache.currentPlayer.Vaults[0]).div(1e18).toFixed(4) : BN(0).toFixed(4)} ETH</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t  </div> -->\r\n\t\t\t\t\t\t  <div class="row">\r\n\t\t\t\t\t\t\t<div class="col">\r\n\t\t\t\t\t\t\t  <p class="lead">P3D Tokens</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class="col">\r\n\t\t\t\t\t\t\t  <p class="h3 text-right">{$this.myTokens} P3D</p>\r\n\t\t\t\t\t\t\t  <p class="text-right">{$this.myTokensInETH} <i class="fab fa-ethereum"></i></p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t  </div>\r\n\t\t\t\t\t\t  <div class="row">\r\n\t\t\t\t\t\t\t<div class="col">\r\n\t\t\t\t\t\t\t  <p class="lead">Dividends</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class="col">\r\n\t\t\t\t\t\t\t  <p class="h3 text-right">{$this.myDivs} ETH</p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t  </div>\r\n\t\t\t\t\t\t  <div class="row">\r\n\t\t\t\t\t\t\t<div class="col">\r\n\t\t\t\t\t\t\t\t<p class="text-right nomarginb"><button href="" class="btn btn-outline-gren btn-block" id="withdrawEarnings"><i class="fas fa-hand-holding-heart"></i> Withdraw Dividends</button></p>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t  </div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n\t<!-- modal popup -->\r\n\t<div class="modal fade" id="gameover" tabindex="-1" role="dialog" aria-labelledby="gameoverTitle" aria-hidden="true">\r\n\t\t<div class="modal-dialog modal-dialog-centered" role="document">\r\n\t\t\t<div class="modal-content bg-dark text-light">\r\n\t\t\t\t<div class="modal-header">\r\n\t\t\t\t\t<h5 class="modal-title" id="gameoverTitle">Modal Title</h5>\r\n\t\t\t\t\t<button type="button" class="close" data-dismiss="modal" aria-label="Close">\r\n\t\t\t\t\t\t<span aria-hidden="true">&times;</span>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="modal-body">\r\n\t\t\t\t\tModal Content\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n\t<!-- /modal popup -->\r\n\t\r\n\r\n\t\t<!-- If something breaks delet this script justo made; -->\r\n\t<script>\r\n\t// Contain the popover within the body NOT the element it was called in.\r\n$(\'[data-toggle="popover"]\').popover({\r\n    container: \'body\'\r\n});\r\n\r\n\r\nvar today = new Date();\r\nvar oneDay = 24*60*60*1000; // hours*minutes*seconds*milliseconds\r\nvar firstDate = new Date(2018,02,11); // Date the P3D exchange opened;\r\nvar diffDays = Math.round(Math.abs((today.getTime() - firstDate.getTime())/(oneDay))); \r\n\t</script>\r\n\t\r\n\t<script>\r\n\t\t$this = this\r\n\t\t$this.on(\'mount\', fn => {\r\n\r\n\t\t})\r\n\r\n\t\tasync function assemble(){\r\n\t\t\t$this.USDPerETH = JUST.Cache.P3D.Blockchain[5].USD\r\n\t\t\t$this.myTokens = BN(JUST.Cache.P3D.Blockchain[3]).div(1e18).toFixed(4)\r\n\t\t\t$this.myDivs = BN(JUST.Cache.P3D.Blockchain[4]).div(1e18).toFixed(4)\r\n\t\t\t$this.myTokensInETH = BN(JUST.Cache.P3D.Conversions[0]).div(1e18).toFixed(4)\r\n\t\t\t$this.myTokensInUSD = ($this.myTokensInETH * $this.USDPerETH).toFixed(2)\r\n\t\t\t$this.myDivsInETH = BN(JUST.Cache.P3D.Conversions[1]).div(1e18).toFixed(4)\r\n\t\t\t$this.myDivsInUSD = ($this.myDivs * $this.USDPerETH).toFixed(2)\r\n\t\t\t$this.myReinvestmentQuotation = BN(JUST.Cache.P3D.Conversions[1]).div(1e18).toFixed(4)\r\n\r\n\t\t\t// masternode stuff\r\n\t\t\t// $this.isCEO = JUST.Bridges.Metamask && JUST.Bridges.Metamask.signedIn && JUST.Cache.currentPlayer && JUST.Cache.currentPlayer.Round && JUST.Cache.currentPlayer.Round[1] !== "0x0000000000000000000000000000000000000000000000000000000000000000"\r\n\t\t\t// $this.myLink = $this.isCEO ? `${window.location.origin}/${JUST.Bridges.Metamask.web3.eth.defaultAccount}` : `#`\r\n\t\t\t// // $this.gracePeriod = true\r\n\t\t\t// $this.myLinkid = $this.isCEO ? `${window.location.origin}/${JUST.Cache.currentPlayer.PID.toFixed()}` : `#`\r\n\t\t\t// $this.myLinkName = $this.isCEO ? `${window.location.origin}/${JUST.Bridges.Browser.web3.utils.toAscii(JUST.Cache.currentPlayer.Round[1])}` : `#`\r\n\t\t\t// $this.myLinkName = $this.myLinkName.replace(/ /g,\'%20\')\r\n\t\t\t// $this.masternodes = {\r\n\t\t\t// \tnative: `https://powh.io/?masternode=${web3.eth.defaultAccount}`\r\n\t\t\t// \tid: \r\n\t\t\t// }\r\n\r\n\t\t\tconsole.log($this)\r\n\t\t}\r\n\r\n\t\tasync function rewire(){\r\n\t\t\tawait jQuery( "#ethSend" ).unbind()\r\n\t\t\tawait jQuery( "#ethToSpend" ).unbind()\r\n\t\t\tawait jQuery( "#ethReinvest" ).unbind()\r\n\t\t\tawait jQuery( "#ethSell" ).unbind()\r\n\t\t\tawait jQuery( "#withdrawEarnings" ).unbind()\r\n\r\n\t\t\tnew ClipboardJS(\'.btn\');\r\n\r\n\t\t\t$("#ethToSpend").bind(\'input\', async e => {\r\n\t\t\t\tlet quotation = await JUST.Bridges.Browser.contracts.P3D.read("calculateTokensReceived", BN($(\'#ethToSpend\').val()).multipliedBy(1e18).toFixed())\r\n\t\t\t\t$(\'#tokenQuotation\').text(` = ${BN(quotation).div(1e18).toFixed(4)} P3D`)\r\n\t\t\t})\r\n\r\n\t\t\t$("#ethToSell").bind(\'input\', async e => {\r\n\t\t\t\tlet quotation = await JUST.Bridges.Browser.contracts.P3D.read("calculateEthereumReceived", BN($(\'#ethToSell\').val()).multipliedBy(1e18).toFixed())\r\n\t\t\t\t$(\'#ethQuotation\').text(` = ${BN(quotation).div(1e18).toFixed(4)} ETH`)\r\n\t\t\t})\r\n\r\n\t\t\t$(\'#ethSend\').on(\'click\', async e => {\r\n\t\t\t\tif(!JUST.Bridges.Metamask || !JUST.Bridges.Metamask.signedIn) return alertify.alert("你没有登录 metamask.")\r\n\t\t\t\tlet correctNetwork  = await JUST.checkNetwork()\r\n\t\t\t\tif(!correctNetwork) return alertify.alert("You are not connected to the correct network. Please make sure you are connected to the ETH mainchain.")\r\n\r\n\t\t\t\ttry {\r\n\t\t\t\t\tjQuery(\'#loading\').modal({backdrop: \'static\', keyboard: false})\r\n\t\t\t\t\tlet spending = BN($("#ethToSpend").val()).multipliedBy(1e18).toFixed()\r\n\t\t\t\t\tlet masternode = localStorage.getItem("masternode") && JSON.parse(localStorage.getItem("masternode")) ? JSON.parse(localStorage.getItem("masternode")) : false\r\n\t\t\t\t\tif(masternode.type && masternode.type == "address") {\r\n\t\t\t\t\t\tlet receipt = await JUST.Bridges.Metamask.contracts.P3D.write("buy", masternode.value, {value: spending})\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tlet receipt = await JUST.Bridges.Metamask.contracts.P3D.write("buy", ["0x0"], {value: spending})\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tjQuery(\'#loading\').modal(\'hide\')\r\n\t\t\t\t\talertify.log(`Your P3D purchasing request has been submitted to the blockchain!`)\r\n\t\t\t\t\tconsole.log(receipt)\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tconsole.log(e)\r\n\t\t\t\t\talertify.log(`Buy order has been cancelled.`)\r\n\t\t\t\t\tjQuery(\'#loading\').modal(\'hide\')\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\t\t\t$(\'#ethReinvest\').on(\'click\', async e => {\r\n\t\t\t\tif(!JUST.Bridges.Metamask || !JUST.Bridges.Metamask.signedIn) return alertify.alert("你没有登录 metamask.")\r\n\t\t\t\tlet correctNetwork  = await JUST.checkNetwork()\r\n\t\t\t\tif(!correctNetwork) return alertify.alert("You are not connected to the correct network. Please make sure you are connected to the ETH mainchain.")\r\n\r\n\t\t\t\ttry {\r\n\t\t\t\t\tjQuery(\'#loading\').modal({backdrop: \'static\', keyboard: false})\r\n\t\t\t\t\tlet receipt = await JUST.Bridges.Metamask.contracts.P3D.write("reinvest")\r\n\t\t\t\t\tjQuery(\'#loading\').modal(\'hide\')\r\n\t\t\t\t\talertify.log(`Your P3D reinvest request has been submitted to the blockchain!`)\r\n\t\t\t\t\tconsole.log(receipt)\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tconsole.log(e)\r\n\t\t\t\t\talertify.log(`Reinvest order has been cancelled.`)\r\n\t\t\t\t\tjQuery(\'#loading\').modal(\'hide\')\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\t\t\t$(\'#ethSell\').on(\'click\', async e => {\r\n\t\t\t\tif(!JUST.Bridges.Metamask || !JUST.Bridges.Metamask.signedIn) return alertify.alert("你没有登录 metamask.")\r\n\t\t\t\tlet correctNetwork  = await JUST.checkNetwork()\r\n\t\t\t\tif(!correctNetwork) return alertify.alert("You are not connected to the correct network. Please make sure you are connected to the ETH mainchain.")\r\n\r\n\t\t\t\ttry {\r\n\t\t\t\t\tjQuery(\'#loading\').modal({backdrop: \'static\', keyboard: false})\r\n\t\t\t\t\tlet selling = BN($("#ethToSell").val()).multipliedBy(1e18).toFixed()\r\n\t\t\t\t\tlet receipt = await JUST.Bridges.Metamask.contracts.P3D.write("sell", [selling])\r\n\t\t\t\t\tjQuery(\'#loading\').modal(\'hide\')\r\n\t\t\t\t\talertify.log(`Your P3D selling request has been submitted to the blockchain!`)\r\n\t\t\t\t\tconsole.log(receipt)\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tconsole.log(e)\r\n\t\t\t\t\talertify.log(`Sell order has been cancelled.`)\r\n\t\t\t\t\tjQuery(\'#loading\').modal(\'hide\')\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\t\t\t$(\'#withdrawEarnings\').on(\'click\', async e => {\r\n\t\t\t\tif(!JUST.Bridges.Metamask || !JUST.Bridges.Metamask.signedIn) return alertify.alert("你没有登录 metamask.")\r\n\t\t\t\tlet correctNetwork  = await JUST.checkNetwork()\r\n\t\t\t\tif(!correctNetwork) return alertify.alert("You are not connected to the correct network. Please make sure you are connected to the ETH mainchain.")\r\n\r\n\t\t\t\ttry {\r\n\t\t\t\t\tjQuery(\'#loading\').modal({backdrop: \'static\', keyboard: false})\r\n\t\t\t\t\tlet receipt = await JUST.Bridges.Metamask.contracts.P3D.write("withdraw")\r\n\t\t\t\t\tjQuery(\'#loading\').modal(\'hide\')\r\n\t\t\t\t\talertify.log(`Your P3D withdrawal request has been submitted to the blockchain!`)\r\n\t\t\t\t\tconsole.log(receipt)\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tconsole.log(e)\r\n\t\t\t\t\talertify.log(`Withdrawal order has been cancelled.`)\r\n\t\t\t\t\tjQuery(\'#loading\').modal(\'hide\')\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\t$this.on(\'update\', assemble)\r\n\t\t$this.on(\'updated\', rewire)\r\n\t\t$this.on(\'before-mount\', assemble)\r\n\t\t$this.on(\'mount\', rewire)\r\n\t\tthis.on(\'unmount\', fn => {\r\n\t\t\tif($this.timer && typeof $this.timer !== "undefined") clearTimeout($this.timer)\r\n\t\t})\r\n\t</script>\r\n\r\n<!-- \t<script>\r\n\t\r\n\t\t$this = this\r\n\t\t$this.refresher = debounce(async () => {\r\n\t\t\tJUST.Cache.currentRound = await JUST.Bridges.Browser.contracts.Fomo3D.read("getCurrentRoundInfo")\r\n\t\t\t$this.update()\r\n\t\t}, 500)\r\n\r\n\r\n\t\tasync function assemble() {\r\n\t\t\t$this.roundHasPassed = Math.floor( JUST.date().getTime() / 1000) > JUST.Cache.currentRound[3]\r\n\t\t\t$this.playerIsLeader = JUST.Bridges.Metamask && JUST.Bridges.Metamask.signedIn && Math.floor(parseInt(JUST.Cache.currentRound[6]/10)) == parseInt(JUST.Cache.currentPlayer.PID)\r\n\t\t\t$this.playerHasWon = $this.roundHasPassed && $this.playerIsLeader\r\n\t\t\t$this.isCEO = JUST.Bridges.Metamask && JUST.Bridges.Metamask.signedIn && JUST.Cache.currentPlayer && JUST.Cache.currentPlayer.Round && JUST.Cache.currentPlayer.Round[1] !== "0x0000000000000000000000000000000000000000000000000000000000000000"\r\n\t\t\t$this.myLink = $this.isCEO ? `${window.location.origin}/${JUST.Bridges.Metamask.web3.eth.defaultAccount}` : `#`\r\n\t\t\t$this.gracePeriod = $this.roundHasPassed && (Math.floor( JUST.date().getTime() / 1000) < (parseInt(JUST.Cache.currentRound[3]) + 300) )\r\n\t\t}\r\n\r\n\t\tasync function rewire() {\r\n\r\n\t\t\tif($this.isCEO) jQuery(".afflink span").text($this.myLink)\r\n\r\n\r\n\t\t\tif(!$this.roundHasPassed) {\r\n\t\t\t\tclearTimeout($this.timer)\r\n\t\t\t\tjQuery("#quotes").addClass("active")\r\n\t\t\t\tif(JUST.Bridges.Metamask && JUST.Bridges.Metamask.signedIn){\r\n\t\t\t\t\tjQuery(".yourkeys span").text(BN(JUST.Cache.currentPlayer.Round[2]).div(1e18).toFixed(4))\r\n\t\t\t\t} else {\r\n\t\t\t\t\tjQuery(".yourkeys span").text("0")\r\n\r\n\t\t\t\t}\r\n\t\t\t\t$this.timer = createCountdown(JUST.Cache.currentRound[3], async data => {\r\n\t\t\t\t\tnow = (JUST.date().getTime() / 1000)\r\n\r\n\t\t\t\t\t// console.log({\r\n\t\t\t\t\t// \tcurrentTime: new Date(now * 1000), \r\n\t\t\t\t\t// \troundEnd: new Date(parseInt(JUST.Cache.currentRound[3]) * 1000),\r\n\t\t\t\t\t// \troundOver:  now < parseInt(JUST.Cache.currentRound[3]),\r\n\t\t\t\t\t// \troundID: JUST.Cache.currentRound[1],\r\n\t\t\t\t\t// \tpot: JUST.Cache.currentRound[5]\r\n\r\n\t\t\t\t\t// })\r\n\r\n\t\t\t\t\tif(now < parseInt(JUST.Cache.currentRound[3])){\r\n\t\t\t\t\t\tjQuery(".headtimer").text(`in ${(data.hours == "00" ? "" : data.hours + ":") }${data.minutes}:${data.seconds}`)\r\n\t\t\t\t\t\tjQuery(".boxtimer").text(`${(data.hours == "00" ? "" : data.hours + ":") }${data.minutes}:${data.seconds}`)\r\n\r\n\t\t\t\t\t\tvar timeTotal = parseInt(parseInt(JUST.Cache.currentRound[4]) - parseInt(JUST.Cache.currentRound[4])) + 90\r\n\t\t\t\t\t\tvar timeRemaining = parseInt(JUST.Cache.currentRound[3]) - now \r\n\t\t\t\t\t\tvar timePercentage = 100 - timeRemaining / (timeTotal / 100)\r\n\r\n\t\t\t\t\t\t//console.log(timeTotal, timeRemaining, Math.floor(timePercentage))\r\n\r\n\t\t\t\t\t\tjQuery(".progress-bar.boxglow").css(\'width\', `${Math.floor(timePercentage)}%`)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.log("expired")\r\n\t\t\t\t\t\tjQuery("#quotes").removeClass("active")\r\n\r\n\t\t\t\t\t\t// clear timer from stack\r\n\t\t\t\t\t\tclearTimeout($this.timer)\r\n\t\t\t\t\t\t// refresh dom\r\n\t\t\t\t\t\t$this.refresher()\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t\tif($this.gracePeriod) {\r\n\t\t\t\tclearTimeout($this.graceTimer)\r\n\r\n\t\t\t\t$this.timer = createCountdown(parseInt(JUST.Cache.currentRound[3]) + 300, async data => {\r\n\t\t\t\t\tnow = (JUST.date().getTime() / 1000)\r\n\r\n\r\n\t\t\t\t\tif(now < (parseInt(JUST.Cache.currentRound[3]) + 300) ){\r\n\t\t\t\t\t\tjQuery(".graceTimer").text(`${(data.hours == "00" ? "" : data.hours + ":") }${data.minutes}:${data.seconds}`)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.log("end of grace timer")\r\n\t\t\t\t\t\t$this.gracePeriod = false\r\n\t\t\t\t\t\t// clear timer from stack\r\n\t\t\t\t\t\tclearTimeout($this.graceTimer)\r\n\t\t\t\t\t\t// refresh dom\r\n\t\t\t\t\t\t$this.refresher()\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t\tawait jQuery( ".buyOneTicket" ).unbind()\r\n\t\t\tawait jQuery( "#tixBuy" ).unbind()\r\n\t\t\tawait jQuery( "#tixReinvest" ).unbind()\r\n\t\t\tawait jQuery( "#withdrawEarnings" ).unbind()\r\n\r\n\t\t\tjQuery(".buyOneTicket").click(async e  => {\r\n\t\t\t\tif(!JUST.Bridges.Metamask || !JUST.Bridges.Metamask.signedIn) return alertify.alert("你没有登录 metamask.")\r\n\t\t\t\tlet correctNetwork  = await JUST.checkNetwork()\r\n\t\t\t\tif(!correctNetwork) return alertify.alert("You are not correct to the testnet. Please navigate to <a style=\'color: #1e10f8;text-decoration: underline;\' href=\'https://testnet.teamjust.io\'>the testnet portal and follow the instructions</a>.")\r\n\t\t\t\tvar masternode = window.localStorage.getItem("masternode") ? window.localStorage.getItem("masternode") : "0x0" \r\n\r\n\t\t\t\ttry {\r\n\t\t\t\t\tlet priceQuotation = await JUST.Bridges.Browser.contracts.Fomo3D.read(\'iWantXKeys\', [BN(1e18)])\r\n\t\t\t\t\tjQuery(\'#loading\').modal({backdrop: \'static\', keyboard: false})\r\n\t\t\t\t\tlet receipt = await JUST.Bridges.Metamask.contracts.Fomo3D.write("buy", [masternode, 1], {value: priceQuotation})\r\n\t\t\t\t\tjQuery(\'#loading\').modal(\'hide\')\r\n\t\t\t\t\talertify.log(`Your key purchasing request has been submitted to the blockchain!`)\r\n\t\t\t\t\tconsole.log(receipt)\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tconsole.log(e)\r\n\t\t\t\t\talertify.log(`Buy order has been cancelled.`)\r\n\t\t\t\t\tjQuery(\'#loading\').modal(\'hide\')\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t})\r\n\r\n\t\t\t/**\r\n\t\t\t * Whenever the input of ethToSpend changes..\r\n\t\t\t */\r\n\t\t\tjQuery("#ethToSpend").bind(\'input\', getQuote)\r\n\r\n\t\t\t/**\r\n\t\t\t * When the purchase button is clicked.\r\n\t\t\t */\r\n\t\t\tjQuery("#tixBuy").click( async e => {\r\n\t\t\t\tif(!JUST.Bridges.Metamask || !JUST.Bridges.Metamask.signedIn) return alertify.alert("你没有登录 metamask.")\r\n\t\t\t\tlet correctNetwork  = await JUST.checkNetwork()\r\n\t\t\t\tif(!correctNetwork) return alertify.alert("You are not correct to the testnet. Please navigate to <a style=\'color: #1e10f8;text-decoration: underline;\' href=\'https://testnet.teamjust.io\'>the testnet portal and follow the instructions</a>.")\r\n\t\t\t\tlet count = String(jQuery("#ethToSpend").val()).replace("keys", "").replace("key", "").replace("Keys", "").replace("Key", "")\r\n\t\t\t\tif(!Number.isInteger(parseInt(count))) return\r\n\t\t\t\tvar masternode = window.localStorage.getItem("masternode") ? window.localStorage.getItem("masternode") : "0x0" \r\n\t\t\t\tcount = BN(count).multipliedBy(1e18)\r\n\r\n\t\t\t\ttry {\r\n\t\t\t\t\tlet priceQuotation = await JUST.Bridges.Browser.contracts.Fomo3D.read(\'iWantXKeys\', [count])\r\n\t\t\t\t\tjQuery(\'#loading\').modal({backdrop: \'static\', keyboard: false})\r\n\t\t\t\t\tlet team = $("input[name=\'teamselect\']:checked").val()\r\n\t\t\t\t\tif(!team) team = 0\r\n\t\t\t\t\tlet receipt = await JUST.Bridges.Metamask.contracts.Fomo3D.write("buy", [masternode, team], {value: priceQuotation})\r\n\t\t\t\t\talertify.log(`Your ticket purchasing request has been submitted to the blockchain!`)\r\n\t\t\t\t\tjQuery(\'#loading\').modal(\'hide\')\r\n\r\n\t\t\t\t\tconsole.log(receipt)\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\talertify.log(`Buy order has been cancelled.`)\r\n\t\t\t\t\tjQuery(\'#loading\').modal(\'hide\')\r\n\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t})\r\n\r\n\t\t\t/**\r\n\t\t\t * When the reinvest button is clicked.\r\n\t\t\t */\r\n\t\t\tjQuery("#tixReinvest").click( async e => {\r\n\t\t\t\tif(!JUST.Bridges.Metamask || !JUST.Bridges.Metamask.signedIn) return alertify.alert("你没有登录 metamask.")\r\n\t\t\t\tlet correctNetwork  = await JUST.checkNetwork()\r\n\t\t\t\tif(!correctNetwork) return alertify.alert("You are not correct to the testnet. Please navigate to <a style=\'color: #1e10f8;text-decoration: underline;\' href=\'https://testnet.teamjust.io\'>the testnet portal and follow the instructions</a>.")\r\n\t\t\t\tlet vaultEarnings = BN(JUST.Cache.currentPlayer.Vaults[0]).plus(JUST.Cache.currentPlayer.Vaults[1]).plus(JUST.Cache.currentPlayer.Vaults[2])\r\n\t\t\t\tlet count = String(jQuery("#ethToSpend").val()).replace("keys", "").replace("key", "").replace("Keys", "").replace("Key", "")\r\n\t\t\t\tvar masternode = window.localStorage.getItem("masternode") ? window.localStorage.getItem("masternode") : "0x0" \r\n\t\t\t\tif(!Number.isInteger(parseInt(count))) return\r\n\t\t\t\tcount = BN(count).multipliedBy(1e18)\r\n\r\n\t\t\t\ttry {\r\n\t\t\t\t\tlet priceQuotation = await JUST.Bridges.Browser.contracts.Fomo3D.read(\'iWantXKeys\', [count])\r\n\t\t\t\t\tif(vaultEarnings.isLessThan(BN(priceQuotation))) return alertify.alert(`You don\'t have ${BN(priceQuotation).div(1e18).toFixed(4)} ETH in your vault to pay for ${count.div(1e18).toFixed(4)} keys. You only have ${vaultEarnings.div(1e18).toFixed(4)} ETH in your vault.`)\r\n\t\t\t\t\tjQuery(\'#loading\').modal({backdrop: \'static\', keyboard: false})\r\n\t\t\t\t\tlet receipt = await JUST.Bridges.Metamask.contracts.Fomo3D.write("reLoad", [masternode, $("input[name=\'teamselect\']:checked").val(), priceQuotation])\r\n\t\t\t\t\talertify.log(`Your ticket purchasing request has been submitted to the blockchain!`)\r\n\t\t\t\t\tjQuery(\'#loading\').modal(\'hide\')\r\n\r\n\t\t\t\t\tconsole.log(receipt)\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\talertify.log(`Buy order has been cancelled.`)\r\n\t\t\t\t\tjQuery(\'#loading\').modal(\'hide\')\r\n\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\t\t\tjQuery("#withdrawEarnings").click(async e => {\r\n\t\t\t\tlet correctNetwork  = await JUST.checkNetwork()\r\n\t\t\t\tif(!correctNetwork) return alertify.alert("You are not correct to the testnet. Please navigate to <a style=\'color: #1e10f8;text-decoration: underline;\' href=\'https://testnet.teamjust.io\'>the testnet portal and follow the instructions</a>.")\r\n\t\t\t\tif(!JUST.Bridges.Metamask || !JUST.Bridges.Metamask.signedIn) return alertify.alert("你没有登录 metamask.")\r\n\t\t\t\tjQuery(\'#loading\').modal({backdrop: \'static\', keyboard: false})\r\n\t\t\t\ttry {\r\n\t\t\t\t\tlet receipt = await JUST.Bridges.Metamask.contracts.Fomo3D.write("withdraw")\r\n\t\t\t\t\tjQuery(\'#loading\').modal(\'hide\')\r\n\t\t\t\t\talertify.log(`Your withdrawal request has been submitted to the blockchain!`)\r\n\t\t\t\t\tconsole.log(receipt)\r\n\r\n\t\t\t\t} catch(e) {\r\n\t\t\t\t\talertify.log(`Withdrawal has been cancelled.`)\r\n\t\t\t\t\tjQuery(\'#loading\').modal(\'hide\')\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t})\r\n\r\n\r\n\t\t\tgetQuote()\t\t\r\n\t\t}\r\n\r\n\t\tasync function getQuote(){\r\n\t\t\tlet count = String(jQuery("#ethToSpend").val()).replace("key", "").replace("keys", "").replace("Key", "").replace("Keys", "")\r\n\t\t\tif(!Number.isInteger(parseInt(count))) return\r\n\t\t\tcount = BN(count).multipliedBy(1e18)\r\n\t\t\t\r\n\t\t\tlet priceQuotation = await JUST.Bridges.Browser.contracts.Fomo3D.read(\'iWantXKeys\', [count])\r\n\r\n\t\t\tjQuery("#tixQuotation").text(`@ ${BN(priceQuotation).div(1e18).toFixed(8)} ETH`)\r\n\r\n\t\t\tconsole.log(priceQuotation)\r\n\t\t}\r\n\r\n\r\n\t\t$this.on(\'update\', assemble)\r\n\t\t$this.on(\'updated\', rewire)\r\n\t\t$this.on(\'before-mount\', assemble)\r\n\t\tthis.on(\'unmount\', fn => {\r\n\t\t\tif($this.timer && typeof $this.timer !== "undefined") clearTimeout($this.timer)\r\n\t\t})\r\n\t\t\r\n\r\n\t\tJUST.UI.on(\'ui.refresh\', () => $this.refresher() )\r\n\r\n\t\t\t\r\n\t\t$this.on(\'mount\', function(){\r\n\t\t\t\r\n\t\t\t// wire listeners\r\n\t\t\trewire()\r\n\r\n\t\t\tnew ClipboardJS(\'.btn\');\r\n\r\n\t\t  // Teamselection to var\r\n\t\t  jQuery(\'.ticketProcess\').click(function(){\r\n\t\t\tvar team = $("input[name=\'teamselect\']:checked").val()\r\n\t\t\tconsole.log(team)\r\n\t\t  });\r\n\t\t\t\t\r\n\t\t  // Increase ticket amount to buy with buttons\r\n\t\t  jQuery(\'.increment\').click(function(){\r\n\t\t\tlet id = this.id\r\n\t\t\t\r\n\t\t\tif(id == \'addOne\'){ \r\n\t\t\t  var increment = 1\r\n\t\t\t}\r\n\t\t\tif(id == \'addTwo\'){ \r\n\t\t\t  var increment = 2\r\n\t\t\t}\r\n\t\t\tif(id == \'addFive\'){\r\n\t\t\t  var increment = 5\r\n\t\t\t}\r\n\t\t\tif(id == \'addTen\'){\r\n\t\t\t  var increment = 10\r\n\t\t\t}\r\n\r\n\t\t\tif(id == \'addHundred\'){\r\n\t\t\t  var increment = 100\r\n\t\t\t}\r\n\t\t\tif(jQuery(\'#ethToSpend\').val()){\r\n\t\t\t\t///replace("key", "").replace("keys", "").replace("Key", "").replace("Keys", "")\r\n\t\t\t\tvar iVal = parseInt(String(jQuery("#ethToSpend").val()).replace("keys", "").replace("key", "").replace("Keys", "").replace("Key", ""))\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tvar iVal = 1\r\n\t\t\t}\r\n\r\n\t\t\tlet nVal = iVal + increment\r\n\r\n\t\t\tjQuery("#ethToSpend").val(nVal.toString())\r\n\r\n\t\t\tgetQuote()\r\n\t\t  });\r\n\r\n\t\t  // Quote script\r\n\t\t  jQuery(".qTarget").text(memes.global.quoteRoulette[Math.floor(Math.random()*memes.global.quoteRoulette.length)]);\r\n\r\n\t\t  // Enable popovers\r\n\t\t  jQuery(".qbtn").click(function(){\r\n\t\t\tjQuery(\'[data-toggle="popover"\').popover()\r\n\t\t  })\r\n\t\t  \r\n\t\t  // open vanity from ceo box\r\n\t\t  jQuery(".buyceo").click(async e => {\r\n\t\t  \tlet correctNetwork  = await JUST.checkNetwork()\r\n\t\t\t\tif(!correctNetwork) return alertify.alert("You are not correct to the testnet. Please navigate to <a style=\'color: #1e10f8;text-decoration: underline;\' href=\'https://testnet.teamjust.io\'>the testnet portal and follow the instructions</a>.")\r\n\t\t\tjQuery(\'#vanity\').modal()\r\n\t\t  })\r\n\r\n\t\t  // Teamselect localstorage thingy\r\n\t\t  \tif(window.localStorage.length > 0){\r\n\t\t\t\tif(localStorage[\'teamsnek\'] == "yes"){\r\n\t\t\t\t\tjQuery("#teamsnek").prop("checked", true);\r\n\t\t\t\t}\r\n\t\t\t\tif(localStorage[\'teamwhale\'] == "yes"){\r\n\t\t\t\t\tjQuery("#teamwhale").prop("checked", true);\r\n\t\t\t\t}\r\n\t\t\t\tif(localStorage[\'teambull\'] == "yes"){\r\n\t\t\t\t\tjQuery("#teambull").prop("checked", true);\r\n\t\t\t\t}\r\n\t\t\t\tif(localStorage[\'teambear\'] == "yes"){\r\n\t\t\t\t\tjQuery("#teambear").prop("checked", true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\t\tjQuery("#teamsnek").prop("checked", true);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t// save team\r\n\t\t\tjQuery(\'.ticketProcess\').click(function(){\r\n\t\t\t\tif(jQuery(\'#teamsnek\').prop("checked", true)){\r\n\t\t\t\t\tlocalStorage.setItem(\'teamsnek\', \'yes\');\r\n\t\t\t\t}\r\n\t\t\t\tif(jQuery(\'#teamwhale\').prop("checked", true)){\r\n\t\t\t\t\tlocalStorage.setItem(\'teamwhale\', \'yes\');\r\n\t\t\t\t}\r\n\t\t\t\tif(jQuery(\'#teambull\').prop("checked", true)){\r\n\t\t\t\t\tlocalStorage.setItem(\'teambull\', \'yes\');\r\n\t\t\t\t}\r\n\t\t\t\tif(jQuery(\'#teambear\').prop("checked", true)){\r\n\t\t\t\t\tlocalStorage.setItem(\'teambear\', \'yes\');\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\r\n\t  })\r\n\t</script> -->\r\n\r\n</state-p3d>',
    );

    riot.compile(
      '<state-shakedown>\r\n\r\n<html>\r\n<head>\r\n    <!-- <meta charset="utf-8" /> -->\r\n\t<!-- <title>ImFomo: It\'s your turn to exit scam now</title> -->\r\n\t<!-- <meta property="og:title" content="ImFomo: It\'s your turn to exit scam now" /> -->\r\n\t<!-- <meta name="description" content="Fear Of Missing Out 3D (ImFomo) is a psychological social experiment in greed, fill your wallets with the greed of others."> -->\r\n\t<!-- <meta property="og:description" content="Fear Of Missing Out 3D (ImFomo) is a psychological social experiment in greed, fill your wallets with the greed of others." />  -->\r\n\t<!-- <meta name="keywords" content="Fomo,ImFomo,Fear of Missing Out 3D,Ethereum,Cryptocurrency,Bitcoin,Invest,Fear of Missing Out,Blockchain,Solidity"> -->\r\n    <!-- <meta name="author" content="Team JUST"> -->\r\n\t<!-- <meta property="og:type" content="website" /> -->\r\n\t<!-- <meta property="og:url" content="https://exitscam.me"/> -->\r\n\t<!-- <meta property="og:image" content="https://p3d-bot.github.io/img/portfolio/gif1.gif" /> -->\r\n\t<!-- <meta property="og:image:width" content="400" /> -->\r\n\t<!-- <meta property="og:image:height" content="400" /> -->\r\n\t<!-- <meta name="viewport" content="width=device-width, initial-scale=1"> -->\r\n\t\r\n\t\r\n\t\r\n\t\r\n\t<link href="https://fonts.googleapis.com/css?family=Roboto:100,300" rel="stylesheet">\r\n\t<link href="https://fonts.googleapis.com/css?family=Poppins:100,200,400" rel="stylesheet">\r\n\t<link rel="stylesheet" href="/css/shakedown/bootstrap.min.css">\r\n\t<link rel="stylesheet" href="/css/shakedown/glitch.css">\r\n\t<link rel="stylesheet" href="/css/shakedown/nfitem.css">\r\n\t<link rel="stylesheet" href="/css/shakedown/justo.css">\r\n\r\n</head>\r\n<body>\r\n<div style="background-color:#240624" class="container-fluid">\r\n\r\n<section id=Tagline>\r\n<div class="d-flex" style="margin-top:10vh;height:100vh">\r\n\t<div class="container text-center">\r\n\t\t<div class="domo col-md-12 col-align-self-center" align="center">\r\n\t\t\t<p class="header"> \r\n\t\t\tALL THE <span class="glitch" data-text="FEAR">FUN</span> <BR>\r\n\t\t\tOF AN EXIT SCAM <BR><BR>\r\n\t\t\tWHERE <span class="h1s" style="font-weight:400">YOU</span> TAKE EVERYTHING\r\n\t\t\t</p>\r\n\t\t\t\t\t\t<!-- <Span style="font-size: 2rem;color:#702569"><br><span id="timer"></span><br><span> -->\r\n\t\t\t<a href="/play">\r\n\t\t\t\t<div class="poppins pulse header btn btn-purp col-md-6" style="margin: .1rem; padding-bottom: .5rem; padding-top: 1.5rem;font-size: 4.5rem;line-height: .3;letter-spacing: .15rem;" align="center">\r\n\t\t\t\t\t<p>Im<SPAN style=font-weight:400>Fomo </SPAN></p>\r\n\t\t\t\t</div>\r\n\t\t\t</a>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n</section>\r\n\r\n\r\n\r\n\r\n<section id=memes>\r\n\t<div class="container-fluid">\r\n\r\n\t\t<div class ="row">\r\n\t\t\t<div class="col-md-3 col-sm-1" align="left">\r\n\t\t\t\t\t<img style="width:25%" src="img/powh3rglass.png"/>\r\n\t\t\t</div>\r\n\t\t<div class="col-md-6 jumbotron4 jumbotron-adjust jumboshade" style="color:#d1c0d1" align="center">\r\n\t\t\t<span class=memetext> \r\n\t\t\t<h1 style="color:white">What is it?</h1>\r\n\t\t\t<h3>It\'s <span class="h1s" style="font-weight:400">your</span> exit scam</h3>\r\n\t\t\t<span class="glitch" style="font-size:1.5rem" data-text="Don\'t fomo in"><span style="opacity:0">xxxxxxxxxxxxxxx</span></span>\r\n\t\t\t<BR><BR>\r\n\t\t\tWelcome to blockchain development<BR>\r\n\t\t\tYour ICO is over,<BR>\r\n\t\t\tHype is drying up.<BR>\r\n\t\t\t<b>Take the <span class="h1s-light">private keys</span>; drain everything.</b> <br>\r\n\t\t\t\r\n\t\t\t<br>\r\n\t\t\t<br>\r\n\t\t\tYou <i>will</i> guarantee yourself a fortune<br>\r\n\t\t\tYou <i>will</i> take everything for yourself<br>\r\n\t\t\tIt\'s as simple as buying the last key.<br>\r\n\t\t\t<b style=color:#e6ae49>When hype runs out, the last player, drains the contract</b>\r\n\t\t\t<br>\r\n\t\t\t<a href="/play" class="poppins col-md-4 btn btnpad btn-outline-purp"><span style="color:white; font-size: 2rem;"><span class="h1s-light" style="font-weight:400">IT SHOULD BE YOU</span></span></a>\r\n\t\t\t\r\n\t\t\t</span>\r\n\t\t</div>\r\n\t\t\t<div class="col-md-3 col-sm-1" align="right">\r\n\t\t\t\t\t<img style="width:25%" src="img/powh3rglass.png"/>\r\n\t\t\t</div>\t\t\r\n\t\t</div>\r\n</section>\t\r\n</div>\r\n\r\n<div style="background-color:#240624" class="container-fluid">\r\n<section id=explainer>\r\n\t<div style="font-color:#333" class="container-fluid">\r\n\t\t<div class=row>\r\n\t\t\t<div class="col-md-2"></div>\r\n\t\t\t<div class="col-md-4 jumbotron4 text-center">\r\n\t\t\t\t<img class="mobile-image" src="img/about4.gif"></img>\r\n\t\t\t\t\t<a href="/play">\r\n\t\t\t\t\t\t<div class="poppins btn btn-block btn-purp" style="margin: .5rem; padding-bottom: .5rem; padding-top: 1.5rem;font-size: 4.5rem;line-height: .3;letter-spacing: .15rem;" align="center">\r\n\t\t\t\t\t\t\t<p style=font-weight:200>FOMO<SPAN style=font-weight:400>3D </SPAN></p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</a>\r\n\t\t\t\t<i>We\'re pretty sure this is some form of evil super-science</i>\r\n\t\t\t</div>\r\n\t\t\t<div class=col-md-4>\r\n\t\t\t\t<div class="jumbotron3 jumbotron-adjust jumboshade">\r\n\t\t\t\t<h1 Style="font-weight:200" class="killmargin poppins">FOMO<span style=font-weight:400>3D</span></h1>\r\n\t\t\t\t<h4 class="poppins" style="color:#6e006e">WELCOME TO A PSYCHOLOGICAL SOCIAL EXPERIMENT IN GREED</H4>\r\n\t\t\t\t<h6 class="poppins"><i style=color:grey>THE PROFITABLE KIND</i></h6>\r\n\t\t\t\t<br>\r\n\t\t\t\t<span>These two games (Long Con / Quick Scam) are built to simulate the standard hype -> release -> pump -> dump: cycles of the countless ICO <b>exit scams</b> across the cryptocurrency space. <br><br>\r\n\t\t\t\t</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="jumbotron2 jumbotron-adjust jumboshade">\r\n\t\t\t\t<span>\r\n\t\t\t\t<span class=poppins>Every round is an <span style=color:red>honest</span> cryptocurrency <b>ICO</b> <br>\r\n\t\t\t\t<i style=font-size:1rem>(A giant timer slowly ticking down towards the inevitable exit-scam of everyone who trusted it)</i> <br></span>\r\n\t\t\t\t<br>\r\n\t\t\t\t<div class="killmargin">\r\n\t\t\t\t<ul>\r\n\t\t\t\t\t<li>Instead of tokens, players purchase keys to the ICO funds held on the contract</li>\r\n\t\t\t\t\t<br>\r\n\t\t\t\t\t<li>Being the last player to buy keys lets <a class="h1s-light">you</a> exit scam the game and drain the ICO funds for <a class="h1s-light">yourself</a> when time runs out.</li>\r\n\t\t\t\t\t<br>\r\n\t\t\t\t\t<li>Keys provide you passive ETH income the longer and higher the round runs. Even locking you an ever increasing personal portion of the ending exit scam!</li>\r\n\t\t\t\t\t<br>\r\n\t\t\t\t\t<li>Every key purchased extends the round time upwards towards a hard cap. To always keep the exit scam within reach of <b>any</b> player</li>\r\n\t\t\t\t\t<br>\r\n\t\t\t\t\t<li>There is <a class="h1s-light titlepopoutrightmini">no limit </a>  to how many times a round can be extended.</li>\r\n\t\t\t\t\t<br>\r\n\t\t\t\t\t<li>Clever players can recruit others, bet early on how high a round might go, or collect <b>mini exit-pot</b> airdrops at any point in the round.</li>\r\n\t\t\t\t\t<br>\r\n\t\t\t\t\t <li>You won\'t walk away empty handed when it ends... <b><a class="yellowtext" href="https://en.wikipedia.org/wiki/The_Button_(Reddit)">if you let it end.</a></b> </li>\r\n\t\t\t\t</ul>\r\n\t\t\t\t</div>\r\n\t\t\t\t</span>\r\n\t\t\t\t<div class="col-md-3"></div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</section>\r\n\r\n<!-- <section style="height:2000" id=advice> -->\r\n\t<!-- <div class=container-fluid> -->\r\n\t\t<!-- <div class="row text-center"> -->\r\n\t\t\t<!-- <div class="col-md-3"></div> -->\r\n\t\t\t<!-- <div class="col-md-6 text-center jumbotron4"> -->\r\n\t\t\t<!-- <span class="poppins" style="color:#d1c0d1;font-size: 2rem;font-weight:200"> -->\r\n\t\t\t<!-- <h1 style="color:#6e006e;font-size: 2.5vw;font-weight:200" class=poppins>Advisory Board</h1> -->\r\n\t\t\t<!-- <h5 class=poppins>Hint: It\'s <span class=h1s-light> you </span></h5> -->\r\n\t\t\t<!-- <br> -->\r\n\t\t\t<!-- If you lure someone to this game of greed, <span class="yellowtext poppins">you can keep them.</span> We\'ll reward you <span class="h1s-light titlepopoutrightmini"> 10% </span> of anything they ever spend, as ethereum, directly to your bad-advice wallet!. -->\r\n\t\t\t<!-- <br> -->\r\n\t\t\t<!-- <br> -->\r\n\t\t\t<!-- Here\'s a <a href="shill-kit.html">full page</a> of material designed for you to build your own army and rake in that bonus; below is a small sample.  -->\r\n\t\t\t<!-- </span> -->\r\n\t\t\t<!-- </div> -->\r\n\t\t\t<!-- <div class="col-md-3"></div> -->\r\n\t\t<!-- </div> -->\r\n\t\t\r\n\t\t<!-- <div class=row> -->\r\n\t\t\t\t\t<!-- <div class="col-md-2"></div> -->\r\n\t\t\t<!-- <div class=col-md-8> -->\r\n\t\t\t <!-- <div class="row jumbotron4"> -->\r\n                    <!-- <ul style="font-size: 2rem;font-weight:100;" class="domo col container-filter categories-filter mb-0"> -->\r\n                        <!-- <li><a class="categories active" data-filter="*">All</a></li> -->\r\n                        <!-- <li><a class="categories" data-filter=".gif">Gif</a></li> -->\r\n                        <!-- <li><a class="categories" data-filter=".logo">Logo</a></li> -->\r\n\t\t\t\t\t\t<!-- <li><a class="categories" data-filter=".art">Art</a></li> -->\r\n                        <!-- <li><a class="categories" data-filter=".tag">Taglines</a></li> -->\r\n                        <!-- <li><a class="categories" data-filter=".snek">Sneks in Hats</a></li> -->\r\n                    <!-- </ul> -->\r\n\t\t\t\t\t\r\n\t\t\t\t\t<!-- <div class="row container-grid"> -->\r\n\t\t\t\t\t\r\n\t\t\t\t\t<!-- GIFS -->\r\n\t\t\t\t\t<!-- GIFS -->\r\n\t\t\t\t\t\t<!-- <div class="item-box nf-item gif"> -->\r\n\t\t\t\t\t\t\t<!-- <a href="img/kit/gif0.gif"> -->\r\n\t\t\t\t\t\t\t\t<!-- <img class="smol"  src="img/kit/gif0.gif"></img> -->\r\n\t\t\t\t\t\t\t<!-- </a> -->\r\n\t\t\t\t\t\t<!-- </div> -->\r\n\t\t\t\t\t\t\t<!-- <div class="item-box nf-item gif"> -->\r\n\t\t\t\t\t\t\t<!-- <a href="img/kit/gif3.gif"> -->\r\n\t\t\t\t\t\t\t\t<!-- <img class="smol"  src="img/kit/gif3.gif"></img> -->\r\n\t\t\t\t\t\t\t<!-- </a> -->\r\n\t\t\t\t\t\t<!-- </div> -->\r\n\t\t\t\t\t\t<!-- <div class="item-box nf-item gif"> -->\r\n\t\t\t\t\t\t\t<!-- <a href="img/kit/gif5.gif"> -->\r\n\t\t\t\t\t\t\t\t<!-- <img class="smol"  src="img/kit/gif5.gif"></img> -->\r\n\t\t\t\t\t\t\t<!-- </a> -->\r\n\t\t\t\t\t\t<!-- </div> -->\r\n\t\t\t\t\t\t<!-- <div class="item-box nf-item gif"> -->\r\n\t\t\t\t\t\t\t<!-- <a href="img/kit/gif8.gif"> -->\r\n\t\t\t\t\t\t\t\t<!-- <img class="smol"  src="img/kit/gif8.gif"></img> -->\r\n\t\t\t\t\t\t\t<!-- </a> -->\r\n\t\t\t\t\t\t<!-- </div>\t\t\t\t -->\r\n\t\t\t\t\t<!-- GIFS -->\r\n\t\t\t\t\t<!-- GIFS -->\r\n\t\t\t\t\t\r\n\t\t\t\t\t<!-- ART -->\r\n\t\t\t\t\t<!-- ART -->\r\n\t\t\t\t\t\t<!-- <div class="item-box nf-item art"> -->\r\n\t\t\t\t\t\t\t<!-- <a href="img/kit/high8.jpg"> -->\r\n\t\t\t\t\t\t\t\t<!-- <img  class="smol" src="img/kit/high8.jpg"></img> -->\r\n\t\t\t\t\t\t\t<!-- </a> -->\r\n\t\t\t\t\t\t<!-- </div> -->\r\n\t\t\t\t\t\t<!-- <div class="item-box nf-item art"> -->\r\n\t\t\t\t\t\t\t<!-- <a href="img/kit/high1.jpg"> -->\r\n\t\t\t\t\t\t\t\t<!-- <img  class="smol" src="img/kit/high1.jpg"></img> -->\r\n\t\t\t\t\t\t\t<!-- </a> -->\r\n\t\t\t\t\t\t<!-- </div> -->\r\n\t\t\t\t\t\t<!-- <div class="item-box nf-item art"> -->\r\n\t\t\t\t\t\t\t<!-- <a href="img/kit/high3.jpg"> -->\r\n\t\t\t\t\t\t\t\t<!-- <img  class="smol" src="img/kit/high3.jpg"></img> -->\r\n\t\t\t\t\t\t\t<!-- </a> -->\r\n\t\t\t\t\t\t<!-- </div> -->\r\n\t\t\t\t\t\t<!-- <div class="item-box nf-item art"> -->\r\n\t\t\t\t\t\t\t<!-- <a href="img/kit/high6.jpg"> -->\r\n\t\t\t\t\t\t\t\t<!-- <img  class="smol" src="img/kit/high6.jpg"></img> -->\r\n\t\t\t\t\t\t\t<!-- </a> -->\r\n\t\t\t\t\t\t<!-- </div> -->\r\n\r\n\t\t\t\t\t<!-- ART -->\r\n\t\t\t\t\t<!-- ART -->\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t<!-- LEGOS -->\r\n\t\t\t\t\t<!-- LEGOS -->\r\n\t\t\t\t\t\t<!-- <div class="item-box nf-item logo"> -->\r\n\t\t\t\t\t\t\t<!-- <a href="img/kit/logo4.png"> -->\r\n\t\t\t\t\t\t\t\t<!-- <img  class="smol" src="img/kit/logo4.png"></img> -->\r\n\t\t\t\t\t\t\t<!-- </a> -->\r\n\t\t\t\t\t\t<!-- </div> -->\r\n\t\t\t\t\t\t<!-- <div class="item-box nf-item logo"> -->\r\n\t\t\t\t\t\t\t<!-- <a href="img/kit/logo7.png"> -->\r\n\t\t\t\t\t\t\t\t<!-- <img  class="smol" src="img/kit/logo7.png"></img> -->\r\n\t\t\t\t\t\t\t<!-- </a> -->\r\n\t\t\t\t\t\t<!-- </div> -->\r\n\t\t\t\t\t\t<!-- <div class="item-box nf-item logo"> -->\r\n\t\t\t\t\t\t\t<!-- <a href="img/kit/logo3.png"> -->\r\n\t\t\t\t\t\t\t\t<!-- <img style="max-width:500px" class="smol" src="img/kit/logo3.png"></img> -->\r\n\t\t\t\t\t\t\t<!-- </a> -->\r\n\t\t\t\t\t\t<!-- </div> -->\r\n\t\t\t\t\t<!-- LEGOS -->\r\n\t\t\t\t\t<!-- LEGOS\t -->\r\n\t\t\t\t\r\n\r\n\t\t\t\t\t<!-- TAGLINES -->\r\n\t\t\t\t\t<!-- TAGLINES -->\r\n\t\t\t\t\t\t<!-- <div class="item-box nf-item tag"> -->\r\n\t\t\t\t\t\t\t<!-- <a href="img/kit/high19.jpg"> -->\r\n\t\t\t\t\t\t\t\t<!-- <img  class="smol" src="img/kit/high19.jpg"></img> -->\r\n\t\t\t\t\t\t\t<!-- </a> -->\r\n\t\t\t\t\t\t<!-- </div> -->\r\n\t\t\t\t\t\t<!-- <div class="item-box nf-item tag"> -->\r\n\t\t\t\t\t\t\t<!-- <a href="img/kit/high14.jpg"> -->\r\n\t\t\t\t\t\t\t\t<!-- <img  class="smol" src="img/kit/high14.jpg"></img> -->\r\n\t\t\t\t\t\t\t<!-- </a> -->\r\n\t\t\t\t\t\t<!-- </div> -->\r\n\t\t\t\t\t\t<!-- <div class="item-box nf-item tag"> -->\r\n\t\t\t\t\t\t\t<!-- <a href="img/kit/med8.jpg"> -->\r\n\t\t\t\t\t\t\t\t<!-- <img  class="smol" src="img/kit/med8.jpg"></img> -->\r\n\t\t\t\t\t\t\t<!-- </a> -->\r\n\t\t\t\t\t\t<!-- </div> -->\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t<!-- TAGLINES -->\r\n\t\t\t\t\t<!-- TAGLINES -->\r\n\t\t\t\t\t\r\n\t\t\t\t\t<!-- </div> -->\r\n\t\t\t\t\t <!-- <div class="container" align=center> -->\r\n\t\t\t\t\t <!-- <br> -->\r\n\t\t\t\t\t <!-- <br> -->\r\n\t\t\t\t\t <!-- <br> -->\r\n\t\t\t\t\t <!-- <br> -->\r\n\t\t\t\t\t\t <!-- <div class="jumbotron4 btn col-md-auto"> -->\r\n\t\t\t\t\t\t\t<!-- <a target="_blank" href="shill-kit.html" style="font-size: 3rem;" class="yellowtext poppins">View All</a> -->\r\n\t\t\t\t\t<!-- </div> -->\r\n\t\t\t\t\t<!-- </div> -->\r\n               <!-- </div> -->\r\n\t\t\t<!-- </div> -->\r\n\t\t<!-- </div> -->\r\n\t<!-- </div> -->\r\n<!-- </section> -->\r\n\r\n<!-- <section id=Header> -->\r\n\t<!-- <div class="container-fluid" style="height;200px"> -->\r\n\t\r\n\t<!-- <div class="row"> -->\r\n\t\t<!-- <div style="background-color:#220622;" class="jumbotron2">\t -->\r\n\t\t\t<!-- <a href="https://exitscam.me/1"> -->\r\n\t\t\t\t<!-- <div class="poppins btn col-md-2 col-sm-4 buttontxt" style="width: 15%" align="center"> -->\r\n\t\t\t\t\t<!-- <p style="margin-bottom: 8px">FOMO<SPAN style=font-weight:400>3D </SPAN></p> -->\r\n\t\t\t\t<!-- </div> -->\r\n\t\t\t<!-- </a> -->\r\n\t\t\t<!-- <a href="https://exitscam.me/1"> -->\r\n\t\t\t\t<!-- <div class="poppins pulse-purp btn btn-purp2 buttontxt putbackmargin col-md-2 col-sm-auto" style="width: 15%" align="center"> -->\r\n\t\t\t\t\t<!-- <p style="margin-bottom: 8px">QUICK<SPAN style=font-weight:400>SCAM </SPAN></p> -->\r\n\t\t\t\t<!-- </div> -->\r\n\t\t\t<!-- </a> -->\r\n\t\t\t<!-- <a href="https://exitscam.me/1"> -->\r\n\t\t\t\t<!-- <div class="poppins pulse-blu btn btn-blu2 buttontxt putbackmargin col-md-2 col-sm-auto" style="width: 15%" align="center"> -->\r\n\t\t\t\t\t<!-- <p style="margin-bottom: 8px">LONG<SPAN style=font-weight:400>CON </SPAN></p> -->\r\n\t\t\t\t<!-- </div> -->\r\n\t\t\t<!-- </a> -->\r\n\t\t\t<!-- <a href="https://exitscam.me/1"> -->\r\n\t\t\t\t<!-- <div class="poppins btn btn-viol putbackmargin buttontxt col-md-1 col-sm-auto" style="width: 10%" align="center"> -->\r\n\t\t\t\t\t<!-- <p style="margin-bottom: 8px">P<SPAN style=font-weight:400">3D </SPAN></p> -->\r\n\t\t\t\t<!-- </div> -->\r\n\t\t\t<!-- </a> -->\r\n\t\t\t\t\t\t<!-- <a href="https://exitscam.me/1"> -->\r\n\t\t\t\t<!-- <div class="poppins btn btn-outline-purp putbackmargin2 buttontxt pull-right col-md-2 col-sm-auto" style="width: 10%" align="center"> -->\r\n\t\t\t\t\t<!-- <p style="margin-bottom: 8px">ADVICE-KIT</p> -->\r\n\t\t\t\t<!-- </div> -->\r\n\t\t\t<!-- </a> -->\r\n\t\t\t\t\t\t<!-- <a href="https://discord.gg/DbapvnH"> -->\r\n\t\t\t\t<!-- <div class="poppins btn btn-outline-purp putbackmargin2 buttontxt pull-right col-md-2 col-sm-auto" style="width: 12%" align="center"> -->\r\n\t\t\t\t\t<!-- <p style="margin-bottom: 8px">COMMUNITY</p> -->\r\n\t\t\t\t<!-- </div> -->\r\n\t\t\t<!-- </a> -->\r\n\t\t\t\t\t\t<!-- <a href="https://exitscam.me/advice-kit.html"> -->\r\n\t\t\t\t<!-- <div class="poppins btn btn-outline-yel putbackmargin2 buttontxt pull-right col-md-1 col-sm-auto" style="width: 10%" align="center"> -->\r\n\t\t\t\t\t<!-- <p style="margin-bottom: 8px">WIKI</p> -->\r\n\t\t\t\t<!-- </div> -->\r\n\t\t\t<!-- </a> -->\r\n\t\t<!-- </div> -->\r\n\t<!-- </div> -->\r\n<!-- </div> -->\r\n<!-- </section> -->\r\n\r\n\t\r\n<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>\r\n<script src="/js/bootstrap.min.js"></script>\r\n<script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>\r\n\r\n<script>\r\n$(function() {\r\n  $(\'#spacer\').addClass(\'spacerhide\');\r\n});\r\n</script>\r\n\r\n\r\n            <section class="copyright">\r\n                    <p style="font-size:1rem" align=center>\r\n                        &copy; 2018 <a><b>Team JUST</b></a>. All Rights Reserved.\r\n                        <br />\r\n                    </p>\r\n            </section>\r\n\r\n</div>\r\n</body>\r\n</html>\r\n</state-shakedown>',
    );
    route.base('/');
    route.start(true);

    // mount navbar
    // riot.mount('module-navbar', 'state-navbar')

    return true;
  })();
});

/*============================================================================
=            Utility functions that don't deserve their own files            =
============================================================================*/
window.parseDifference = function(start, end) {
  // calc diff
  const diff = (start - Math.floor(end.getTime()) / 1000) | 0;

  // extract time units
  let minutes = (diff / 60) % 60 | 0;
  let seconds = diff % 60 | 0;
  let hours = (diff / 3600) | 0;

  // prettify with a leading zero if less then ten per unit
  minutes = minutes < 10 ? '0' + minutes : minutes;
  seconds = seconds < 10 ? '0' + seconds : seconds;
  hours = hours < 10 ? '0' + hours : hours;

  return {
    hours: hours,
    minutes: minutes,
    seconds: seconds,
    diff,
  };
};

class Countdown {
  constructor(endsAt, cb) {
    this.endsAt = endsAt;
    this.cb = cb;
    this.destroyed = false;
    this.Iterator(false);
  }

  Iterator(kill) {
    var $this = this;
    let difference = window.parseDifference($this.endsAt, JUST.date());
    $this.cb(difference, difference.diff < 0);
    if (!kill && !$this.destroyed)
      setTimeout(() => {
        $this.Iterator(difference.diff < 0);
      }, 1000);
  }

  Destroy() {
    this.destroyed = true;
  }
}

window.Countdown = Countdown;

if (window.localStorage.getItem('tutorials') == null) {
  window.tutorial_mode = false;
  localStorage.setItem('tutorials', window.tutorial_mode);
  $('#tutorialswitch').prop('checked', true);
  console.log('client');
} else {
  window.tutorial_mode = localStorage.getItem('tutorials');
}

window.tutorials = function() {
  jQuery('.tutorial').toggle();
  window.tutorial_mode = !window.tutorial_mode;
  localStorage.setItem('tutorials', window.tutorial_mode);
};

/**
 * Konami Code for Terminal popup
 * credit to Stephen McKamey
 * https://github.com/mckamey/konami-js/blob/master/konami.js
 */
var Konami = {};
(function(Konami, window) {
  /**
   * Creates an event handler responding to the specified sequence.
   * @param {...number|function()} arguments
   * @return {function(Event)}
   */
  var sequence = (Konami.sequence = function() {
    var sequence = Array.prototype.slice.call(arguments),
      state = 0;

    /**
     * Event handler
     * @param {Event|number} e
     */
    return function(e) {
      // patch legacy IE
      e = e || window.event;
      e = e.keyCode || e.which || e;

      if (e === sequence[state] || e === sequence[(state = 0)]) {
        // move next and peek
        var action = sequence[++state];

        // sequence complete when a function is reached
        if (typeof action !== 'function') {
          return;
        }

        // fire action
        action();

        // reset when sequence completed
        state = 0;
      }
    };
  });

  /**
   * Creates an event handler responding to the Konami Code.
   * @param {function()} action completed sequence callback
   * @return {function(Event)}
   */
  Konami.code = function(action) {
    return sequence(38, 38, 40, 40, 37, 39, 37, 39, 66, 65, action);
  };
})(Konami, window);

$(document).on(
  'keyup',

  Konami.code(function() {
    $('#terminal').css({
      visibility: 'visible',
    });
    $('.commandInput').focus();
  }),
);
